/*!
 * jQuery JavaScript Library v1.7
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 3 16:18:21 2011 -0400
 */
(function(bd,M){var av=bd.document,bx=bd.navigator,bo=bd.location;var b=(function(){var bI=function(b4,b5){return new bI.fn.init(b4,b5,bG)},bY=bd.jQuery,bK=bd.$,bG,b2=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bQ=/\S/,bM=/^\s+/,bH=/\s+$/,bL=/\d/,bD=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bR=/^[\],:{}\s]*$/,b0=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bT=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bN=/(?:^|:|,)(?:\s*\[)+/g,bB=/(webkit)[ \/]([\w.]+)/,bV=/(opera)(?:.*version)?[ \/]([\w.]+)/,bU=/(msie) ([\w.]+)/,bW=/(mozilla)(?:.*? rv:([\w.]+))?/,bE=/-([a-z]|[0-9])/ig,b3=/^-ms-/,bX=function(b4,b5){return(b5+"").toUpperCase()},b1=bx.userAgent,bZ,bF,e,bP=Object.prototype.toString,bJ=Object.prototype.hasOwnProperty,bC=Array.prototype.push,bO=Array.prototype.slice,bS=String.prototype.trim,by=Array.prototype.indexOf,bA={};bI.fn=bI.prototype={constructor:bI,init:function(b4,b8,b7){var b6,b9,b5,ca;if(!b4){return this}if(b4.nodeType){this.context=this[0]=b4;this.length=1;return this}if(b4==="body"&&!b8&&av.body){this.context=av;this[0]=av.body;this.selector=b4;this.length=1;return this}if(typeof b4==="string"){if(b4.charAt(0)==="<"&&b4.charAt(b4.length-1)===">"&&b4.length>=3){b6=[null,b4,null]}else{b6=b2.exec(b4)}if(b6&&(b6[1]||!b8)){if(b6[1]){b8=b8 instanceof bI?b8[0]:b8;ca=(b8?b8.ownerDocument||b8:av);b5=bD.exec(b4);if(b5){if(bI.isPlainObject(b8)){b4=[av.createElement(b5[1])];bI.fn.attr.call(b4,b8,true)}else{b4=[ca.createElement(b5[1])]}}else{b5=bI.buildFragment([b6[1]],[ca]);b4=(b5.cacheable?bI.clone(b5.fragment):b5.fragment).childNodes}return bI.merge(this,b4)}else{b9=av.getElementById(b6[2]);if(b9&&b9.parentNode){if(b9.id!==b6[2]){return b7.find(b4)}this.length=1;this[0]=b9}this.context=av;this.selector=b4;return this}}else{if(!b8||b8.jquery){return(b8||b7).find(b4)}else{return this.constructor(b8).find(b4)}}}else{if(bI.isFunction(b4)){return b7.ready(b4)}}if(b4.selector!==M){this.selector=b4.selector;this.context=b4.context}return bI.makeArray(b4,this)},selector:"",jquery:"1.7",length:0,size:function(){return this.length},toArray:function(){return bO.call(this,0)},get:function(b4){return b4==null?this.toArray():(b4<0?this[this.length+b4]:this[b4])},pushStack:function(b5,b7,b4){var b6=this.constructor();if(bI.isArray(b5)){bC.apply(b6,b5)}else{bI.merge(b6,b5)}b6.prevObject=this;b6.context=this.context;if(b7==="find"){b6.selector=this.selector+(this.selector?" ":"")+b4}else{if(b7){b6.selector=this.selector+"."+b7+"("+b4+")"}}return b6},each:function(b5,b4){return bI.each(this,b5,b4)},ready:function(b4){bI.bindReady();bF.add(b4);return this},eq:function(b4){return b4===-1?this.slice(b4):this.slice(b4,+b4+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bO.apply(this,arguments),"slice",bO.call(arguments).join(","))},map:function(b4){return this.pushStack(bI.map(this,function(b6,b5){return b4.call(b6,b5,b6)}))},end:function(){return this.prevObject||this.constructor(null)},push:bC,sort:[].sort,splice:[].splice};bI.fn.init.prototype=bI.fn;bI.extend=bI.fn.extend=function(){var cd,b6,b4,b5,ca,cb,b9=arguments[0]||{},b8=1,b7=arguments.length,cc=false;if(typeof b9==="boolean"){cc=b9;b9=arguments[1]||{};b8=2}if(typeof b9!=="object"&&!bI.isFunction(b9)){b9={}}if(b7===b8){b9=this;--b8}for(;b8<b7;b8++){if((cd=arguments[b8])!=null){for(b6 in cd){b4=b9[b6];b5=cd[b6];if(b9===b5){continue}if(cc&&b5&&(bI.isPlainObject(b5)||(ca=bI.isArray(b5)))){if(ca){ca=false;cb=b4&&bI.isArray(b4)?b4:[]}else{cb=b4&&bI.isPlainObject(b4)?b4:{}}b9[b6]=bI.extend(cc,cb,b5)}else{if(b5!==M){b9[b6]=b5}}}}}return b9};bI.extend({noConflict:function(b4){if(bd.$===bI){bd.$=bK}if(b4&&bd.jQuery===bI){bd.jQuery=bY}return bI},isReady:false,readyWait:1,holdReady:function(b4){if(b4){bI.readyWait++}else{bI.ready(true)}},ready:function(b4){if((b4===true&&!--bI.readyWait)||(b4!==true&&!bI.isReady)){if(!av.body){return setTimeout(bI.ready,1)}bI.isReady=true;if(b4!==true&&--bI.readyWait>0){return}bF.fireWith(av,[bI]);if(bI.fn.trigger){bI(av).trigger("ready").unbind("ready")}}},bindReady:function(){if(bF){return}bF=bI.Callbacks("once memory");if(av.readyState==="complete"){return setTimeout(bI.ready,1)}if(av.addEventListener){av.addEventListener("DOMContentLoaded",e,false);bd.addEventListener("load",bI.ready,false)}else{if(av.attachEvent){av.attachEvent("onreadystatechange",e);bd.attachEvent("onload",bI.ready);var b4=false;try{b4=bd.frameElement==null}catch(b5){}if(av.documentElement.doScroll&&b4){bz()}}}},isFunction:function(b4){return bI.type(b4)==="function"},isArray:Array.isArray||function(b4){return bI.type(b4)==="array"},isWindow:function(b4){return b4&&typeof b4==="object"&&"setInterval" in b4},isNumeric:function(b4){return b4!=null&&bL.test(b4)&&!isNaN(b4)},type:function(b4){return b4==null?String(b4):bA[bP.call(b4)]||"object"},isPlainObject:function(b6){if(!b6||bI.type(b6)!=="object"||b6.nodeType||bI.isWindow(b6)){return false}try{if(b6.constructor&&!bJ.call(b6,"constructor")&&!bJ.call(b6.constructor.prototype,"isPrototypeOf")){return false}}catch(b5){return false}var b4;for(b4 in b6){}return b4===M||bJ.call(b6,b4)},isEmptyObject:function(b5){for(var b4 in b5){return false}return true},error:function(b4){throw b4},parseJSON:function(b4){if(typeof b4!=="string"||!b4){return null}b4=bI.trim(b4);if(bd.JSON&&bd.JSON.parse){return bd.JSON.parse(b4)}if(bR.test(b4.replace(b0,"@").replace(bT,"]").replace(bN,""))){return(new Function("return "+b4))()}bI.error("Invalid JSON: "+b4)},parseXML:function(b6){var b4,b5;try{if(bd.DOMParser){b5=new DOMParser();b4=b5.parseFromString(b6,"text/xml")}else{b4=new ActiveXObject("Microsoft.XMLDOM");b4.async="false";b4.loadXML(b6)}}catch(b7){b4=M}if(!b4||!b4.documentElement||b4.getElementsByTagName("parsererror").length){bI.error("Invalid XML: "+b6)}return b4},noop:function(){},globalEval:function(b4){if(b4&&bQ.test(b4)){(bd.execScript||function(b5){bd["eval"].call(bd,b5)})(b4)}},camelCase:function(b4){return b4.replace(b3,"ms-").replace(bE,bX)},nodeName:function(b5,b4){return b5.nodeName&&b5.nodeName.toUpperCase()===b4.toUpperCase()},each:function(b7,ca,b6){var b5,b8=0,b9=b7.length,b4=b9===M||bI.isFunction(b7);if(b6){if(b4){for(b5 in b7){if(ca.apply(b7[b5],b6)===false){break}}}else{for(;b8<b9;){if(ca.apply(b7[b8++],b6)===false){break}}}}else{if(b4){for(b5 in b7){if(ca.call(b7[b5],b5,b7[b5])===false){break}}}else{for(;b8<b9;){if(ca.call(b7[b8],b8,b7[b8++])===false){break}}}}return b7},trim:bS?function(b4){return b4==null?"":bS.call(b4)}:function(b4){return b4==null?"":b4.toString().replace(bM,"").replace(bH,"")},makeArray:function(b7,b5){var b4=b5||[];if(b7!=null){var b6=bI.type(b7);if(b7.length==null||b6==="string"||b6==="function"||b6==="regexp"||bI.isWindow(b7)){bC.call(b4,b7)}else{bI.merge(b4,b7)}}return b4},inArray:function(b6,b7,b5){var b4;if(b7){if(by){return by.call(b7,b6,b5)}b4=b7.length;b5=b5?b5<0?Math.max(0,b4+b5):b5:0;for(;b5<b4;b5++){if(b5 in b7&&b7[b5]===b6){return b5}}}return -1},merge:function(b8,b6){var b7=b8.length,b5=0;if(typeof b6.length==="number"){for(var b4=b6.length;b5<b4;b5++){b8[b7++]=b6[b5]}}else{while(b6[b5]!==M){b8[b7++]=b6[b5++]}}b8.length=b7;return b8},grep:function(b5,ca,b4){var b6=[],b9;b4=!!b4;for(var b7=0,b8=b5.length;b7<b8;b7++){b9=!!ca(b5[b7],b7);if(b4!==b9){b6.push(b5[b7])}}return b6},map:function(b4,cb,cc){var b9,ca,b8=[],b6=0,b5=b4.length,b7=b4 instanceof bI||b5!==M&&typeof b5==="number"&&((b5>0&&b4[0]&&b4[b5-1])||b5===0||bI.isArray(b4));if(b7){for(;b6<b5;b6++){b9=cb(b4[b6],b6,cc);if(b9!=null){b8[b8.length]=b9}}}else{for(ca in b4){b9=cb(b4[ca],ca,cc);if(b9!=null){b8[b8.length]=b9}}}return b8.concat.apply([],b8)},guid:1,proxy:function(b8,b7){if(typeof b7==="string"){var b6=b8[b7];b7=b8;b8=b6}if(!bI.isFunction(b8)){return M}var b4=bO.call(arguments,2),b5=function(){return b8.apply(b7,b4.concat(bO.call(arguments)))};b5.guid=b8.guid=b8.guid||b5.guid||bI.guid++;return b5},access:function(b4,cc,ca,b6,b9,cb){var b5=b4.length;if(typeof cc==="object"){for(var b7 in cc){bI.access(b4,b7,cc[b7],b6,b9,ca)}return b4}if(ca!==M){b6=!cb&&b6&&bI.isFunction(ca);for(var b8=0;b8<b5;b8++){b9(b4[b8],cc,b6?ca.call(b4[b8],b8,b9(b4[b8],cc)):ca,cb)}return b4}return b5?b9(b4[0],cc):M},now:function(){return(new Date()).getTime()},uaMatch:function(b5){b5=b5.toLowerCase();var b4=bB.exec(b5)||bV.exec(b5)||bU.exec(b5)||b5.indexOf("compatible")<0&&bW.exec(b5)||[];return{browser:b4[1]||"",version:b4[2]||"0"}},sub:function(){function b4(b7,b8){return new b4.fn.init(b7,b8)}bI.extend(true,b4,this);b4.superclass=this;b4.fn=b4.prototype=this();b4.fn.constructor=b4;b4.sub=this.sub;b4.fn.init=function b6(b7,b8){if(b8&&b8 instanceof bI&&!(b8 instanceof b4)){b8=b4(b8)}return bI.fn.init.call(this,b7,b8,b5)};b4.fn.init.prototype=b4.fn;var b5=b4(av);return b4},browser:{}});bI.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b5,b4){bA["[object "+b4+"]"]=b4.toLowerCase()});bZ=bI.uaMatch(b1);if(bZ.browser){bI.browser[bZ.browser]=true;bI.browser.version=bZ.version}if(bI.browser.webkit){bI.browser.safari=true}if(bQ.test("\xA0")){bM=/^[\s\xA0]+/;bH=/[\s\xA0]+$/}bG=bI(av);if(av.addEventListener){e=function(){av.removeEventListener("DOMContentLoaded",e,false);bI.ready()}}else{if(av.attachEvent){e=function(){if(av.readyState==="complete"){av.detachEvent("onreadystatechange",e);bI.ready()}}}}function bz(){if(bI.isReady){return}try{av.documentElement.doScroll("left")}catch(b4){setTimeout(bz,1);return}bI.ready()}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bI})}return bI})();var a4={};function Y(e){var by=a4[e]={},bz,bA;e=e.split(/\s+/);for(bz=0,bA=e.length;bz<bA;bz++){by[e[bz]]=true}return by}b.Callbacks=function(bz){bz=bz?(a4[bz]||Y(bz)):{};var bE=[],bF=[],bA,bB,by,bC,bD,bH=function(bI){var bJ,bM,bL,bK,bN;for(bJ=0,bM=bI.length;bJ<bM;bJ++){bL=bI[bJ];bK=b.type(bL);if(bK==="array"){bH(bL)}else{if(bK==="function"){if(!bz.unique||!bG.has(bL)){bE.push(bL)}}}}},e=function(bJ,bI){bI=bI||[];bA=!bz.memory||[bJ,bI];bB=true;bD=by||0;by=0;bC=bE.length;for(;bE&&bD<bC;bD++){if(bE[bD].apply(bJ,bI)===false&&bz.stopOnFalse){bA=true;break}}bB=false;if(bE){if(!bz.once){if(bF&&bF.length){bA=bF.shift();bG.fireWith(bA[0],bA[1])}}else{if(bA===true){bG.disable()}else{bE=[]}}}},bG={add:function(){if(bE){var bI=bE.length;bH(arguments);if(bB){bC=bE.length}else{if(bA&&bA!==true){by=bI;e(bA[0],bA[1])}}}return this},remove:function(){if(bE){var bI=arguments,bK=0,bL=bI.length;for(;bK<bL;bK++){for(var bJ=0;bJ<bE.length;bJ++){if(bI[bK]===bE[bJ]){if(bB){if(bJ<=bC){bC--;if(bJ<=bD){bD--}}}bE.splice(bJ--,1);if(bz.unique){break}}}}}return this},has:function(bJ){if(bE){var bI=0,bK=bE.length;for(;bI<bK;bI++){if(bJ===bE[bI]){return true}}}return false},empty:function(){bE=[];return this},disable:function(){bE=bF=bA=M;return this},disabled:function(){return !bE},lock:function(){bF=M;if(!bA||bA===true){bG.disable()}return this},locked:function(){return !bF},fireWith:function(bJ,bI){if(bF){if(bB){if(!bz.once){bF.push([bJ,bI])}}else{if(!(bz.once&&bA)){e(bJ,bI)}}}return this},fire:function(){bG.fireWith(this,arguments);return this},fired:function(){return !!bA}};return bG};var aK=[].slice;b.extend({Deferred:function(bB){var bA=b.Callbacks("once memory"),bz=b.Callbacks("once memory"),by=b.Callbacks("memory"),e="pending",bD={resolve:bA,reject:bz,notify:by},bF={done:bA.add,fail:bz.add,progress:by.add,state:function(){return e},isResolved:bA.fired,isRejected:bz.fired,then:function(bH,bG,bI){bE.done(bH).fail(bG).progress(bI);return this},always:function(){return bE.done.apply(bE,arguments).fail.apply(bE,arguments)},pipe:function(bI,bH,bG){return b.Deferred(function(bJ){b.each({done:[bI,"resolve"],fail:[bH,"reject"],progress:[bG,"notify"]},function(bL,bO){var bK=bO[0],bN=bO[1],bM;if(b.isFunction(bK)){bE[bL](function(){bM=bK.apply(this,arguments);if(bM&&b.isFunction(bM.promise)){bM.promise().then(bJ.resolve,bJ.reject,bJ.notify)}else{bJ[bN+"With"](this===bE?bJ:this,[bM])}})}else{bE[bL](bJ[bN])}})}).promise()},promise:function(bH){if(bH==null){bH=bF}else{for(var bG in bF){bH[bG]=bF[bG]}}return bH}},bE=bF.promise({}),bC;for(bC in bD){bE[bC]=bD[bC].fire;bE[bC+"With"]=bD[bC].fireWith}bE.done(function(){e="resolved"},bz.disable,by.lock).fail(function(){e="rejected"},bA.disable,by.lock);if(bB){bB.call(bE,bE)}return bE},when:function(bD){var bA=aK.call(arguments,0),by=0,e=bA.length,bE=new Array(e),bz=e,bB=e,bF=e<=1&&bD&&b.isFunction(bD.promise)?bD:b.Deferred(),bH=bF.promise();function bG(bI){return function(bJ){bA[bI]=arguments.length>1?aK.call(arguments,0):bJ;if(!(--bz)){bF.resolveWith(bF,bA)}}}function bC(bI){return function(bJ){bE[bI]=arguments.length>1?aK.call(arguments,0):bJ;bF.notifyWith(bH,bE)}}if(e>1){for(;by<e;by++){if(bA[by]&&bA[by].promise&&b.isFunction(bA[by].promise)){bA[by].promise().then(bG(by),bF.reject,bC(by))}else{--bz}}if(!bz){bF.resolveWith(bF,bA)}}else{if(bF!==bD){bF.resolveWith(bF,e?[bD]:[])}}return bH}});b.support=(function(){var bI=av.createElement("div"),bP=av.documentElement,bB,bQ,bJ,bz,bH,bC,bF,by,bG,bK,bE,bO,bM,bA,bD,bL,bR;bI.setAttribute("className","t");bI.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/><nav></nav>";bB=bI.getElementsByTagName("*");bQ=bI.getElementsByTagName("a")[0];if(!bB||!bB.length||!bQ){return{}}bJ=av.createElement("select");bz=bJ.appendChild(av.createElement("option"));bH=bI.getElementsByTagName("input")[0];bF={leadingWhitespace:(bI.firstChild.nodeType===3),tbody:!bI.getElementsByTagName("tbody").length,htmlSerialize:!!bI.getElementsByTagName("link").length,style:/top/.test(bQ.getAttribute("style")),hrefNormalized:(bQ.getAttribute("href")==="/a"),opacity:/^0.55/.test(bQ.style.opacity),cssFloat:!!bQ.style.cssFloat,unknownElems:!!bI.getElementsByTagName("nav").length,checkOn:(bH.value==="on"),optSelected:bz.selected,getSetAttribute:bI.className!=="t",enctype:!!av.createElement("form").enctype,submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bH.checked=true;bF.noCloneChecked=bH.cloneNode(true).checked;bJ.disabled=true;bF.optDisabled=!bz.disabled;try{delete bI.test}catch(bN){bF.deleteExpando=false}if(!bI.addEventListener&&bI.attachEvent&&bI.fireEvent){bI.attachEvent("onclick",function(){bF.noCloneEvent=false});bI.cloneNode(true).fireEvent("onclick")}bH=av.createElement("input");bH.value="t";bH.setAttribute("type","radio");bF.radioValue=bH.value==="t";bH.setAttribute("checked","checked");bI.appendChild(bH);by=av.createDocumentFragment();by.appendChild(bI.lastChild);bF.checkClone=by.cloneNode(true).cloneNode(true).lastChild.checked;bI.innerHTML="";bI.style.width=bI.style.paddingLeft="1px";bG=av.getElementsByTagName("body")[0];bE=av.createElement(bG?"div":"body");bO={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(bG){b.extend(bO,{position:"absolute",left:"-999px",top:"-999px"})}for(bL in bO){bE.style[bL]=bO[bL]}bE.appendChild(bI);bK=bG||bP;bK.insertBefore(bE,bK.firstChild);bF.appendChecked=bH.checked;bF.boxModel=bI.offsetWidth===2;if("zoom" in bI.style){bI.style.display="inline";bI.style.zoom=1;bF.inlineBlockNeedsLayout=(bI.offsetWidth===2);bI.style.display="";bI.innerHTML="<div style='width:4px;'></div>";bF.shrinkWrapBlocks=(bI.offsetWidth!==2)}bI.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bM=bI.getElementsByTagName("td");bR=(bM[0].offsetHeight===0);bM[0].style.display="";bM[1].style.display="none";bF.reliableHiddenOffsets=bR&&(bM[0].offsetHeight===0);bI.innerHTML="";if(av.defaultView&&av.defaultView.getComputedStyle){bC=av.createElement("div");bC.style.width="0";bC.style.marginRight="0";bI.appendChild(bC);bF.reliableMarginRight=(parseInt((av.defaultView.getComputedStyle(bC,null)||{marginRight:0}).marginRight,10)||0)===0}if(bI.attachEvent){for(bL in {submit:1,change:1,focusin:1}){bD="on"+bL;bR=(bD in bI);if(!bR){bI.setAttribute(bD,"return;");bR=(typeof bI[bD]==="function")}bF[bL+"Bubbles"]=bR}}b(function(){var bT,b0,b1,bZ,bU,bV,bS=1,bY="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",bX="visibility:hidden;border:0;",e="style='"+bY+"border:5px solid #000;padding:0;'",bW="<div "+e+"><div></div></div><table "+e+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";bG=av.getElementsByTagName("body")[0];if(!bG){return}bT=av.createElement("div");bT.style.cssText=bX+"width:0;height:0;position:static;top:0;margin-top:"+bS+"px";bG.insertBefore(bT,bG.firstChild);bE=av.createElement("div");bE.style.cssText=bY+bX;bE.innerHTML=bW;bT.appendChild(bE);b0=bE.firstChild;b1=b0.firstChild;bU=b0.nextSibling.firstChild.firstChild;bV={doesNotAddBorder:(b1.offsetTop!==5),doesAddBorderForTableAndCells:(bU.offsetTop===5)};b1.style.position="fixed";b1.style.top="20px";bV.fixedPosition=(b1.offsetTop===20||b1.offsetTop===15);b1.style.position=b1.style.top="";b0.style.overflow="hidden";b0.style.position="relative";bV.subtractsBorderForOverflowNotVisible=(b1.offsetTop===-5);bV.doesNotIncludeMarginInBodyOffset=(bG.offsetTop!==bS);bG.removeChild(bT);bE=bT=null;b.extend(bF,bV)});bE.innerHTML="";bK.removeChild(bE);bE=by=bJ=bz=bG=bC=bI=bH=null;return bF})();b.boxModel=b.support.boxModel;var aT=/^(?:\{.*\}|\[.*\])$/,aA=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!U(e)},data:function(bA,by,bC,bB){if(!b.acceptData(bA)){return}var bJ,bD,bG,bH=b.expando,bF=typeof by==="string",bI=bA.nodeType,e=bI?b.cache:bA,bz=bI?bA[b.expando]:bA[b.expando]&&b.expando,bE=by==="events";if((!bz||!e[bz]||(!bE&&!bB&&!e[bz].data))&&bF&&bC===M){return}if(!bz){if(bI){bA[b.expando]=bz=++b.uuid}else{bz=b.expando}}if(!e[bz]){e[bz]={};if(!bI){e[bz].toJSON=b.noop}}if(typeof by==="object"||typeof by==="function"){if(bB){e[bz]=b.extend(e[bz],by)}else{e[bz].data=b.extend(e[bz].data,by)}}bJ=bD=e[bz];if(!bB){if(!bD.data){bD.data={}}bD=bD.data}if(bC!==M){bD[b.camelCase(by)]=bC}if(bE&&!bD[by]){return bJ.events}if(bF){bG=bD[by];if(bG==null){bG=bD[b.camelCase(by)]}}else{bG=bD}return bG},removeData:function(bA,by,bB){if(!b.acceptData(bA)){return}var bE,bD,bC,bF=b.expando,bG=bA.nodeType,e=bG?b.cache:bA,bz=bG?bA[b.expando]:b.expando;if(!e[bz]){return}if(by){bE=bB?e[bz]:e[bz].data;if(bE){if(b.isArray(by)){by=by}else{if(by in bE){by=[by]}else{by=b.camelCase(by);if(by in bE){by=[by]}else{by=by.split(" ")}}}for(bD=0,bC=by.length;bD<bC;bD++){delete bE[by[bD]]}if(!(bB?U:b.isEmptyObject)(bE)){return}}}if(!bB){delete e[bz].data;if(!U(e[bz])){return}}if(b.support.deleteExpando||!e.setInterval){delete e[bz]}else{e[bz]=null}if(bG){if(b.support.deleteExpando){delete bA[b.expando]}else{if(bA.removeAttribute){bA.removeAttribute(b.expando)}else{bA[b.expando]=null}}}},_data:function(by,e,bz){return b.data(by,e,bz,true)},acceptData:function(by){if(by.nodeName){var e=b.noData[by.nodeName.toLowerCase()];if(e){return !(e===true||by.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bB,bD){var bE,e,bz,bC=null;if(typeof bB==="undefined"){if(this.length){bC=b.data(this[0]);if(this[0].nodeType===1&&!b._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var bA=0,by=e.length;bA<by;bA++){bz=e[bA].name;if(bz.indexOf("data-")===0){bz=b.camelCase(bz.substring(5));a7(this[0],bz,bC[bz])}}b._data(this[0],"parsedAttrs",true)}}return bC}else{if(typeof bB==="object"){return this.each(function(){b.data(this,bB)})}}bE=bB.split(".");bE[1]=bE[1]?"."+bE[1]:"";if(bD===M){bC=this.triggerHandler("getData"+bE[1]+"!",[bE[0]]);if(bC===M&&this.length){bC=b.data(this[0],bB);bC=a7(this[0],bB,bC)}return bC===M&&bE[1]?this.data(bE[0]):bC}else{return this.each(function(){var bG=b(this),bF=[bE[0],bD];bG.triggerHandler("setData"+bE[1]+"!",bF);b.data(this,bB,bD);bG.triggerHandler("changeData"+bE[1]+"!",bF)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a7(bA,bz,bB){if(bB===M&&bA.nodeType===1){var by="data-"+bz.replace(aA,"-$1").toLowerCase();bB=bA.getAttribute(by);if(typeof bB==="string"){try{bB=bB==="true"?true:bB==="false"?false:bB==="null"?null:b.isNumeric(bB)?parseFloat(bB):aT.test(bB)?b.parseJSON(bB):bB}catch(bC){}b.data(bA,bz,bB)}else{bB=M}}return bB}function U(by){for(var e in by){if(e==="data"&&b.isEmptyObject(by[e])){continue}if(e!=="toJSON"){return false}}return true}function bk(bB,bA,bD){var bz=bA+"defer",by=bA+"queue",e=bA+"mark",bC=b._data(bB,bz);if(bC&&(bD==="queue"||!b._data(bB,by))&&(bD==="mark"||!b._data(bB,e))){setTimeout(function(){if(!b._data(bB,by)&&!b._data(bB,e)){b.removeData(bB,bz,true);bC.fire()}},0)}}b.extend({_mark:function(by,e){if(by){e=(e||"fx")+"mark";b._data(by,e,(b._data(by,e)||0)+1)}},_unmark:function(bB,bA,by){if(bB!==true){by=bA;bA=bB;bB=false}if(bA){by=by||"fx";var e=by+"mark",bz=bB?0:((b._data(bA,e)||1)-1);if(bz){b._data(bA,e,bz)}else{b.removeData(bA,e,true);bk(bA,by,"mark")}}},queue:function(by,e,bA){var bz;if(by){e=(e||"fx")+"queue";bz=b._data(by,e);if(bA){if(!bz||b.isArray(bA)){bz=b._data(by,e,b.makeArray(bA))}else{bz.push(bA)}}return bz||[]}},dequeue:function(bB,bA){bA=bA||"fx";var by=b.queue(bB,bA),bz=by.shift(),e={};if(bz==="inprogress"){bz=by.shift()}if(bz){if(bA==="fx"){by.unshift("inprogress")}b._data(bB,bA+".run",e);bz.call(bB,function(){b.dequeue(bB,bA)},e)}if(!by.length){b.removeData(bB,bA+"queue "+bA+".run",true);bk(bB,bA,"queue")}}});b.fn.extend({queue:function(e,by){if(typeof e!=="string"){by=e;e="fx"}if(by===M){return b.queue(this[0],e)}return this.each(function(){var bz=b.queue(this,e,by);if(e==="fx"&&bz[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(by,e){by=b.fx?b.fx.speeds[by]||by:by;e=e||"fx";return this.queue(e,function(bA,bz){var bB=setTimeout(bA,by);bz.stop=function(){clearTimeout(bB)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bG,bz){if(typeof bG!=="string"){bz=bG;bG=M}bG=bG||"fx";var e=b.Deferred(),by=this,bB=by.length,bE=1,bC=bG+"defer",bD=bG+"queue",bF=bG+"mark",bA;function bH(){if(!(--bE)){e.resolveWith(by,[by])}}while(bB--){if((bA=b.data(by[bB],bC,M,true)||(b.data(by[bB],bD,M,true)||b.data(by[bB],bF,M,true))&&b.data(by[bB],bC,b.Callbacks("once memory"),true))){bE++;bA.add(bH)}}bH();return e.promise()}});var aQ=/[\n\t\r]/g,ag=/\s+/,aV=/\r/g,g=/^(?:button|input)$/i,E=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,ao=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,G=b.support.getSetAttribute,bg,aZ,aF;b.fn.extend({attr:function(e,by){return b.access(this,e,by,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,by){return b.access(this,e,by,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=M;delete this[e]}catch(by){}})},addClass:function(bB){var bD,bz,by,bA,bC,bE,e;if(b.isFunction(bB)){return this.each(function(bF){b(this).addClass(bB.call(this,bF,this.className))})}if(bB&&typeof bB==="string"){bD=bB.split(ag);for(bz=0,by=this.length;bz<by;bz++){bA=this[bz];if(bA.nodeType===1){if(!bA.className&&bD.length===1){bA.className=bB}else{bC=" "+bA.className+" ";for(bE=0,e=bD.length;bE<e;bE++){if(!~bC.indexOf(" "+bD[bE]+" ")){bC+=bD[bE]+" "}}bA.className=b.trim(bC)}}}}return this},removeClass:function(bC){var bD,bz,by,bB,bA,bE,e;if(b.isFunction(bC)){return this.each(function(bF){b(this).removeClass(bC.call(this,bF,this.className))})}if((bC&&typeof bC==="string")||bC===M){bD=(bC||"").split(ag);for(bz=0,by=this.length;bz<by;bz++){bB=this[bz];if(bB.nodeType===1&&bB.className){if(bC){bA=(" "+bB.className+" ").replace(aQ," ");for(bE=0,e=bD.length;bE<e;bE++){bA=bA.replace(" "+bD[bE]+" "," ")}bB.className=b.trim(bA)}else{bB.className=""}}}}return this},toggleClass:function(bA,by){var bz=typeof bA,e=typeof by==="boolean";if(b.isFunction(bA)){return this.each(function(bB){b(this).toggleClass(bA.call(this,bB,this.className,by),by)})}return this.each(function(){if(bz==="string"){var bD,bC=0,bB=b(this),bE=by,bF=bA.split(ag);while((bD=bF[bC++])){bE=e?bE:!bB.hasClass(bD);bB[bE?"addClass":"removeClass"](bD)}}else{if(bz==="undefined"||bz==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bA===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bA=" "+e+" ",bz=0,by=this.length;for(;bz<by;bz++){if(this[bz].nodeType===1&&(" "+this[bz].className+" ").replace(aQ," ").indexOf(bA)>-1){return true}}return false},val:function(bA){var e,by,bB,bz=this[0];if(!arguments.length){if(bz){e=b.valHooks[bz.nodeName.toLowerCase()]||b.valHooks[bz.type];if(e&&"get" in e&&(by=e.get(bz,"value"))!==M){return by}by=bz.value;return typeof by==="string"?by.replace(aV,""):by==null?"":by}return M}bB=b.isFunction(bA);return this.each(function(bD){var bC=b(this),bE;if(this.nodeType!==1){return}if(bB){bE=bA.call(this,bD,bC.val())}else{bE=bA}if(bE==null){bE=""}else{if(typeof bE==="number"){bE+=""}else{if(b.isArray(bE)){bE=b.map(bE,function(bF){return bF==null?"":bF+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bE,"value")===M){this.value=bE}})}});b.extend({valHooks:{option:{get:function(e){var by=e.attributes.value;return !by||by.specified?e.value:e.text}},select:{get:function(e){var bD,by,bC,bA,bB=e.selectedIndex,bE=[],bF=e.options,bz=e.type==="select-one";if(bB<0){return null}by=bz?bB:0;bC=bz?bB+1:bF.length;for(;by<bC;by++){bA=bF[by];if(bA.selected&&(b.support.optDisabled?!bA.disabled:bA.getAttribute("disabled")===null)&&(!bA.parentNode.disabled||!b.nodeName(bA.parentNode,"optgroup"))){bD=b(bA).val();if(bz){return bD}bE.push(bD)}}if(bz&&!bE.length&&bF.length){return b(bF[bB]).val()}return bE},set:function(by,bz){var e=b.makeArray(bz);b(by).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){by.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(bD,bA,bE,bC){var bz,e,bB,by=bD.nodeType;if(!bD||by===3||by===8||by===2){return M}if(bC&&bA in b.attrFn){return b(bD)[bA](bE)}if(!("getAttribute" in bD)){return b.prop(bD,bA,bE)}bB=by!==1||!b.isXMLDoc(bD);if(bB){bA=bA.toLowerCase();e=b.attrHooks[bA]||(ao.test(bA)?aZ:bg)}if(bE!==M){if(bE===null){b.removeAttr(bD,bA);return M}else{if(e&&"set" in e&&bB&&(bz=e.set(bD,bE,bA))!==M){return bz}else{bD.setAttribute(bA,""+bE);return bE}}}else{if(e&&"get" in e&&bB&&(bz=e.get(bD,bA))!==null){return bz}else{bz=bD.getAttribute(bA);return bz===null?M:bz}}},removeAttr:function(bA,bC){var bB,bD,by,e,bz=0;if(bA.nodeType===1){bD=(bC||"").split(ag);e=bD.length;for(;bz<e;bz++){by=bD[bz].toLowerCase();bB=b.propFix[by]||by;b.attr(bA,by,"");bA.removeAttribute(G?by:bB);if(ao.test(by)&&bB in bA){bA[bB]=false}}}},attrHooks:{type:{set:function(e,by){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&by==="radio"&&b.nodeName(e,"input")){var bz=e.value;e.setAttribute("type",by);if(bz){e.value=bz}return by}}}},value:{get:function(by,e){if(bg&&b.nodeName(by,"button")){return bg.get(by,e)}return e in by?by.value:null},set:function(by,bz,e){if(bg&&b.nodeName(by,"button")){return bg.set(by,bz,e)}by.value=bz}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bC,bA,bD){var bz,e,bB,by=bC.nodeType;if(!bC||by===3||by===8||by===2){return M}bB=by!==1||!b.isXMLDoc(bC);if(bB){bA=b.propFix[bA]||bA;e=b.propHooks[bA]}if(bD!==M){if(e&&"set" in e&&(bz=e.set(bC,bD,bA))!==M){return bz}else{return(bC[bA]=bD)}}else{if(e&&"get" in e&&(bz=e.get(bC,bA))!==null){return bz}else{return bC[bA]}}},propHooks:{tabIndex:{get:function(by){var e=by.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):E.test(by.nodeName)||l.test(by.nodeName)&&by.href?0:M}}}});b.attrHooks.tabindex=b.propHooks.tabIndex;aZ={get:function(by,e){var bA,bz=b.prop(by,e);return bz===true||typeof bz!=="boolean"&&(bA=by.getAttributeNode(e))&&bA.nodeValue!==false?e.toLowerCase():M},set:function(by,bA,e){var bz;if(bA===false){b.removeAttr(by,e)}else{bz=b.propFix[e]||e;if(bz in by){by[bz]=true}by.setAttribute(e,e.toLowerCase())}return e}};if(!G){aF={name:true,id:true};bg=b.valHooks.button={get:function(bz,by){var e;e=bz.getAttributeNode(by);return e&&(aF[by]?e.nodeValue!=="":e.specified)?e.nodeValue:M},set:function(bz,bA,by){var e=bz.getAttributeNode(by);if(!e){e=av.createAttribute(by);bz.setAttributeNode(e)}return(e.nodeValue=bA+"")}};b.attrHooks.tabindex.set=bg.set;b.each(["width","height"],function(by,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bz,bA){if(bA===""){bz.setAttribute(e,"auto");return bA}}})});b.attrHooks.contenteditable={get:bg.get,set:function(by,bz,e){if(bz===""){bz="false"}bg.set(by,bz,e)}}}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(by,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bA){var bz=bA.getAttribute(e,2);return bz===null?M:bz}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||M},set:function(e,by){return(e.style.cssText=""+by)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(by){var e=by.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!b.support.enctype){b.propFix.enctype="encoding"}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,by){if(b.isArray(by)){return(e.checked=b.inArray(b(e).val(),by)>=0)}}})});var a1=/\.(.*)$/,bf=/^(?:textarea|input|select)$/i,P=/\./g,bl=/ /g,aH=/[^\w\s.|`]/g,n=/^([^\.]*)?(?:\.(.+))?$/,K=/\bhover(\.\S+)?/,aP=/^key/,bh=/^(?:mouse|contextmenu)|click/,V=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,Z=function(e){var by=V.exec(e);if(by){by[1]=(by[1]||"").toLowerCase();by[3]=by[3]&&new RegExp("(?:^|\\s)"+by[3]+"(?:\\s|$)")}return by},j=function(by,e){return((!e[1]||by.nodeName.toLowerCase()===e[1])&&(!e[2]||by.id===e[2])&&(!e[3]||e[3].test(by.className)))},bw=function(e){return b.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};b.event={add:function(bA,bF,bM,bD,bB){var bG,bE,bN,bL,bK,bI,e,bJ,by,bC,bz,bH;if(bA.nodeType===3||bA.nodeType===8||!bF||!bM||!(bG=b._data(bA))){return}if(bM.handler){by=bM;bM=by.handler}if(!bM.guid){bM.guid=b.guid++}bN=bG.events;if(!bN){bG.events=bN={}}bE=bG.handle;if(!bE){bG.handle=bE=function(bO){return typeof b!=="undefined"&&(!bO||b.event.triggered!==bO.type)?b.event.dispatch.apply(bE.elem,arguments):M};bE.elem=bA}bF=bw(bF).split(" ");for(bL=0;bL<bF.length;bL++){bK=n.exec(bF[bL])||[];bI=bK[1];e=(bK[2]||"").split(".").sort();bH=b.event.special[bI]||{};bI=(bB?bH.delegateType:bH.bindType)||bI;bH=b.event.special[bI]||{};bJ=b.extend({type:bI,origType:bK[1],data:bD,handler:bM,guid:bM.guid,selector:bB,namespace:e.join(".")},by);if(bB){bJ.quick=Z(bB);if(!bJ.quick&&b.expr.match.POS.test(bB)){bJ.isPositional=true}}bz=bN[bI];if(!bz){bz=bN[bI]=[];bz.delegateCount=0;if(!bH.setup||bH.setup.call(bA,bD,e,bE)===false){if(bA.addEventListener){bA.addEventListener(bI,bE,false)}else{if(bA.attachEvent){bA.attachEvent("on"+bI,bE)}}}}if(bH.add){bH.add.call(bA,bJ);if(!bJ.handler.guid){bJ.handler.guid=bM.guid}}if(bB){bz.splice(bz.delegateCount++,0,bJ)}else{bz.push(bJ)}b.event.global[bI]=true}bA=null},global:{},remove:function(bz,bE,bK,bA){var bF=b.hasData(bz)&&b._data(bz),bL,bM,bH,by,bB,bC,bJ,bG,bD,e,bI;if(!bF||!(bJ=bF.events)){return}bE=bw(bE||"").split(" ");for(bL=0;bL<bE.length;bL++){bM=n.exec(bE[bL])||[];bH=bM[1];by=bM[2];if(!bH){by=by?"."+by:"";for(bC in bJ){b.event.remove(bz,bC+by,bK,bA)}return}bG=b.event.special[bH]||{};bH=(bA?bG.delegateType:bG.bindType)||bH;e=bJ[bH]||[];bB=e.length;by=by?new RegExp("(^|\\.)"+by.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;if(bK||by||bA||bG.remove){for(bC=0;bC<e.length;bC++){bI=e[bC];if(!bK||bK.guid===bI.guid){if(!by||by.test(bI.namespace)){if(!bA||bA===bI.selector||bA==="**"&&bI.selector){e.splice(bC--,1);if(bI.selector){e.delegateCount--}if(bG.remove){bG.remove.call(bz,bI)}}}}}}else{e.length=0}if(e.length===0&&bB!==e.length){if(!bG.teardown||bG.teardown.call(bz,by)===false){b.removeEvent(bz,bH,bF.handle)}delete bJ[bH]}}if(b.isEmptyObject(bJ)){bD=bF.handle;if(bD){bD.elem=null}b.removeData(bz,["events","handle"],true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(by,bG,bD,bM){if(bD&&(bD.nodeType===3||bD.nodeType===8)){return}var bJ=by.type||by,bA=[],e,bz,bF,bK,bC,bB,bI,bH,bE,bL;if(bJ.indexOf("!")>=0){bJ=bJ.slice(0,-1);bz=true}if(bJ.indexOf(".")>=0){bA=bJ.split(".");bJ=bA.shift();bA.sort()}if((!bD||b.event.customEvent[bJ])&&!b.event.global[bJ]){return}by=typeof by==="object"?by[b.expando]?by:new b.Event(bJ,by):new b.Event(bJ);by.type=bJ;by.isTrigger=true;by.exclusive=bz;by.namespace=bA.join(".");by.namespace_re=by.namespace?new RegExp("(^|\\.)"+bA.join("\\.(?:.*\\.)?")+"(\\.|$)"):null;bB=bJ.indexOf(":")<0?"on"+bJ:"";if(bM||!bD){by.preventDefault()}if(!bD){e=b.cache;for(bF in e){if(e[bF].events&&e[bF].events[bJ]){b.event.trigger(by,bG,e[bF].handle.elem,true)}}return}by.result=M;if(!by.target){by.target=bD}bG=bG!=null?b.makeArray(bG):[];bG.unshift(by);bI=b.event.special[bJ]||{};if(bI.trigger&&bI.trigger.apply(bD,bG)===false){return}bE=[[bD,bI.bindType||bJ]];if(!bM&&!bI.noBubble&&!b.isWindow(bD)){bL=bI.delegateType||bJ;bC=null;for(bK=bD.parentNode;bK;bK=bK.parentNode){bE.push([bK,bL]);bC=bK}if(bC&&bC===bD.ownerDocument){bE.push([bC.defaultView||bC.parentWindow||bd,bL])}}for(bF=0;bF<bE.length;bF++){bK=bE[bF][0];by.type=bE[bF][1];bH=(b._data(bK,"events")||{})[by.type]&&b._data(bK,"handle");if(bH){bH.apply(bK,bG)}bH=bB&&bK[bB];if(bH&&b.acceptData(bK)){bH.apply(bK,bG)}if(by.isPropagationStopped()){break}}by.type=bJ;if(!by.isDefaultPrevented()){if((!bI._default||bI._default.apply(bD.ownerDocument,bG)===false)&&!(bJ==="click"&&b.nodeName(bD,"a"))&&b.acceptData(bD)){if(bB&&bD[bJ]&&((bJ!=="focus"&&bJ!=="blur")||by.target.offsetWidth!==0)&&!b.isWindow(bD)){bC=bD[bB];if(bC){bD[bB]=null}b.event.triggered=bJ;bD[bJ]();b.event.triggered=M;if(bC){bD[bB]=bC}}}}return by.result},dispatch:function(bJ){bJ=b.event.fix(bJ||bd.event);var bF=((b._data(this,"events")||{})[bJ.type]||[]),bE=bF.delegateCount,bA=[].slice.call(arguments,0),bG=!bJ.exclusive&&!bJ.namespace,bC=(b.event.special[bJ.type]||{}).handle,by=[],bL,bI,bB,bN,bK,bD,bz,e,bH,bM,bO;bA[0]=bJ;bJ.delegateTarget=this;if(bE&&!bJ.target.disabled&&!(bJ.button&&bJ.type==="click")){for(bB=bJ.target;bB!=this;bB=bB.parentNode||this){bK={};bz=[];for(bL=0;bL<bE;bL++){e=bF[bL];bH=e.selector;bM=bK[bH];if(e.isPositional){bM=(bM||(bK[bH]=b(bH))).index(bB)>=0}else{if(bM===M){bM=bK[bH]=(e.quick?j(bB,e.quick):b(bB).is(bH))}}if(bM){bz.push(e)}}if(bz.length){by.push({elem:bB,matches:bz})}}}if(bF.length>bE){by.push({elem:this,matches:bF.slice(bE)})}for(bL=0;bL<by.length&&!bJ.isPropagationStopped();bL++){bD=by[bL];bJ.currentTarget=bD.elem;for(bI=0;bI<bD.matches.length&&!bJ.isImmediatePropagationStopped();bI++){e=bD.matches[bI];if(bG||(!bJ.namespace&&!e.namespace)||bJ.namespace_re&&bJ.namespace_re.test(e.namespace)){bJ.data=e.data;bJ.handleObj=e;bN=(bC||e.handler).apply(bD.elem,bA);if(bN!==M){bJ.result=bN;if(bN===false){bJ.preventDefault();bJ.stopPropagation()}}}}}return bJ.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(by,e){if(by.which==null){by.which=e.charCode!=null?e.charCode:e.keyCode}return by}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement wheelDelta".split(" "),filter:function(bA,bz){var bB,bC,e,by=bz.button,bD=bz.fromElement;if(bA.pageX==null&&bz.clientX!=null){bB=bA.target.ownerDocument||av;bC=bB.documentElement;e=bB.body;bA.pageX=bz.clientX+(bC&&bC.scrollLeft||e&&e.scrollLeft||0)-(bC&&bC.clientLeft||e&&e.clientLeft||0);bA.pageY=bz.clientY+(bC&&bC.scrollTop||e&&e.scrollTop||0)-(bC&&bC.clientTop||e&&e.clientTop||0)}if(!bA.relatedTarget&&bD){bA.relatedTarget=bD===bA.target?bz.toElement:bD}if(!bA.which&&by!==M){bA.which=(by&1?1:(by&2?3:(by&4?2:0)))}return bA}},fix:function(bz){if(bz[b.expando]){return bz}var by,bC,e=bz,bA=b.event.fixHooks[bz.type]||{},bB=bA.props?this.props.concat(bA.props):this.props;bz=b.Event(e);for(by=bB.length;by;){bC=bB[--by];bz[bC]=e[bC]}if(!bz.target){bz.target=e.srcElement||av}if(bz.target.nodeType===3){bz.target=bz.target.parentNode}if(bz.metaKey===M){bz.metaKey=bz.ctrlKey}return bA.filter?bA.filter(bz,e):bz},special:{ready:{setup:b.bindReady},focus:{delegateType:"focusin",noBubble:true},blur:{delegateType:"focusout",noBubble:true},beforeunload:{setup:function(bz,by,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(by,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(bz,bB,bA,by){var bC=b.extend(new b.Event(),bA,{type:bz,isSimulated:true,originalEvent:{}});if(by){b.event.trigger(bC,null,bB)}else{b.event.dispatch.call(bB,bC)}if(bC.isDefaultPrevented()){bA.preventDefault()}}};b.event.handle=b.event.dispatch;b.removeEvent=av.removeEventListener?function(by,e,bz){if(by.removeEventListener){by.removeEventListener(e,bz,false)}}:function(by,e,bz){if(by.detachEvent){by.detachEvent("on"+e,bz)}};b.Event=function(by,e){if(!(this instanceof b.Event)){return new b.Event(by,e)}if(by&&by.type){this.originalEvent=by;this.type=by.type;this.isDefaultPrevented=(by.defaultPrevented||by.returnValue===false||by.getPreventDefault&&by.getPreventDefault())?i:bn}else{this.type=by}if(e){b.extend(this,e)}this.timeStamp=by&&by.timeStamp||b.now();this[b.expando]=true};function bn(){return false}function i(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var by=this.originalEvent;if(!by){return}if(by.preventDefault){by.preventDefault()}else{by.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=i;var by=this.originalEvent;if(!by){return}if(by.stopPropagation){by.stopPropagation()}by.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:bn,isPropagationStopped:bn,isImmediatePropagationStopped:bn};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(by,e){b.event.special[by]=b.event.special[e]={delegateType:e,bindType:e,handle:function(bC){var bF=this,bE=bC.relatedTarget,bB=bC.handleObj,bz=bB.selector,bD,bA;if(!bE||bB.origType===bC.type||(bE!==bF&&!b.contains(bF,bE))){bD=bC.type;bC.type=bB.origType;bA=bB.handler.apply(this,arguments);bC.type=bD}return bA}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(){if(b.nodeName(this,"form")){return false}b.event.add(this,"click._submit keypress._submit",function(bA){var bz=bA.target,by=b.nodeName(bz,"input")||b.nodeName(bz,"button")?bz.form:M;if(by&&!by._submit_attached){b.event.add(by,"submit._submit",function(e){if(this.parentNode){b.event.simulate("submit",this.parentNode,e,true)}});by._submit_attached=true}})},teardown:function(){if(b.nodeName(this,"form")){return false}b.event.remove(this,"._submit")}}}if(!b.support.changeBubbles){b.event.special.change={setup:function(){if(bf.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){b.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});b.event.add(this,"click._change",function(e){if(this._just_changed){this._just_changed=false;b.event.simulate("change",this,e,true)}})}return false}b.event.add(this,"beforeactivate._change",function(bz){var by=bz.target;if(bf.test(by.nodeName)&&!by._change_attached){b.event.add(by,"change._change",function(e){if(this.parentNode&&!e.isSimulated){b.event.simulate("change",this.parentNode,e,true)}});by._change_attached=true}})},handle:function(by){var e=by.target;if(this!==e||by.isSimulated||by.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return by.handleObj.handler.apply(this,arguments)}},teardown:function(){b.event.remove(this,"._change");return bf.test(this.nodeName)}}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bA,e){var by=0,bz=function(bB){b.event.simulate(e,bB.target,b.event.fix(bB),true)};b.event.special[e]={setup:function(){if(by++===0){av.addEventListener(bA,bz,true)}},teardown:function(){if(--by===0){av.removeEventListener(bA,bz,true)}}}})}b.fn.extend({on:function(bz,e,bC,bB,by){var bD,bA;if(typeof bz==="object"){if(typeof e!=="string"){bC=e;e=M}for(bA in bz){this.on(bA,e,bC,bz[bA],by)}return this}if(bC==null&&bB==null){bB=e;bC=e=M}else{if(bB==null){if(typeof e==="string"){bB=bC;bC=M}else{bB=bC;bC=e;e=M}}}if(bB===false){bB=bn}else{if(!bB){return this}}if(by===1){bD=bB;bB=function(bE){b().off(bE);return bD.apply(this,arguments)};bB.guid=bD.guid||(bD.guid=b.guid++)}return this.each(function(){b.event.add(this,bz,bB,bC,e)})},one:function(by,e,bA,bz){return this.on.call(this,by,e,bA,bz,1)},off:function(bz,e,bB){if(bz&&bz.preventDefault&&bz.handleObj){var by=bz.handleObj;b(bz.delegateTarget).off(by.namespace?by.type+"."+by.namespace:by.type,by.selector,by.handler);return this}if(typeof bz==="object"){for(var bA in bz){this.off(bA,e,bz[bA])}return this}if(e===false||typeof e==="function"){bB=e;e=M}if(bB===false){bB=bn}return this.each(function(){b.event.remove(this,bz,bB,e)})},bind:function(e,bz,by){return this.on(e,null,bz,by)},unbind:function(e,by){return this.off(e,null,by)},live:function(e,bz,by){b(this.context).on(e,this.selector,bz,by);return this},die:function(e,by){b(this.context).off(e,this.selector||"**",by);return this},delegate:function(e,by,bA,bz){return this.on(by,e,bA,bz)},undelegate:function(e,by,bz){return arguments.length==1?this.off(e,"**"):this.off(by,e,bz)},trigger:function(e,by){return this.each(function(){b.event.trigger(e,by,this)})},triggerHandler:function(e,by){if(this[0]){return b.event.trigger(e,by,this[0],true)}},toggle:function(bA){var by=arguments,e=bA.guid||b.guid++,bz=0,bB=function(bC){var bD=(b._data(this,"lastToggle"+bA.guid)||0)%bz;b._data(this,"lastToggle"+bA.guid,bD+1);bC.preventDefault();return by[bD].apply(this,arguments)||false};bB.guid=e;while(bz<by.length){by[bz++].guid=e}return this.click(bB)},hover:function(e,by){return this.mouseenter(e).mouseleave(by||e)}});b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(by,e){b.fn[e]=function(bA,bz){if(bz==null){bz=bA;bA=null}return arguments.length>0?this.bind(e,bA,bz):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}if(aP.test(e)){b.event.fixHooks[e]=b.event.keyHooks}if(bh.test(e)){b.event.fixHooks[e]=b.event.mouseHooks}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bK=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bF="sizcache"+(Math.random()+"").replace(".",""),bL=0,bO=Object.prototype.toString,bE=false,bD=true,bN=/\\/g,bR=/\r\n/g,bT=/\W/;[0,0].sort(function(){bD=false;return 0});var bB=function(bY,e,b1,b2){b1=b1||[];e=e||av;var b4=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bY||typeof bY!=="string"){return b1}var bV,b6,b9,bU,b5,b8,b7,b0,bX=true,bW=bB.isXML(e),bZ=[],b3=bY;do{bK.exec("");bV=bK.exec(b3);if(bV){b3=bV[3];bZ.push(bV[1]);if(bV[2]){bU=bV[3];break}}}while(bV);if(bZ.length>1&&bG.exec(bY)){if(bZ.length===2&&bH.relative[bZ[0]]){b6=bP(bZ[0]+bZ[1],e,b2)}else{b6=bH.relative[bZ[0]]?[e]:bB(bZ.shift(),e);while(bZ.length){bY=bZ.shift();if(bH.relative[bY]){bY+=bZ.shift()}b6=bP(bY,b6,b2)}}}else{if(!b2&&bZ.length>1&&e.nodeType===9&&!bW&&bH.match.ID.test(bZ[0])&&!bH.match.ID.test(bZ[bZ.length-1])){b5=bB.find(bZ.shift(),e,bW);e=b5.expr?bB.filter(b5.expr,b5.set)[0]:b5.set[0]}if(e){b5=b2?{expr:bZ.pop(),set:bI(b2)}:bB.find(bZ.pop(),bZ.length===1&&(bZ[0]==="~"||bZ[0]==="+")&&e.parentNode?e.parentNode:e,bW);b6=b5.expr?bB.filter(b5.expr,b5.set):b5.set;if(bZ.length>0){b9=bI(b6)}else{bX=false}while(bZ.length){b8=bZ.pop();b7=b8;if(!bH.relative[b8]){b8=""}else{b7=bZ.pop()}if(b7==null){b7=e}bH.relative[b8](b9,b7,bW)}}else{b9=bZ=[]}}if(!b9){b9=b6}if(!b9){bB.error(b8||bY)}if(bO.call(b9)==="[object Array]"){if(!bX){b1.push.apply(b1,b9)}else{if(e&&e.nodeType===1){for(b0=0;b9[b0]!=null;b0++){if(b9[b0]&&(b9[b0]===true||b9[b0].nodeType===1&&bB.contains(e,b9[b0]))){b1.push(b6[b0])}}}else{for(b0=0;b9[b0]!=null;b0++){if(b9[b0]&&b9[b0].nodeType===1){b1.push(b6[b0])}}}}}else{bI(b9,b1)}if(bU){bB(bU,b4,b1,b2);bB.uniqueSort(b1)}return b1};bB.uniqueSort=function(bU){if(bM){bE=bD;bU.sort(bM);if(bE){for(var e=1;e<bU.length;e++){if(bU[e]===bU[e-1]){bU.splice(e--,1)}}}}return bU};bB.matches=function(e,bU){return bB(e,null,null,bU)};bB.matchesSelector=function(e,bU){return bB(bU,null,null,[e]).length>0};bB.find=function(b0,e,b1){var bZ,bV,bX,bW,bY,bU;if(!b0){return[]}for(bV=0,bX=bH.order.length;bV<bX;bV++){bY=bH.order[bV];if((bW=bH.leftMatch[bY].exec(b0))){bU=bW[1];bW.splice(1,1);if(bU.substr(bU.length-1)!=="\\"){bW[1]=(bW[1]||"").replace(bN,"");bZ=bH.find[bY](bW,e,b1);if(bZ!=null){b0=b0.replace(bH.match[bY],"");break}}}}if(!bZ){bZ=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bZ,expr:b0}};bB.filter=function(b4,b3,b7,bX){var bZ,e,b2,b9,b6,bU,bW,bY,b5,bV=b4,b8=[],b1=b3,b0=b3&&b3[0]&&bB.isXML(b3[0]);while(b4&&b3.length){for(b2 in bH.filter){if((bZ=bH.leftMatch[b2].exec(b4))!=null&&bZ[2]){bU=bH.filter[b2];bW=bZ[1];e=false;bZ.splice(1,1);if(bW.substr(bW.length-1)==="\\"){continue}if(b1===b8){b8=[]}if(bH.preFilter[b2]){bZ=bH.preFilter[b2](bZ,b1,b7,b8,bX,b0);if(!bZ){e=b9=true}else{if(bZ===true){continue}}}if(bZ){for(bY=0;(b6=b1[bY])!=null;bY++){if(b6){b9=bU(b6,bZ,bY,b1);b5=bX^b9;if(b7&&b9!=null){if(b5){e=true}else{b1[bY]=false}}else{if(b5){b8.push(b6);e=true}}}}}if(b9!==M){if(!b7){b1=b8}b4=b4.replace(bH.match[b2],"");if(!e){return[]}break}}}if(b4===bV){if(e==null){bB.error(b4)}else{break}}bV=b4}return b1};bB.error=function(e){throw"Syntax error, unrecognized expression: "+e};var bz=bB.getText=function(bX){var bV,bW,e=bX.nodeType,bU="";if(e){if(e===1){if(typeof bX.textContent==="string"){return bX.textContent}else{if(typeof bX.innerText==="string"){return bX.innerText.replace(bR,"")}else{for(bX=bX.firstChild;bX;bX=bX.nextSibling){bU+=bz(bX)}}}}else{if(e===3||e===4){return bX.nodeValue}}}else{for(bV=0;(bW=bX[bV]);bV++){if(bW.nodeType!==8){bU+=bz(bW)}}}return bU};var bH=bB.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bZ,bU){var bW=typeof bU==="string",bY=bW&&!bT.test(bU),b0=bW&&!bY;if(bY){bU=bU.toLowerCase()}for(var bV=0,e=bZ.length,bX;bV<e;bV++){if((bX=bZ[bV])){while((bX=bX.previousSibling)&&bX.nodeType!==1){}bZ[bV]=b0||bX&&bX.nodeName.toLowerCase()===bU?bX||false:bX===bU}}if(b0){bB.filter(bU,bZ,true)}},">":function(bZ,bU){var bY,bX=typeof bU==="string",bV=0,e=bZ.length;if(bX&&!bT.test(bU)){bU=bU.toLowerCase();for(;bV<e;bV++){bY=bZ[bV];if(bY){var bW=bY.parentNode;bZ[bV]=bW.nodeName.toLowerCase()===bU?bW:false}}}else{for(;bV<e;bV++){bY=bZ[bV];if(bY){bZ[bV]=bX?bY.parentNode:bY.parentNode===bU}}if(bX){bB.filter(bU,bZ,true)}}},"":function(bW,bU,bY){var bX,bV=bL++,e=bQ;if(typeof bU==="string"&&!bT.test(bU)){bU=bU.toLowerCase();bX=bU;e=by}e("parentNode",bU,bV,bW,bX,bY)},"~":function(bW,bU,bY){var bX,bV=bL++,e=bQ;if(typeof bU==="string"&&!bT.test(bU)){bU=bU.toLowerCase();bX=bU;e=by}e("previousSibling",bU,bV,bW,bX,bY)}},find:{ID:function(bU,bV,bW){if(typeof bV.getElementById!=="undefined"&&!bW){var e=bV.getElementById(bU[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bV,bY){if(typeof bY.getElementsByName!=="undefined"){var bU=[],bX=bY.getElementsByName(bV[1]);for(var bW=0,e=bX.length;bW<e;bW++){if(bX[bW].getAttribute("name")===bV[1]){bU.push(bX[bW])}}return bU.length===0?null:bU}},TAG:function(e,bU){if(typeof bU.getElementsByTagName!=="undefined"){return bU.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bW,bU,bV,e,bZ,b0){bW=" "+bW[1].replace(bN,"")+" ";if(b0){return bW}for(var bX=0,bY;(bY=bU[bX])!=null;bX++){if(bY){if(bZ^(bY.className&&(" "+bY.className+" ").replace(/[\t\n\r]/g," ").indexOf(bW)>=0)){if(!bV){e.push(bY)}}else{if(bV){bU[bX]=false}}}}return false},ID:function(e){return e[1].replace(bN,"")},TAG:function(bU,e){return bU[1].replace(bN,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bB.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bU=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bU[1]+(bU[2]||1))-0;e[3]=bU[3]-0}else{if(e[2]){bB.error(e[0])}}e[0]=bL++;return e},ATTR:function(bX,bU,bV,e,bY,bZ){var bW=bX[1]=bX[1].replace(bN,"");if(!bZ&&bH.attrMap[bW]){bX[1]=bH.attrMap[bW]}bX[4]=(bX[4]||bX[5]||"").replace(bN,"");if(bX[2]==="~="){bX[4]=" "+bX[4]+" "}return bX},PSEUDO:function(bX,bU,bV,e,bY){if(bX[1]==="not"){if((bK.exec(bX[3])||"").length>1||/^\w/.test(bX[3])){bX[3]=bB(bX[3],null,null,bU)}else{var bW=bB.filter(bX[3],bU,bV,true^bY);if(!bV){e.push.apply(e,bW)}return false}}else{if(bH.match.POS.test(bX[0])||bH.match.CHILD.test(bX[0])){return true}}return bX},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bV,bU,e){return !!bB(e[3],bV).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bV){var e=bV.getAttribute("type"),bU=bV.type;return bV.nodeName.toLowerCase()==="input"&&"text"===bU&&(e===bU||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bU){var e=bU.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bU.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bU){var e=bU.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bU.type},button:function(bU){var e=bU.nodeName.toLowerCase();return e==="input"&&"button"===bU.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bU,e){return e===0},last:function(bV,bU,e,bW){return bU===bW.length-1},even:function(bU,e){return e%2===0},odd:function(bU,e){return e%2===1},lt:function(bV,bU,e){return bU<e[3]-0},gt:function(bV,bU,e){return bU>e[3]-0},nth:function(bV,bU,e){return e[3]-0===bU},eq:function(bV,bU,e){return e[3]-0===bU}},filter:{PSEUDO:function(bV,b0,bZ,b1){var e=b0[1],bU=bH.filters[e];if(bU){return bU(bV,bZ,b0,b1)}else{if(e==="contains"){return(bV.textContent||bV.innerText||bz([bV])||"").indexOf(b0[3])>=0}else{if(e==="not"){var bW=b0[3];for(var bY=0,bX=bW.length;bY<bX;bY++){if(bW[bY]===bV){return false}}return true}else{bB.error(e)}}}},CHILD:function(bV,bX){var bW,b3,bZ,b2,e,bY,b1,b0=bX[1],bU=bV;switch(b0){case"only":case"first":while((bU=bU.previousSibling)){if(bU.nodeType===1){return false}}if(b0==="first"){return true}bU=bV;case"last":while((bU=bU.nextSibling)){if(bU.nodeType===1){return false}}return true;case"nth":bW=bX[2];b3=bX[3];if(bW===1&&b3===0){return true}bZ=bX[0];b2=bV.parentNode;if(b2&&(b2[bF]!==bZ||!bV.nodeIndex)){bY=0;for(bU=b2.firstChild;bU;bU=bU.nextSibling){if(bU.nodeType===1){bU.nodeIndex=++bY}}b2[bF]=bZ}b1=bV.nodeIndex-b3;if(bW===0){return b1===0}else{return(b1%bW===0&&b1/bW>=0)}}},ID:function(bU,e){return bU.nodeType===1&&bU.getAttribute("id")===e},TAG:function(bU,e){return(e==="*"&&bU.nodeType===1)||!!bU.nodeName&&bU.nodeName.toLowerCase()===e},CLASS:function(bU,e){return(" "+(bU.className||bU.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bY,bW){var bV=bW[1],e=bB.attr?bB.attr(bY,bV):bH.attrHandle[bV]?bH.attrHandle[bV](bY):bY[bV]!=null?bY[bV]:bY.getAttribute(bV),bZ=e+"",bX=bW[2],bU=bW[4];return e==null?bX==="!=":!bX&&bB.attr?e!=null:bX==="="?bZ===bU:bX==="*="?bZ.indexOf(bU)>=0:bX==="~="?(" "+bZ+" ").indexOf(bU)>=0:!bU?bZ&&e!==false:bX==="!="?bZ!==bU:bX==="^="?bZ.indexOf(bU)===0:bX==="$="?bZ.substr(bZ.length-bU.length)===bU:bX==="|="?bZ===bU||bZ.substr(0,bU.length+1)===bU+"-":false},POS:function(bX,bU,bV,bY){var e=bU[2],bW=bH.setFilters[e];if(bW){return bW(bX,bV,bU,bY)}}}};var bG=bH.match.POS,bA=function(bU,e){return"\\"+(e-0+1)};for(var bC in bH.match){bH.match[bC]=new RegExp(bH.match[bC].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bH.leftMatch[bC]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bH.match[bC].source.replace(/\\(\d+)/g,bA))}var bI=function(bU,e){bU=Array.prototype.slice.call(bU,0);if(e){e.push.apply(e,bU);return e}return bU};try{Array.prototype.slice.call(av.documentElement.childNodes,0)[0].nodeType}catch(bS){bI=function(bX,bW){var bV=0,bU=bW||[];if(bO.call(bX)==="[object Array]"){Array.prototype.push.apply(bU,bX)}else{if(typeof bX.length==="number"){for(var e=bX.length;bV<e;bV++){bU.push(bX[bV])}}else{for(;bX[bV];bV++){bU.push(bX[bV])}}}return bU}}var bM,bJ;if(av.documentElement.compareDocumentPosition){bM=function(bU,e){if(bU===e){bE=true;return 0}if(!bU.compareDocumentPosition||!e.compareDocumentPosition){return bU.compareDocumentPosition?-1:1}return bU.compareDocumentPosition(e)&4?-1:1}}else{bM=function(b1,b0){if(b1===b0){bE=true;return 0}else{if(b1.sourceIndex&&b0.sourceIndex){return b1.sourceIndex-b0.sourceIndex}}var bY,bU,bV=[],e=[],bX=b1.parentNode,bZ=b0.parentNode,b2=bX;if(bX===bZ){return bJ(b1,b0)}else{if(!bX){return -1}else{if(!bZ){return 1}}}while(b2){bV.unshift(b2);b2=b2.parentNode}b2=bZ;while(b2){e.unshift(b2);b2=b2.parentNode}bY=bV.length;bU=e.length;for(var bW=0;bW<bY&&bW<bU;bW++){if(bV[bW]!==e[bW]){return bJ(bV[bW],e[bW])}}return bW===bY?bJ(b1,e[bW],-1):bJ(bV[bW],b0,1)};bJ=function(bU,e,bV){if(bU===e){return bV}var bW=bU.nextSibling;while(bW){if(bW===e){return -1}bW=bW.nextSibling}return 1}}(function(){var bU=av.createElement("div"),bV="script"+(new Date()).getTime(),e=av.documentElement;bU.innerHTML="<a name='"+bV+"'/>";e.insertBefore(bU,e.firstChild);if(av.getElementById(bV)){bH.find.ID=function(bX,bY,bZ){if(typeof bY.getElementById!=="undefined"&&!bZ){var bW=bY.getElementById(bX[1]);return bW?bW.id===bX[1]||typeof bW.getAttributeNode!=="undefined"&&bW.getAttributeNode("id").nodeValue===bX[1]?[bW]:M:[]}};bH.filter.ID=function(bY,bW){var bX=typeof bY.getAttributeNode!=="undefined"&&bY.getAttributeNode("id");return bY.nodeType===1&&bX&&bX.nodeValue===bW}}e.removeChild(bU);e=bU=null})();(function(){var e=av.createElement("div");e.appendChild(av.createComment(""));if(e.getElementsByTagName("*").length>0){bH.find.TAG=function(bU,bY){var bX=bY.getElementsByTagName(bU[1]);if(bU[1]==="*"){var bW=[];for(var bV=0;bX[bV];bV++){if(bX[bV].nodeType===1){bW.push(bX[bV])}}bX=bW}return bX}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bH.attrHandle.href=function(bU){return bU.getAttribute("href",2)}}e=null})();if(av.querySelectorAll){(function(){var e=bB,bW=av.createElement("div"),bV="__sizzle__";bW.innerHTML="<p class='TEST'></p>";if(bW.querySelectorAll&&bW.querySelectorAll(".TEST").length===0){return}bB=function(b7,bY,b2,b6){bY=bY||av;if(!b6&&!bB.isXML(bY)){var b5=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b7);if(b5&&(bY.nodeType===1||bY.nodeType===9)){if(b5[1]){return bI(bY.getElementsByTagName(b7),b2)}else{if(b5[2]&&bH.find.CLASS&&bY.getElementsByClassName){return bI(bY.getElementsByClassName(b5[2]),b2)}}}if(bY.nodeType===9){if(b7==="body"&&bY.body){return bI([bY.body],b2)}else{if(b5&&b5[3]){var b1=bY.getElementById(b5[3]);if(b1&&b1.parentNode){if(b1.id===b5[3]){return bI([b1],b2)}}else{return bI([],b2)}}}try{return bI(bY.querySelectorAll(b7),b2)}catch(b3){}}else{if(bY.nodeType===1&&bY.nodeName.toLowerCase()!=="object"){var bZ=bY,b0=bY.getAttribute("id"),bX=b0||bV,b9=bY.parentNode,b8=/^\s*[+~]/.test(b7);if(!b0){bY.setAttribute("id",bX)}else{bX=bX.replace(/'/g,"\\$&")}if(b8&&b9){bY=bY.parentNode}try{if(!b8||b9){return bI(bY.querySelectorAll("[id='"+bX+"'] "+b7),b2)}}catch(b4){}finally{if(!b0){bZ.removeAttribute("id")}}}}}return e(b7,bY,b2,b6)};for(var bU in e){bB[bU]=e[bU]}bW=null})()}(function(){var e=av.documentElement,bV=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bV){var bX=!bV.call(av.createElement("div"),"div"),bU=false;try{bV.call(av.documentElement,"[test!='']:sizzle")}catch(bW){bU=true}bB.matchesSelector=function(bZ,b1){b1=b1.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bB.isXML(bZ)){try{if(bU||!bH.match.PSEUDO.test(b1)&&!/!=/.test(b1)){var bY=bV.call(bZ,b1);if(bY||!bX||bZ.document&&bZ.document.nodeType!==11){return bY}}}catch(b0){}}return bB(b1,null,null,[bZ]).length>0}}})();(function(){var e=av.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bH.order.splice(1,0,"CLASS");bH.find.CLASS=function(bU,bV,bW){if(typeof bV.getElementsByClassName!=="undefined"&&!bW){return bV.getElementsByClassName(bU[1])}};e=null})();function by(bU,bZ,bY,b2,b0,b1){for(var bW=0,bV=b2.length;bW<bV;bW++){var e=b2[bW];if(e){var bX=false;e=e[bU];while(e){if(e[bF]===bY){bX=b2[e.sizset];break}if(e.nodeType===1&&!b1){e[bF]=bY;e.sizset=bW}if(e.nodeName.toLowerCase()===bZ){bX=e;break}e=e[bU]}b2[bW]=bX}}}function bQ(bU,bZ,bY,b2,b0,b1){for(var bW=0,bV=b2.length;bW<bV;bW++){var e=b2[bW];if(e){var bX=false;e=e[bU];while(e){if(e[bF]===bY){bX=b2[e.sizset];break}if(e.nodeType===1){if(!b1){e[bF]=bY;e.sizset=bW}if(typeof bZ!=="string"){if(e===bZ){bX=true;break}}else{if(bB.filter(bZ,[e]).length>0){bX=e;break}}}e=e[bU]}b2[bW]=bX}}}if(av.documentElement.contains){bB.contains=function(bU,e){return bU!==e&&(bU.contains?bU.contains(e):true)}}else{if(av.documentElement.compareDocumentPosition){bB.contains=function(bU,e){return !!(bU.compareDocumentPosition(e)&16)}}else{bB.contains=function(){return false}}}bB.isXML=function(e){var bU=(e?e.ownerDocument||e:0).documentElement;return bU?bU.nodeName!=="HTML":false};var bP=function(bV,e,bZ){var bY,b0=[],bX="",b1=e.nodeType?[e]:e;while((bY=bH.match.PSEUDO.exec(bV))){bX+=bY[0];bV=bV.replace(bH.match.PSEUDO,"")}bV=bH.relative[bV]?bV+"*":bV;for(var bW=0,bU=b1.length;bW<bU;bW++){bB(bV,b1[bW],b0,bZ)}return bB.filter(bX,b0)};bB.attr=b.attr;bB.selectors.attrMap={};b.find=bB;b.expr=bB.selectors;b.expr[":"]=b.expr.filters;b.unique=bB.uniqueSort;b.text=bB.getText;b.isXMLDoc=bB.isXML;b.contains=bB.contains})();var ac=/Until$/,aq=/^(?:parents|prevUntil|prevAll)/,bb=/,/,bs=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,I=b.expr.match.POS,ay={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bz=this,bB,by;if(typeof e!=="string"){return b(e).filter(function(){for(bB=0,by=bz.length;bB<by;bB++){if(b.contains(bz[bB],this)){return true}}})}var bA=this.pushStack("","find",e),bD,bE,bC;for(bB=0,by=this.length;bB<by;bB++){bD=bA.length;b.find(e,this[bB],bA);if(bB>0){for(bE=bD;bE<bA.length;bE++){for(bC=0;bC<bD;bC++){if(bA[bC]===bA[bE]){bA.splice(bE--,1);break}}}}}return bA},has:function(by){var e=b(by);return this.filter(function(){for(var bA=0,bz=e.length;bA<bz;bA++){if(b.contains(this,e[bA])){return true}}})},not:function(e){return this.pushStack(aG(this,e,false),"not",e)},filter:function(e){return this.pushStack(aG(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?I.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bB,bA){var by=[],bz,e,bC=this[0];if(b.isArray(bB)){var bE=1;while(bC&&bC.ownerDocument&&bC!==bA){for(bz=0;bz<bB.length;bz++){if(b(bC).is(bB[bz])){by.push({selector:bB[bz],elem:bC,level:bE})}}bC=bC.parentNode;bE++}return by}var bD=I.test(bB)||typeof bB!=="string"?b(bB,bA||this.context):0;for(bz=0,e=this.length;bz<e;bz++){bC=this[bz];while(bC){if(bD?bD.index(bC)>-1:b.find.matchesSelector(bC,bB)){by.push(bC);break}else{bC=bC.parentNode;if(!bC||!bC.ownerDocument||bC===bA||bC.nodeType===11){break}}}}by=by.length>1?b.unique(by):by;return this.pushStack(by,"closest",bB)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return b.inArray(this[0],b(e))}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,by){var bA=typeof e==="string"?b(e,by):b.makeArray(e&&e.nodeType?[e]:e),bz=b.merge(this.get(),bA);return this.pushStack(D(bA[0])||D(bz[0])?bz:b.unique(bz))},andSelf:function(){return this.add(this.prevObject)}});function D(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(by){var e=by.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(by,e,bz){return b.dir(by,"parentNode",bz)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(by,e,bz){return b.dir(by,"nextSibling",bz)},prevUntil:function(by,e,bz){return b.dir(by,"previousSibling",bz)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,by){b.fn[e]=function(bC,bz){var bB=b.map(this,by,bC),bA=R.call(arguments);if(!ac.test(e)){bz=bC}if(bz&&typeof bz==="string"){bB=b.filter(bz,bB)}bB=this.length>1&&!ay[e]?b.unique(bB):bB;if((this.length>1||bb.test(bz))&&aq.test(e)){bB=bB.reverse()}return this.pushStack(bB,e,bA.join(","))}});b.extend({filter:function(bz,e,by){if(by){bz=":not("+bz+")"}return e.length===1?b.find.matchesSelector(e[0],bz)?[e[0]]:[]:b.find.matches(bz,e)},dir:function(bz,by,bB){var e=[],bA=bz[by];while(bA&&bA.nodeType!==9&&(bB===M||bA.nodeType!==1||!b(bA).is(bB))){if(bA.nodeType===1){e.push(bA)}bA=bA[by]}return e},nth:function(bB,e,bz,bA){e=e||1;var by=0;for(;bB;bB=bB[bz]){if(bB.nodeType===1&&++by===e){break}}return bB},sibling:function(bz,by){var e=[];for(;bz;bz=bz.nextSibling){if(bz.nodeType===1&&bz!==by){e.push(bz)}}return e}});function aG(bA,bz,e){bz=bz||0;if(b.isFunction(bz)){return b.grep(bA,function(bC,bB){var bD=!!bz.call(bC,bB,bC);return bD===e})}else{if(bz.nodeType){return b.grep(bA,function(bC,bB){return(bC===bz)===e})}else{if(typeof bz==="string"){var by=b.grep(bA,function(bB){return bB.nodeType===1});if(bs.test(bz)){return b.filter(bz,by,!e)}else{bz=b.filter(bz,by)}}}}return b.grep(bA,function(bC,bB){return(b.inArray(bC,bz)>=0)===e})}function a(e){var bz=aS.split(" "),by=e.createDocumentFragment();if(by.createElement){while(bz.length){by.createElement(bz.pop())}}return by}var aS="abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",ah=/ jQuery\d+="(?:\d+|null)"/g,ar=/^\s+/,T=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,w=/<tbody/i,X=/<|&#?\w+;/,af=/<(?:script|style)/i,Q=/<(?:script|object|embed|option|style)/i,ai=new RegExp("<(?:"+aS.replace(" ","|")+")","i"),o=/checked\s*(?:[^=]|=\s*.checked.)/i,bp=/\/(java|ecma)script/i,aO=/^\s*<!(?:\[CDATA\[|\-\-)/,ax={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ad=a(av);ax.optgroup=ax.option;ax.tbody=ax.tfoot=ax.colgroup=ax.caption=ax.thead;ax.th=ax.td;if(!b.support.htmlSerialize){ax._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bz){var by=b(this);by.text(e.call(this,bz,by.text()))})}if(typeof e!=="object"&&e!==M){return this.empty().append((this[0]&&this[0].ownerDocument||av).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bz){b(this).wrapAll(e.call(this,bz))})}if(this[0]){var by=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){by.insertBefore(this[0])}by.map(function(){var bz=this;while(bz.firstChild&&bz.firstChild.nodeType===1){bz=bz.firstChild}return bz}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(by){b(this).wrapInner(e.call(this,by))})}return this.each(function(){var by=b(this),bz=by.contents();if(bz.length){bz.wrapAll(e)}else{by.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(by){this.parentNode.insertBefore(by,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(by){this.parentNode.insertBefore(by,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bA){for(var by=0,bz;(bz=this[by])!=null;by++){if(!e||b.filter(e,[bz]).length){if(!bA&&bz.nodeType===1){b.cleanData(bz.getElementsByTagName("*"));b.cleanData([bz])}if(bz.parentNode){bz.parentNode.removeChild(bz)}}}return this},empty:function(){for(var e=0,by;(by=this[e])!=null;e++){if(by.nodeType===1){b.cleanData(by.getElementsByTagName("*"))}while(by.firstChild){by.removeChild(by.firstChild)}}return this},clone:function(by,e){by=by==null?false:by;e=e==null?by:e;return this.map(function(){return b.clone(this,by,e)})},html:function(bA){if(bA===M){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ah,""):null}else{if(typeof bA==="string"&&!af.test(bA)&&(b.support.leadingWhitespace||!ar.test(bA))&&!ax[(d.exec(bA)||["",""])[1].toLowerCase()]){bA=bA.replace(T,"<$1></$2>");try{for(var bz=0,by=this.length;bz<by;bz++){if(this[bz].nodeType===1){b.cleanData(this[bz].getElementsByTagName("*"));this[bz].innerHTML=bA}}}catch(bB){this.empty().append(bA)}}else{if(b.isFunction(bA)){this.each(function(bC){var e=b(this);e.html(bA.call(this,bC,e.html()))})}else{this.empty().append(bA)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bA){var bz=b(this),by=bz.html();bz.replaceWith(e.call(this,bA,by))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bz=this.nextSibling,by=this.parentNode;b(this).remove();if(bz){b(bz).before(e)}else{b(by).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bE,bI,bH){var bA,bB,bD,bG,bF=bE[0],by=[];if(!b.support.checkClone&&arguments.length===3&&typeof bF==="string"&&o.test(bF)){return this.each(function(){b(this).domManip(bE,bI,bH,true)})}if(b.isFunction(bF)){return this.each(function(bK){var bJ=b(this);bE[0]=bF.call(this,bK,bI?bJ.html():M);bJ.domManip(bE,bI,bH)})}if(this[0]){bG=bF&&bF.parentNode;if(b.support.parentNode&&bG&&bG.nodeType===11&&bG.childNodes.length===this.length){bA={fragment:bG}}else{bA=b.buildFragment(bE,this,by)}bD=bA.fragment;if(bD.childNodes.length===1){bB=bD=bD.firstChild}else{bB=bD.firstChild}if(bB){bI=bI&&b.nodeName(bB,"tr");for(var bz=0,e=this.length,bC=e-1;bz<e;bz++){bH.call(bI?bc(this[bz],bB):this[bz],bA.cacheable||(e>1&&bz<bC)?b.clone(bD,true,true):bD)}}if(by.length){b.each(by,br)}}return this}});function bc(e,by){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function t(bE,by){if(by.nodeType!==1||!b.hasData(bE)){return}var bB,bA,e,bD=b._data(bE),bC=b._data(by,bD),bz=bD.events;if(bz){delete bC.handle;bC.events={};for(bB in bz){for(bA=0,e=bz[bB].length;bA<e;bA++){b.event.add(by,bB+(bz[bB][bA].namespace?".":"")+bz[bB][bA].namespace,bz[bB][bA],bz[bB][bA].data)}}}if(bC.data){bC.data=b.extend({},bC.data)}}function aj(by,e){var bz;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(by)}bz=e.nodeName.toLowerCase();if(bz==="object"){e.outerHTML=by.outerHTML}else{if(bz==="input"&&(by.type==="checkbox"||by.type==="radio")){if(by.checked){e.defaultChecked=e.checked=by.checked}if(e.value!==by.value){e.value=by.value}}else{if(bz==="option"){e.selected=by.defaultSelected}else{if(bz==="input"||bz==="textarea"){e.defaultValue=by.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bC,bA,by){var bB,e,bz,bD,bE=bC[0];if(bA&&bA[0]){bD=bA[0].ownerDocument||bA[0]}if(!bD.createDocumentFragment){bD=av}if(bC.length===1&&typeof bE==="string"&&bE.length<512&&bD===av&&bE.charAt(0)==="<"&&!Q.test(bE)&&(b.support.checkClone||!o.test(bE))&&(!b.support.unknownElems&&ai.test(bE))){e=true;bz=b.fragments[bE];if(bz&&bz!==1){bB=bz}}if(!bB){bB=bD.createDocumentFragment();b.clean(bC,bD,bB,by)}if(e){b.fragments[bE]=bz?bB:1}return{fragment:bB,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,by){b.fn[e]=function(bz){var bC=[],bF=b(bz),bE=this.length===1&&this[0].parentNode;if(bE&&bE.nodeType===11&&bE.childNodes.length===1&&bF.length===1){bF[by](this[0]);return this}else{for(var bD=0,bA=bF.length;bD<bA;bD++){var bB=(bD>0?this.clone(true):this).get();b(bF[bD])[by](bB);bC=bC.concat(bB)}return this.pushStack(bC,e,bF.selector)}}});function bi(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function az(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function F(e){var by=(e.nodeName||"").toLowerCase();if(by==="input"){az(e)}else{if(by!=="script"&&typeof e.getElementsByTagName!=="undefined"){b.grep(e.getElementsByTagName("input"),az)}}}b.extend({clone:function(bB,bD,bz){var bC=bB.cloneNode(true),e,by,bA;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bB.nodeType===1||bB.nodeType===11)&&!b.isXMLDoc(bB)){aj(bB,bC);e=bi(bB);by=bi(bC);for(bA=0;e[bA];++bA){if(by[bA]){aj(e[bA],by[bA])}}}if(bD){t(bB,bC);if(bz){e=bi(bB);by=bi(bC);for(bA=0;e[bA];++bA){t(e[bA],by[bA])}}}e=by=null;return bC},clean:function(bz,bB,bK,bD){var bI;bB=bB||av;if(typeof bB.createElement==="undefined"){bB=bB.ownerDocument||bB[0]&&bB[0].ownerDocument||av}var bL=[],bE;for(var bH=0,bC;(bC=bz[bH])!=null;bH++){if(typeof bC==="number"){bC+=""}if(!bC){continue}if(typeof bC==="string"){if(!X.test(bC)){bC=bB.createTextNode(bC)}else{bC=bC.replace(T,"<$1></$2>");var bN=(d.exec(bC)||["",""])[1].toLowerCase(),bA=ax[bN]||ax._default,bG=bA[0],by=bB.createElement("div");if(bB===av){ad.appendChild(by)}else{a(bB).appendChild(by)}by.innerHTML=bA[1]+bC+bA[2];while(bG--){by=by.lastChild}if(!b.support.tbody){var e=w.test(bC),bF=bN==="table"&&!e?by.firstChild&&by.firstChild.childNodes:bA[1]==="<table>"&&!e?by.childNodes:[];for(bE=bF.length-1;bE>=0;--bE){if(b.nodeName(bF[bE],"tbody")&&!bF[bE].childNodes.length){bF[bE].parentNode.removeChild(bF[bE])}}}if(!b.support.leadingWhitespace&&ar.test(bC)){by.insertBefore(bB.createTextNode(ar.exec(bC)[0]),by.firstChild)}bC=by.childNodes}}var bJ;if(!b.support.appendChecked){if(bC[0]&&typeof(bJ=bC.length)==="number"){for(bE=0;bE<bJ;bE++){F(bC[bE])}}else{F(bC)}}if(bC.nodeType){bL.push(bC)}else{bL=b.merge(bL,bC)}}if(bK){bI=function(bO){return !bO.type||bp.test(bO.type)};for(bH=0;bL[bH];bH++){if(bD&&b.nodeName(bL[bH],"script")&&(!bL[bH].type||bL[bH].type.toLowerCase()==="text/javascript")){bD.push(bL[bH].parentNode?bL[bH].parentNode.removeChild(bL[bH]):bL[bH])}else{if(bL[bH].nodeType===1){var bM=b.grep(bL[bH].getElementsByTagName("script"),bI);bL.splice.apply(bL,[bH+1,0].concat(bM))}bK.appendChild(bL[bH])}}}return bL},cleanData:function(by){var bB,bz,e=b.cache,bE=b.event.special,bD=b.support.deleteExpando;for(var bC=0,bA;(bA=by[bC])!=null;bC++){if(bA.nodeName&&b.noData[bA.nodeName.toLowerCase()]){continue}bz=bA[b.expando];if(bz){bB=e[bz];if(bB&&bB.events){for(var bF in bB.events){if(bE[bF]){b.event.remove(bA,bF)}else{b.removeEvent(bA,bF,bB.handle)}}if(bB.handle){bB.handle.elem=null}}if(bD){delete bA[b.expando]}else{if(bA.removeAttribute){bA.removeAttribute(b.expando)}}delete e[bz]}}}});function br(e,by){if(by.src){b.ajax({url:by.src,async:false,dataType:"script"})}else{b.globalEval((by.text||by.textContent||by.innerHTML||"").replace(aO,"/*$0*/"))}if(by.parentNode){by.parentNode.removeChild(by)}}var al=/alpha\([^)]*\)/i,au=/opacity=([^)]*)/,A=/([A-Z]|^ms)/g,be=/^-?\d+(?:px)?$/i,bq=/^-?\d/,J=/^([\-+])=([\-+.\de]+)/,a9={position:"absolute",visibility:"hidden",display:"block"},an=["Left","Right"],a3=["Top","Bottom"],aa,aJ,aY;b.fn.css=function(e,by){if(arguments.length===2&&by===M){return this}return b.access(this,e,by,true,function(bA,bz,bB){return bB!==M?b.style(bA,bz,bB):b.css(bA,bz)})};b.extend({cssHooks:{opacity:{get:function(bz,by){if(by){var e=aa(bz,"opacity","opacity");return e===""?"1":e}else{return bz.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bA,bz,bG,bB){if(!bA||bA.nodeType===3||bA.nodeType===8||!bA.style){return}var bE,bF,bC=b.camelCase(bz),by=bA.style,bH=b.cssHooks[bC];bz=b.cssProps[bC]||bC;if(bG!==M){bF=typeof bG;if(bF==="string"&&(bE=J.exec(bG))){bG=(+(bE[1]+1)*+bE[2])+parseFloat(b.css(bA,bz));bF="number"}if(bG==null||bF==="number"&&isNaN(bG)){return}if(bF==="number"&&!b.cssNumber[bC]){bG+="px"}if(!bH||!("set" in bH)||(bG=bH.set(bA,bG))!==M){try{by[bz]=bG}catch(bD){}}}else{if(bH&&"get" in bH&&(bE=bH.get(bA,false,bB))!==M){return bE}return by[bz]}},css:function(bB,bA,by){var bz,e;bA=b.camelCase(bA);e=b.cssHooks[bA];bA=b.cssProps[bA]||bA;if(bA==="cssFloat"){bA="float"}if(e&&"get" in e&&(bz=e.get(bB,true,by))!==M){return bz}else{if(aa){return aa(bB,bA)}}},swap:function(bA,bz,bB){var e={};for(var by in bz){e[by]=bA.style[by];bA.style[by]=bz[by]}bB.call(bA);for(by in bz){bA.style[by]=e[by]}}});b.curCSS=b.css;b.each(["height","width"],function(by,e){b.cssHooks[e]={get:function(bB,bA,bz){var bC;if(bA){if(bB.offsetWidth!==0){return p(bB,e,bz)}else{b.swap(bB,a9,function(){bC=p(bB,e,bz)})}return bC}},set:function(bz,bA){if(be.test(bA)){bA=parseFloat(bA);if(bA>=0){return bA+"px"}}else{return bA}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(by,e){return au.test((e&&by.currentStyle?by.currentStyle.filter:by.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bB,bC){var bA=bB.style,by=bB.currentStyle,e=b.isNumeric(bC)?"alpha(opacity="+bC*100+")":"",bz=by&&by.filter||bA.filter||"";bA.zoom=1;if(bC>=1&&b.trim(bz.replace(al,""))===""){bA.removeAttribute("filter");if(by&&!by.filter){return}}bA.filter=al.test(bz)?bz.replace(al,e):bz+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bz,by){var e;b.swap(bz,{display:"inline-block"},function(){if(by){e=aa(bz,"margin-right","marginRight")}else{e=bz.style.marginRight}});return e}}}});if(av.defaultView&&av.defaultView.getComputedStyle){aJ=function(bB,bz){var by,bA,e;bz=bz.replace(A,"-$1").toLowerCase();if(!(bA=bB.ownerDocument.defaultView)){return M}if((e=bA.getComputedStyle(bB,null))){by=e.getPropertyValue(bz);if(by===""&&!b.contains(bB.ownerDocument.documentElement,bB)){by=b.style(bB,bz)}}return by}}if(av.documentElement.currentStyle){aY=function(bC,bz){var bD,e,bB,by=bC.currentStyle&&bC.currentStyle[bz],bA=bC.style;if(by===null&&bA&&(bB=bA[bz])){by=bB}if(!be.test(by)&&bq.test(by)){bD=bA.left;e=bC.runtimeStyle&&bC.runtimeStyle.left;if(e){bC.runtimeStyle.left=bC.currentStyle.left}bA.left=bz==="fontSize"?"1em":(by||0);by=bA.pixelLeft+"px";bA.left=bD;if(e){bC.runtimeStyle.left=e}}return by===""?"auto":by}}aa=aJ||aY;function p(bz,by,e){var bB=by==="width"?bz.offsetWidth:bz.offsetHeight,bA=by==="width"?an:a3;if(bB>0){if(e!=="border"){b.each(bA,function(){if(!e){bB-=parseFloat(b.css(bz,"padding"+this))||0}if(e==="margin"){bB+=parseFloat(b.css(bz,e+this))||0}else{bB-=parseFloat(b.css(bz,"border"+this+"Width"))||0}})}return bB+"px"}bB=aa(bz,by,by);if(bB<0||bB==null){bB=bz.style[by]||0}bB=parseFloat(bB)||0;if(e){b.each(bA,function(){bB+=parseFloat(b.css(bz,"padding"+this))||0;if(e!=="padding"){bB+=parseFloat(b.css(bz,"border"+this+"Width"))||0}if(e==="margin"){bB+=parseFloat(b.css(bz,e+this))||0}})}return bB+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bz){var by=bz.offsetWidth,e=bz.offsetHeight;return(by===0&&e===0)||(!b.support.reliableHiddenOffsets&&((bz.style&&bz.style.display)||b.css(bz,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var k=/%20/g,ap=/\[\]$/,bv=/\r?\n/g,bt=/#.*$/,aD=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,a0=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aN=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aR=/^(?:GET|HEAD)$/,c=/^\/\//,N=/\?/,a8=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,q=/^(?:select|textarea)/i,h=/\s+/,bu=/([?&])_=[^&]*/,L=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,B=b.fn.load,ab={},r={},aE,s,aW=["*/"]+["*"];try{aE=bo.href}catch(aw){aE=av.createElement("a");aE.href="";aE=aE.href}s=L.exec(aE.toLowerCase())||[];function f(e){return function(bB,bD){if(typeof bB!=="string"){bD=bB;bB="*"}if(b.isFunction(bD)){var bA=bB.toLowerCase().split(h),bz=0,bC=bA.length,by,bE,bF;for(;bz<bC;bz++){by=bA[bz];bF=/^\+/.test(by);if(bF){by=by.substr(1)||"*"}bE=e[by]=e[by]||[];bE[bF?"unshift":"push"](bD)}}}}function aX(by,bH,bC,bG,bE,bA){bE=bE||bH.dataTypes[0];bA=bA||{};bA[bE]=true;var bD=by[bE],bz=0,e=bD?bD.length:0,bB=(by===ab),bF;for(;bz<e&&(bB||!bF);bz++){bF=bD[bz](bH,bC,bG);if(typeof bF==="string"){if(!bB||bA[bF]){bF=M}else{bH.dataTypes.unshift(bF);bF=aX(by,bH,bC,bG,bF,bA)}}}if((bB||!bF)&&!bA["*"]){bF=aX(by,bH,bC,bG,"*",bA)}return bF}function am(bz,bA){var by,e,bB=b.ajaxSettings.flatOptions||{};for(by in bA){if(bA[by]!==M){(bB[by]?bz:(e||(e={})))[by]=bA[by]}}if(e){b.extend(true,bz,e)}}b.fn.extend({load:function(bz,bC,bD){if(typeof bz!=="string"&&B){return B.apply(this,arguments)}else{if(!this.length){return this}}var bB=bz.indexOf(" ");if(bB>=0){var e=bz.slice(bB,bz.length);bz=bz.slice(0,bB)}var bA="GET";if(bC){if(b.isFunction(bC)){bD=bC;bC=M}else{if(typeof bC==="object"){bC=b.param(bC,b.ajaxSettings.traditional);bA="POST"}}}var by=this;b.ajax({url:bz,type:bA,dataType:"html",data:bC,complete:function(bF,bE,bG){bG=bF.responseText;if(bF.isResolved()){bF.done(function(bH){bG=bH});by.html(e?b("<div>").append(bG.replace(a8,"")).find(e):bG)}if(bD){by.each(bD,[bG,bE,bF])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||q.test(this.nodeName)||a0.test(this.type))}).map(function(e,by){var bz=b(this).val();return bz==null?null:b.isArray(bz)?b.map(bz,function(bB,bA){return{name:by.name,value:bB.replace(bv,"\r\n")}}):{name:by.name,value:bz.replace(bv,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,by){b.fn[by]=function(bz){return this.bind(by,bz)}});b.each(["get","post"],function(e,by){b[by]=function(bz,bB,bC,bA){if(b.isFunction(bB)){bA=bA||bC;bC=bB;bB=M}return b.ajax({type:by,url:bz,data:bB,success:bC,dataType:bA})}});b.extend({getScript:function(e,by){return b.get(e,M,by,"script")},getJSON:function(e,by,bz){return b.get(e,by,bz,"json")},ajaxSetup:function(by,e){if(e){am(by,b.ajaxSettings)}else{e=by;by=b.ajaxSettings}am(by,e);return by},ajaxSettings:{url:aE,isLocal:aN.test(s[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bd.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:f(ab),ajaxTransport:f(r),ajax:function(bC,bA){if(typeof bC==="object"){bA=bC;bC=M}bA=bA||{};var bG=b.ajaxSetup({},bA),bV=bG.context||bG,bJ=bV!==bG&&(bV.nodeType||bV instanceof b)?b(bV):b.event,bU=b.Deferred(),bQ=b.Callbacks("once memory"),bE=bG.statusCode||{},bF,bK={},bR={},bT,bB,bO,bH,bL,bD=0,bz,bN,bM={readyState:0,setRequestHeader:function(bW,bX){if(!bD){var e=bW.toLowerCase();bW=bR[e]=bR[e]||bW;bK[bW]=bX}return this},getAllResponseHeaders:function(){return bD===2?bT:null},getResponseHeader:function(bW){var e;if(bD===2){if(!bB){bB={};while((e=aD.exec(bT))){bB[e[1].toLowerCase()]=e[2]}}e=bB[bW.toLowerCase()]}return e===M?null:e},overrideMimeType:function(e){if(!bD){bG.mimeType=e}return this},abort:function(e){e=e||"abort";if(bO){bO.abort(e)}bI(0,e);return this}};function bI(b2,bX,b3,bZ){if(bD===2){return}bD=2;if(bH){clearTimeout(bH)}bO=M;bT=bZ||"";bM.readyState=b2>0?4:0;var bW,b7,b6,b0=bX,b1=b3?bm(bG,bM,b3):M,bY,b5;if(b2>=200&&b2<300||b2===304){if(bG.ifModified){if((bY=bM.getResponseHeader("Last-Modified"))){b.lastModified[bF]=bY}if((b5=bM.getResponseHeader("Etag"))){b.etag[bF]=b5}}if(b2===304){b0="notmodified";bW=true}else{try{b7=H(bG,b1);b0="success";bW=true}catch(b4){b0="parsererror";b6=b4}}}else{b6=b0;if(!b0||b2){b0="error";if(b2<0){b2=0}}}bM.status=b2;bM.statusText=""+(bX||b0);if(bW){bU.resolveWith(bV,[b7,b0,bM])}else{bU.rejectWith(bV,[bM,b0,b6])}bM.statusCode(bE);bE=M;if(bz){bJ.trigger("ajax"+(bW?"Success":"Error"),[bM,bG,bW?b7:b6])}bQ.fireWith(bV,[bM,b0]);if(bz){bJ.trigger("ajaxComplete",[bM,bG]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bU.promise(bM);bM.success=bM.done;bM.error=bM.fail;bM.complete=bQ.add;bM.statusCode=function(bW){if(bW){var e;if(bD<2){for(e in bW){bE[e]=[bE[e],bW[e]]}}else{e=bW[bM.status];bM.then(e,e)}}return this};bG.url=((bC||bG.url)+"").replace(bt,"").replace(c,s[1]+"//");bG.dataTypes=b.trim(bG.dataType||"*").toLowerCase().split(h);if(bG.crossDomain==null){bL=L.exec(bG.url.toLowerCase());bG.crossDomain=!!(bL&&(bL[1]!=s[1]||bL[2]!=s[2]||(bL[3]||(bL[1]==="http:"?80:443))!=(s[3]||(s[1]==="http:"?80:443))))}if(bG.data&&bG.processData&&typeof bG.data!=="string"){bG.data=b.param(bG.data,bG.traditional)}aX(ab,bG,bA,bM);if(bD===2){return false}bz=bG.global;bG.type=bG.type.toUpperCase();bG.hasContent=!aR.test(bG.type);if(bz&&b.active++===0){b.event.trigger("ajaxStart")}if(!bG.hasContent){if(bG.data){bG.url+=(N.test(bG.url)?"&":"?")+bG.data;delete bG.data}bF=bG.url;if(bG.cache===false){var by=b.now(),bS=bG.url.replace(bu,"$1_="+by);bG.url=bS+((bS===bG.url)?(N.test(bG.url)?"&":"?")+"_="+by:"")}}if(bG.data&&bG.hasContent&&bG.contentType!==false||bA.contentType){bM.setRequestHeader("Content-Type",bG.contentType)}if(bG.ifModified){bF=bF||bG.url;if(b.lastModified[bF]){bM.setRequestHeader("If-Modified-Since",b.lastModified[bF])}if(b.etag[bF]){bM.setRequestHeader("If-None-Match",b.etag[bF])}}bM.setRequestHeader("Accept",bG.dataTypes[0]&&bG.accepts[bG.dataTypes[0]]?bG.accepts[bG.dataTypes[0]]+(bG.dataTypes[0]!=="*"?", "+aW+"; q=0.01":""):bG.accepts["*"]);for(bN in bG.headers){bM.setRequestHeader(bN,bG.headers[bN])}if(bG.beforeSend&&(bG.beforeSend.call(bV,bM,bG)===false||bD===2)){bM.abort();return false}for(bN in {success:1,error:1,complete:1}){bM[bN](bG[bN])}bO=aX(r,bG,bA,bM);if(!bO){bI(-1,"No Transport")}else{bM.readyState=1;if(bz){bJ.trigger("ajaxSend",[bM,bG])}if(bG.async&&bG.timeout>0){bH=setTimeout(function(){bM.abort("timeout")},bG.timeout)}try{bD=1;bO.send(bK,bI)}catch(bP){if(bD<2){bI(-1,bP)}else{b.error(bP)}}}return bM},param:function(e,bz){var by=[],bB=function(bC,bD){bD=b.isFunction(bD)?bD():bD;by[by.length]=encodeURIComponent(bC)+"="+encodeURIComponent(bD)};if(bz===M){bz=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bB(this.name,this.value)})}else{for(var bA in e){v(bA,e[bA],bz,bB)}}return by.join("&").replace(k,"+")}});function v(bz,bB,by,bA){if(b.isArray(bB)){b.each(bB,function(bD,bC){if(by||ap.test(bz)){bA(bz,bC)}else{v(bz+"["+(typeof bC==="object"||b.isArray(bC)?bD:"")+"]",bC,by,bA)}})}else{if(!by&&bB!=null&&typeof bB==="object"){for(var e in bB){v(bz+"["+e+"]",bB[e],by,bA)}}else{bA(bz,bB)}}}b.extend({active:0,lastModified:{},etag:{}});function bm(bG,bF,bC){var by=bG.contents,bE=bG.dataTypes,bz=bG.responseFields,bB,bD,bA,e;for(bD in bz){if(bD in bC){bF[bz[bD]]=bC[bD]}}while(bE[0]==="*"){bE.shift();if(bB===M){bB=bG.mimeType||bF.getResponseHeader("content-type")}}if(bB){for(bD in by){if(by[bD]&&by[bD].test(bB)){bE.unshift(bD);break}}}if(bE[0] in bC){bA=bE[0]}else{for(bD in bC){if(!bE[0]||bG.converters[bD+" "+bE[0]]){bA=bD;break}if(!e){e=bD}}bA=bA||e}if(bA){if(bA!==bE[0]){bE.unshift(bA)}return bC[bA]}}function H(bK,bC){if(bK.dataFilter){bC=bK.dataFilter(bC,bK.dataType)}var bG=bK.dataTypes,bJ={},bD,bH,bz=bG.length,bE,bF=bG[0],bA,bB,bI,by,e;for(bD=1;bD<bz;bD++){if(bD===1){for(bH in bK.converters){if(typeof bH==="string"){bJ[bH.toLowerCase()]=bK.converters[bH]}}}bA=bF;bF=bG[bD];if(bF==="*"){bF=bA}else{if(bA!=="*"&&bA!==bF){bB=bA+" "+bF;bI=bJ[bB]||bJ["* "+bF];if(!bI){e=M;for(by in bJ){bE=by.split(" ");if(bE[0]===bA||bE[0]==="*"){e=bJ[bE[1]+" "+bF];if(e){by=bJ[by];if(by===true){bI=e}else{if(e===true){bI=by}}break}}}}if(!(bI||e)){b.error("No conversion from "+bB.replace(" "," to "))}if(bI!==true){bC=bI?bI(bC):e(by(bC))}}}}return bC}var aC=b.now(),u=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aC++)}});b.ajaxPrefilter("json jsonp",function(bG,bD,bF){var bA=bG.contentType==="application/x-www-form-urlencoded"&&(typeof bG.data==="string");if(bG.dataTypes[0]==="jsonp"||bG.jsonp!==false&&(u.test(bG.url)||bA&&u.test(bG.data))){var bE,bz=bG.jsonpCallback=b.isFunction(bG.jsonpCallback)?bG.jsonpCallback():bG.jsonpCallback,bC=bd[bz],e=bG.url,bB=bG.data,by="$1"+bz+"$2";if(bG.jsonp!==false){e=e.replace(u,by);if(bG.url===e){if(bA){bB=bB.replace(u,by)}if(bG.data===bB){e+=(/\?/.test(e)?"&":"?")+bG.jsonp+"="+bz}}}bG.url=e;bG.data=bB;bd[bz]=function(bH){bE=[bH]};bF.always(function(){bd[bz]=bC;if(bE&&b.isFunction(bC)){bd[bz](bE[0])}});bG.converters["script json"]=function(){if(!bE){b.error(bz+" was not called")}return bE[0]};bG.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===M){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bz){if(bz.crossDomain){var e,by=av.head||av.getElementsByTagName("head")[0]||av.documentElement;return{send:function(bA,bB){e=av.createElement("script");e.async="async";if(bz.scriptCharset){e.charset=bz.scriptCharset}e.src=bz.url;e.onload=e.onreadystatechange=function(bD,bC){if(bC||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(by&&e.parentNode){by.removeChild(e)}e=M;if(!bC){bB(200,"success")}}};by.insertBefore(e,by.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var C=bd.ActiveXObject?function(){for(var e in O){O[e](0,1)}}:false,z=0,O;function aM(){try{return new bd.XMLHttpRequest()}catch(by){}}function ak(){try{return new bd.ActiveXObject("Microsoft.XMLHTTP")}catch(by){}}b.ajaxSettings.xhr=bd.ActiveXObject?function(){return !this.isLocal&&aM()||ak()}:aM;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var by;return{send:function(bE,bz){var bD=e.xhr(),bC,bB;if(e.username){bD.open(e.type,e.url,e.async,e.username,e.password)}else{bD.open(e.type,e.url,e.async)}if(e.xhrFields){for(bB in e.xhrFields){bD[bB]=e.xhrFields[bB]}}if(e.mimeType&&bD.overrideMimeType){bD.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bE["X-Requested-With"]){bE["X-Requested-With"]="XMLHttpRequest"}try{for(bB in bE){bD.setRequestHeader(bB,bE[bB])}}catch(bA){}bD.send((e.hasContent&&e.data)||null);by=function(bN,bH){var bI,bG,bF,bL,bK;try{if(by&&(bH||bD.readyState===4)){by=M;if(bC){bD.onreadystatechange=b.noop;if(C){delete O[bC]}}if(bH){if(bD.readyState!==4){bD.abort()}}else{bI=bD.status;bF=bD.getAllResponseHeaders();bL={};bK=bD.responseXML;if(bK&&bK.documentElement){bL.xml=bK}bL.text=bD.responseText;try{bG=bD.statusText}catch(bM){bG=""}if(!bI&&e.isLocal&&!e.crossDomain){bI=bL.text?200:404}else{if(bI===1223){bI=204}}}}}catch(bJ){if(!bH){bz(-1,bJ)}}if(bL){bz(bI,bG,bL,bF)}};if(!e.async||bD.readyState===4){by()}else{bC=++z;if(C){if(!O){O={};b(bd).unload(C)}O[bC]=by}bD.onreadystatechange=by}},abort:function(){if(by){by(0,1)}}}}})}var S={},ba,m,aB=/^(?:toggle|show|hide)$/,aU=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a5,aI=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a6;b.fn.extend({show:function(bA,bD,bC){var bz,bB;if(bA||bA===0){return this.animate(a2("show",3),bA,bD,bC)}else{for(var by=0,e=this.length;by<e;by++){bz=this[by];if(bz.style){bB=bz.style.display;if(!b._data(bz,"olddisplay")&&bB==="none"){bB=bz.style.display=""}if(bB===""&&b.css(bz,"display")==="none"){b._data(bz,"olddisplay",y(bz.nodeName))}}}for(by=0;by<e;by++){bz=this[by];if(bz.style){bB=bz.style.display;if(bB===""||bB==="none"){bz.style.display=b._data(bz,"olddisplay")||""}}}return this}},hide:function(bA,bD,bC){if(bA||bA===0){return this.animate(a2("hide",3),bA,bD,bC)}else{var bz,bB,by=0,e=this.length;for(;by<e;by++){bz=this[by];if(bz.style){bB=b.css(bz,"display");if(bB!=="none"&&!b._data(bz,"olddisplay")){b._data(bz,"olddisplay",bB)}}}for(by=0;by<e;by++){if(this[by].style){this[by].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bz,by,bA){var e=typeof bz==="boolean";if(b.isFunction(bz)&&b.isFunction(by)){this._toggle.apply(this,arguments)}else{if(bz==null||e){this.each(function(){var bB=e?bz:b(this).is(":hidden");b(this)[bB?"show":"hide"]()})}else{this.animate(a2("toggle",3),bz,by,bA)}}return this},fadeTo:function(e,bA,bz,by){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bA},e,bz,by)},animate:function(bC,bz,bB,bA){var e=b.speed(bz,bB,bA);if(b.isEmptyObject(bC)){return this.each(e.complete,[false])}bC=b.extend({},bC);function by(){if(e.queue===false){b._mark(this)}var bH=b.extend({},e),bN=this.nodeType===1,bL=bN&&b(this).is(":hidden"),bE,bI,bG,bM,bK,bF,bJ,bO,bD;bH.animatedProperties={};for(bG in bC){bE=b.camelCase(bG);if(bG!==bE){bC[bE]=bC[bG];delete bC[bG]}bI=bC[bE];if(b.isArray(bI)){bH.animatedProperties[bE]=bI[1];bI=bC[bE]=bI[0]}else{bH.animatedProperties[bE]=bH.specialEasing&&bH.specialEasing[bE]||bH.easing||"swing"}if(bI==="hide"&&bL||bI==="show"&&!bL){return bH.complete.call(this)}if(bN&&(bE==="height"||bE==="width")){bH.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout||y(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.zoom=1}}}}if(bH.overflow!=null){this.style.overflow="hidden"}for(bG in bC){bM=new b.fx(this,bH,bG);bI=bC[bG];if(aB.test(bI)){bD=b._data(this,"toggle"+bG)||(bI==="toggle"?bL?"show":"hide":0);if(bD){b._data(this,"toggle"+bG,bD==="show"?"hide":"show");bM[bD]()}else{bM[bI]()}}else{bK=aU.exec(bI);bF=bM.cur();if(bK){bJ=parseFloat(bK[2]);bO=bK[3]||(b.cssNumber[bG]?"":"px");if(bO!=="px"){b.style(this,bG,(bJ||1)+bO);bF=((bJ||1)/bM.cur())*bF;b.style(this,bG,bF+bO)}if(bK[1]){bJ=((bK[1]==="-="?-1:1)*bJ)+bF}bM.custom(bF,bJ,bO)}else{bM.custom(bF,bI,"")}}}return true}return e.queue===false?this.each(by):this.queue(e.queue,by)},stop:function(bz,by,e){if(typeof bz!=="string"){e=by;by=bz;bz=M}if(by&&bz!==false){this.queue(bz||"fx",[])}return this.each(function(){var bB,bA=false,bD=b.timers,bC=b._data(this);if(!e){b._unmark(true,this)}function bE(bH,bI,bG){var bF=bI[bG];b.removeData(bH,bG,true);bF.stop(e)}if(bz==null){for(bB in bC){if(bC[bB].stop&&bB.indexOf(".run")===bB.length-4){bE(this,bC,bB)}}}else{if(bC[bB=bz+".run"]&&bC[bB].stop){bE(this,bC,bB)}}for(bB=bD.length;bB--;){if(bD[bB].elem===this&&(bz==null||bD[bB].queue===bz)){if(e){bD[bB](true)}else{bD[bB].saveState()}bA=true;bD.splice(bB,1)}}if(!(e&&bA)){b.dequeue(this,bz)}})}});function bj(){setTimeout(at,0);return(a6=b.now())}function at(){a6=M}function a2(by,e){var bz={};b.each(aI.concat.apply([],aI.slice(0,e)),function(){bz[this]=by});return bz}b.each({slideDown:a2("show",1),slideUp:a2("hide",1),slideToggle:a2("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,by){b.fn[e]=function(bz,bB,bA){return this.animate(by,bz,bB,bA)}});b.extend({speed:function(bz,bA,by){var e=bz&&typeof bz==="object"?b.extend({},bz):{complete:by||!by&&bA||b.isFunction(bz)&&bz,duration:bz,easing:by&&bA||bA&&!b.isFunction(bA)&&bA};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(bB){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue){b.dequeue(this,e.queue)}else{if(bB!==false){b._unmark(this)}}};return e},easing:{linear:function(bz,bA,e,by){return e+by*bz},swing:function(bz,bA,e,by){return((-Math.cos(bz*Math.PI)/2)+0.5)*by+e}},timers:[],fx:function(by,e,bz){this.options=e;this.elem=by;this.prop=bz;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,by=b.css(this.elem,this.prop);return isNaN(e=parseFloat(by))?!by||by==="auto"?0:by:e},custom:function(bC,bB,bA){var e=this,bz=b.fx;this.startTime=a6||bj();this.end=bB;this.now=this.start=bC;this.pos=this.state=0;this.unit=bA||this.unit||(b.cssNumber[this.prop]?"":"px");function by(bD){return e.step(bD)}by.queue=this.options.queue;by.elem=this.elem;by.saveState=function(){if(e.options.hide&&b._data(e.elem,"fxshow"+e.prop)===M){b._data(e.elem,"fxshow"+e.prop,e.start)}};if(by()&&b.timers.push(by)&&!a5){a5=setInterval(bz.tick,bz.interval)}},show:function(){var e=b._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||b.style(this.elem,this.prop);this.options.show=true;if(e!==M){this.custom(this.cur(),e)}else{this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur())}b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b._data(this.elem,"fxshow"+this.prop)||b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bB){var bD,bE,by,bA=a6||bj(),e=true,bC=this.elem,bz=this.options;if(bB||bA>=bz.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bz.animatedProperties[this.prop]=true;for(bD in bz.animatedProperties){if(bz.animatedProperties[bD]!==true){e=false}}if(e){if(bz.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bF,bG){bC.style["overflow"+bG]=bz.overflow[bF]})}if(bz.hide){b(bC).hide()}if(bz.hide||bz.show){for(bD in bz.animatedProperties){b.style(bC,bD,bz.orig[bD]);b.removeData(bC,"fxshow"+bD,true);b.removeData(bC,"toggle"+bD,true)}}by=bz.complete;if(by){bz.complete=false;by.call(bC)}}return false}else{if(bz.duration==Infinity){this.now=bA}else{bE=bA-this.startTime;this.state=bE/bz.duration;this.pos=b.easing[bz.animatedProperties[this.prop]](this.state,bE,0,1,bz.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){var bz,by=b.timers,e=0;for(;e<by.length;e++){bz=by[e];if(!bz()&&by[e]===bz){by.splice(e--,1)}}if(!by.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a5);a5=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=e.now+e.unit}else{e.elem[e.prop]=e.now}}}});b.each(["width","height"],function(e,by){b.fx.step[by]=function(bz){b.style(bz.elem,by,Math.max(0,bz.now))}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(by){return e===by.elem}).length}}function y(bA){if(!S[bA]){var e=av.body,by=b("<"+bA+">").appendTo(e),bz=by.css("display");by.remove();if(bz==="none"||bz===""){if(!ba){ba=av.createElement("iframe");ba.frameBorder=ba.width=ba.height=0}e.appendChild(ba);if(!m||!ba.createElement){m=(ba.contentWindow||ba.contentDocument).document;m.write((av.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");m.close()}by=m.createElement(bA);m.body.appendChild(by);bz=b.css(by,"display");e.removeChild(ba)}S[bA]=bz}return S[bA]}var W=/^t(?:able|d|h)$/i,ae=/^(?:body|html)$/i;if("getBoundingClientRect" in av.documentElement){b.fn.offset=function(bL){var bB=this[0],bE;if(bL){return this.each(function(e){b.offset.setOffset(this,bL,e)})}if(!bB||!bB.ownerDocument){return null}if(bB===bB.ownerDocument.body){return b.offset.bodyOffset(bB)}try{bE=bB.getBoundingClientRect()}catch(bI){}var bK=bB.ownerDocument,bz=bK.documentElement;if(!bE||!b.contains(bz,bB)){return bE?{top:bE.top,left:bE.left}:{top:0,left:0}}var bF=bK.body,bG=aL(bK),bD=bz.clientTop||bF.clientTop||0,bH=bz.clientLeft||bF.clientLeft||0,by=bG.pageYOffset||b.support.boxModel&&bz.scrollTop||bF.scrollTop,bC=bG.pageXOffset||b.support.boxModel&&bz.scrollLeft||bF.scrollLeft,bJ=bE.top+by-bD,bA=bE.left+bC-bH;return{top:bJ,left:bA}}}else{b.fn.offset=function(bI){var bC=this[0];if(bI){return this.each(function(bJ){b.offset.setOffset(this,bI,bJ)})}if(!bC||!bC.ownerDocument){return null}if(bC===bC.ownerDocument.body){return b.offset.bodyOffset(bC)}var bF,bz=bC.offsetParent,by=bC,bH=bC.ownerDocument,bA=bH.documentElement,bD=bH.body,bE=bH.defaultView,e=bE?bE.getComputedStyle(bC,null):bC.currentStyle,bG=bC.offsetTop,bB=bC.offsetLeft;while((bC=bC.parentNode)&&bC!==bD&&bC!==bA){if(b.support.fixedPosition&&e.position==="fixed"){break}bF=bE?bE.getComputedStyle(bC,null):bC.currentStyle;bG-=bC.scrollTop;bB-=bC.scrollLeft;if(bC===bz){bG+=bC.offsetTop;bB+=bC.offsetLeft;if(b.support.doesNotAddBorder&&!(b.support.doesAddBorderForTableAndCells&&W.test(bC.nodeName))){bG+=parseFloat(bF.borderTopWidth)||0;bB+=parseFloat(bF.borderLeftWidth)||0}by=bz;bz=bC.offsetParent}if(b.support.subtractsBorderForOverflowNotVisible&&bF.overflow!=="visible"){bG+=parseFloat(bF.borderTopWidth)||0;bB+=parseFloat(bF.borderLeftWidth)||0}e=bF}if(e.position==="relative"||e.position==="static"){bG+=bD.offsetTop;bB+=bD.offsetLeft}if(b.support.fixedPosition&&e.position==="fixed"){bG+=Math.max(bA.scrollTop,bD.scrollTop);bB+=Math.max(bA.scrollLeft,bD.scrollLeft)}return{top:bG,left:bB}}}b.offset={bodyOffset:function(e){var bz=e.offsetTop,by=e.offsetLeft;if(b.support.doesNotIncludeMarginInBodyOffset){bz+=parseFloat(b.css(e,"marginTop"))||0;by+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bz,left:by}},setOffset:function(bA,bJ,bD){var bE=b.css(bA,"position");if(bE==="static"){bA.style.position="relative"}var bC=b(bA),by=bC.offset(),e=b.css(bA,"top"),bH=b.css(bA,"left"),bI=(bE==="absolute"||bE==="fixed")&&b.inArray("auto",[e,bH])>-1,bG={},bF={},bz,bB;if(bI){bF=bC.position();bz=bF.top;bB=bF.left}else{bz=parseFloat(e)||0;bB=parseFloat(bH)||0}if(b.isFunction(bJ)){bJ=bJ.call(bA,bD,by)}if(bJ.top!=null){bG.top=(bJ.top-by.top)+bz}if(bJ.left!=null){bG.left=(bJ.left-by.left)+bB}if("using" in bJ){bJ.using.call(bA,bG)}else{bC.css(bG)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bz=this[0],by=this.offsetParent(),bA=this.offset(),e=ae.test(by[0].nodeName)?{top:0,left:0}:by.offset();bA.top-=parseFloat(b.css(bz,"marginTop"))||0;bA.left-=parseFloat(b.css(bz,"marginLeft"))||0;e.top+=parseFloat(b.css(by[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(by[0],"borderLeftWidth"))||0;return{top:bA.top-e.top,left:bA.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||av.body;while(e&&(!ae.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(by,e){var bz="scroll"+e;b.fn[bz]=function(bC){var bA,bB;if(bC===M){bA=this[0];if(!bA){return null}bB=aL(bA);return bB?("pageXOffset" in bB)?bB[by?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bB.document.documentElement[bz]||bB.document.body[bz]:bA[bz]}return this.each(function(){bB=aL(this);if(bB){bB.scrollTo(!by?bC:b(bB).scrollLeft(),by?bC:b(bB).scrollTop())}else{this[bz]=bC}})}});function aL(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(by,e){var bz=e.toLowerCase();b.fn["inner"+e]=function(){var bA=this[0];return bA?bA.style?parseFloat(b.css(bA,bz,"padding")):this[bz]():null};b.fn["outer"+e]=function(bB){var bA=this[0];return bA?bA.style?parseFloat(b.css(bA,bz,bB?"margin":"border")):this[bz]():null};b.fn[bz]=function(bC){var bD=this[0];if(!bD){return bC==null?null:this}if(b.isFunction(bC)){return this.each(function(bH){var bG=b(this);bG[bz](bC.call(this,bH,bG[bz]()))})}if(b.isWindow(bD)){var bE=bD.document.documentElement["client"+e],bA=bD.document.body;return bD.document.compatMode==="CSS1Compat"&&bE||bA&&bA["client"+e]||bE}else{if(bD.nodeType===9){return Math.max(bD.documentElement["client"+e],bD.body["scroll"+e],bD.documentElement["scroll"+e],bD.body["offset"+e],bD.documentElement["offset"+e])}else{if(bC===M){var bF=b.css(bD,bz),bB=parseFloat(bF);return b.isNumeric(bB)?bB:bF}else{return this.css(bz,typeof bC==="string"?bC:bC+"px")}}}}});bd.jQuery=bd.$=b})(window);(function(c){var b=null;function a(aF,S){this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.consoleOnly=false;this.waitForWindowLoad=false;this.nullURL="about:blank";this.allowPolling=true;this.useFastPolling=false;this.useMovieStar=true;this.bgColor="#ffffff";this.useHighPerformance=false;this.flashPollingInterval=null;this.flashLoadTimeout=1000;this.wmode=null;this.allowScriptAccess="always";this.useFlashBlock=false;this.useHTML5Audio=true;this.html5Test=/^(probably|maybe)$/i;this.preferFlash=true;this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.defaultOptions={autoLoad:false,stream:true,autoPlay:false,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onstop:null,onfailure:null,onfinish:null,onbeforefinish:null,onbeforefinishtime:5000,onbeforefinishcomplete:null,onjustbeforefinish:null,onjustbeforefinishtime:200,multiShot:true,multiShotEvents:false,position:null,pan:0,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.version=null;this.versionNumber="V2.97a.20110801";this.movieURL=null;this.url=(aF||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.o=null;this.movieID="sm2-container";this.id=(S||"sm2movie");this.swfCSS={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.specialWmodeCase=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.baseMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.netStreamTypes=["aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"];this.netStreamPattern=new RegExp("\\.("+this.netStreamTypes.join("|")+")(\\?.*)?$","i");this.mimePattern=this.baseMimeTypes;this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=(typeof Audio!=="undefined"&&typeof new Audio().canPlayType!=="undefined");this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var V,aT=this,aC="soundManager",ar=aC+"::",aI="HTML5::",Z,ad=navigator.userAgent,k=c,l=k.location.href.toString(),e=this.flashVersion,aG=document,af,ay,am=[],m=true,ai,aw=false,aN=false,aL=false,J=false,v=false,C,aJ=0,W,al,aO,aS,at,ak,u,N,aE,O,s,aP,aA,aq,aK,aD,an,I,Y=["log","info","warn","error"],R=8,X,ap,h,o=null,au=null,aa,i,M,z,ac,y,d,ag,aU=false,G=false,B,q,w,T,aj=null,ah,E,ax,p,U,aR,r,j=Array.prototype.slice,aM=false,g,aQ,ab,t,D,H=ad.match(/(ipad|iphone|ipod)/i),A=(ad.match(/(mobile|pre\/|xoom)/i)||H),f=ad.match(/msie/i),n=ad.match(/webkit/i),F=(ad.match(/safari/i)&&!ad.match(/chrome/i)),L=(ad.match(/opera/i)),ao=(!l.match(/usehtml5audio/i)&&!l.match(/sm2\-ignorebadua/i)&&F&&ad.match(/OS X 10_6_([3-7])/i)),aB=(typeof console!=="undefined"&&typeof console.log!=="undefined"),aH=(typeof aG.hasFocus!=="undefined"?aG.hasFocus():null),ae=(F&&typeof aG.hasFocus==="undefined"),K=!ae,Q=/(mp3|mp4|mpa)/i,av=(aG.location?aG.location.protocol.match(/http/i):null),az=(!av?"http:":"");this.useAltURL=!av;this._global_a=null;if(A){aT.useHTML5Audio=true;aT.preferFlash=false;if(H){aT.ignoreFlash=true;aM=true}}this.ok=function(){return(aj?(aL&&!J):(aT.useHTML5Audio&&aT.hasHTML5))};this.supported=this.ok;this.getMovie=function(aV){return f?k[aV]:(F?Z(aV)||aG[aV]:Z(aV))};this.createSound=function(aX){var a0=aC+".createSound(): ",aZ=null,aY=null,aW=null;if(!aL||!aT.ok()){d(a0+aa(!aL?"notReady":"notOK"));return false}if(arguments.length===2){aX={id:arguments[0],url:arguments[1]}}aZ=al(aX);aW=aZ;if(aW.id.toString().charAt(0).match(/^[0-9]$/)){aT._wD(a0+aa("badID",aW.id),2)}aT._wD(a0+aW.id+" ("+aW.url+")",1);if(ag(aW.id,true)){aT._wD(a0+aW.id+" exists",1);return aT.sounds[aW.id]}function aV(){aZ=ac(aZ);aT.sounds[aW.id]=new V(aW);aT.soundIDs.push(aW.id);return aT.sounds[aW.id]}if(E(aW)){aY=aV();aT._wD("Loading sound "+aW.id+" via HTML5");aY._setup_html5(aW)}else{if(e>8&&aT.useMovieStar){if(aW.isMovieStar===null){aW.isMovieStar=((aW.serverURL||(aW.type?aW.type.match(aT.netStreamPattern):false)||aW.url.match(aT.netStreamPattern))?true:false)}if(aW.isMovieStar){aT._wD(a0+"using MovieStar handling")}if(aW.isMovieStar){if(aW.usePeakData){C("noPeak");aW.usePeakData=false}if(aW.loops>1){C("noNSLoop")}}}aW=y(aW,a0);aY=aV();if(e===8){aT.o._createSound(aW.id,aW.onjustbeforefinishtime,aW.loops||1,aW.usePolicyFile)}else{aT.o._createSound(aW.id,aW.url,aW.onjustbeforefinishtime,aW.usePeakData,aW.useWaveformData,aW.useEQData,aW.isMovieStar,(aW.isMovieStar?aW.bufferTime:false),aW.loops||1,aW.serverURL,aW.duration||null,aW.autoPlay,true,aW.autoLoad,aW.usePolicyFile);if(!aW.serverURL){aY.connected=true;if(aW.onconnect){aW.onconnect.apply(aY)}}}if(!aW.serverURL&&(aW.autoLoad||aW.autoPlay)){aY.load(aW)}}if(!aW.serverURL&&aW.autoPlay){aY.play()}return aY};this.destroySound=function(aV,aY){if(!ag(aV)){return false}var aX=aT.sounds[aV],aW;aX._iO={};aX.stop();aX.unload();for(aW=0;aW<aT.soundIDs.length;aW++){if(aT.soundIDs[aW]===aV){aT.soundIDs.splice(aW,1);break}}if(!aY){aX.destruct(true)}aX=null;delete aT.sounds[aV];return true};this.load=function(aV,aW){if(!ag(aV)){return false}return aT.sounds[aV].load(aW)};this.unload=function(aV){if(!ag(aV)){return false}return aT.sounds[aV].unload()};this.play=function(aV,aW){var aX=aC+".play(): ";if(!aL||!aT.ok()){d(aX+aa(!aL?"notReady":"notOK"));return false}if(!ag(aV)){if(!(aW instanceof Object)){aW={url:aW}}if(aW&&aW.url){aT._wD(aX+'attempting to create "'+aV+'"',1);aW.id=aV;return aT.createSound(aW).play()}else{return false}}return aT.sounds[aV].play(aW)};this.start=this.play;this.setPosition=function(aV,aW){if(!ag(aV)){return false}return aT.sounds[aV].setPosition(aW)};this.stop=function(aV){if(!ag(aV)){return false}aT._wD(aC+".stop("+aV+")",1);return aT.sounds[aV].stop()};this.stopAll=function(){var aV;aT._wD(aC+".stopAll()",1);for(aV in aT.sounds){if(aT.sounds.hasOwnProperty(aV)){aT.sounds[aV].stop()}}};this.pause=function(aV){if(!ag(aV)){return false}return aT.sounds[aV].pause()};this.pauseAll=function(){var aV;for(aV=aT.soundIDs.length;aV--;){aT.sounds[aT.soundIDs[aV]].pause()}};this.resume=function(aV){if(!ag(aV)){return false}return aT.sounds[aV].resume()};this.resumeAll=function(){var aV;for(aV=aT.soundIDs.length;aV--;){aT.sounds[aT.soundIDs[aV]].resume()}};this.togglePause=function(aV){if(!ag(aV)){return false}return aT.sounds[aV].togglePause()};this.setPan=function(aV,aW){if(!ag(aV)){return false}return aT.sounds[aV].setPan(aW)};this.setVolume=function(aW,aV){if(!ag(aW)){return false}return aT.sounds[aW].setVolume(aV)};this.mute=function(aV){var aX=aC+".mute(): ",aW=0;if(typeof aV!=="string"){aV=null}if(!aV){aT._wD(aX+"Muting all sounds");for(aW=aT.soundIDs.length;aW--;){aT.sounds[aT.soundIDs[aW]].mute()}aT.muted=true}else{if(!ag(aV)){return false}aT._wD(aX+'Muting "'+aV+'"');return aT.sounds[aV].mute()}return true};this.muteAll=function(){aT.mute()};this.unmute=function(aV){var aX=aC+".unmute(): ",aW;if(typeof aV!=="string"){aV=null}if(!aV){aT._wD(aX+"Unmuting all sounds");for(aW=aT.soundIDs.length;aW--;){aT.sounds[aT.soundIDs[aW]].unmute()}aT.muted=false}else{if(!ag(aV)){return false}aT._wD(aX+'Unmuting "'+aV+'"');return aT.sounds[aV].unmute()}return true};this.unmuteAll=function(){aT.unmute()};this.toggleMute=function(aV){if(!ag(aV)){return false}return aT.sounds[aV].toggleMute()};this.getMemoryUse=function(){var aV=0;if(aT.o&&e!==8){aV=parseInt(aT.o._getMemoryUse(),10)}return aV};this.disable=function(aW){var aV;if(typeof aW==="undefined"){aW=false}if(J){return false}J=true;C("shutdown",1);for(aV=aT.soundIDs.length;aV--;){X(aT.sounds[aT.soundIDs[aV]])}W(aW);r.remove(k,"load",at);return true};this.canPlayMIME=function(aW){var aV;if(aT.hasHTML5){aV=ax({type:aW})}if(!aj||aV){return aV}else{return(aW?(aW.match(aT.mimePattern)?true:false):null)}};this.canPlayURL=function(aW){var aV;if(aT.hasHTML5){aV=ax({url:aW})}if(!aj||aV){return aV}else{return(aW?(aW.match(aT.filePattern)?true:false):null)}};this.canPlayLink=function(aV){if(typeof aV.type!=="undefined"&&aV.type){if(aT.canPlayMIME(aV.type)){return true}}return aT.canPlayURL(aV.href)};this.getSoundById=function(aW,aX){if(!aW){throw new Error(aC+".getSoundById(): sID is null/undefined")}var aV=aT.sounds[aW];if(!aV&&!aX){aT._wD('"'+aW+'" is an invalid sound ID.',2)}return aV};this.onready=function(aW,aV){var aX="onready";if(aW&&aW instanceof Function){if(aL){aT._wD(aa("queue",aX))}if(!aV){aV=k}aO(aX,aW,aV);aS();return true}else{throw aa("needFunction",aX)}};this.ontimeout=function(aW,aV){var aX="ontimeout";if(aW&&aW instanceof Function){if(aL){aT._wD(aa("queue",aX))}if(!aV){aV=k}aO(aX,aW,aV);aS({type:aX});return true}else{throw aa("needFunction",aX)}};this._writeDebug=function(aW,a2,aY){var a1="soundmanager-debug",a0,aZ,aV;if(!aT.debugMode){return false}if(typeof aY!=="undefined"&&aY){aW=aW+" | "+new Date().getTime()}if(aB&&aT.useConsole){aV=Y[a2];if(typeof console[aV]!=="undefined"){console[aV](aW)}else{console.log(aW)}if(aT.useConsoleOnly){return true}}try{a0=Z(a1);if(!a0){return false}aZ=aG.createElement("div");if(++aJ%2===0){aZ.className="sm2-alt"}if(typeof a2==="undefined"){a2=0}else{a2=parseInt(a2,10)}aZ.appendChild(aG.createTextNode(aW));if(a2){if(a2>=2){aZ.style.fontWeight="bold"}if(a2===3){aZ.style.color="#ff3333"}}a0.insertBefore(aZ,a0.firstChild)}catch(aX){}a0=null;return true};this._wD=this._writeDebug;this._debug=function(){var aW,aV;C("currentObj",1);for(aW=0,aV=aT.soundIDs.length;aW<aV;aW++){aT.sounds[aT.soundIDs[aW]]._debug()}};this.reboot=function(){aT._wD(aC+".reboot()");if(aT.soundIDs.length){aT._wD("Destroying "+aT.soundIDs.length+" SMSound objects...")}var aW,aV;for(aW=aT.soundIDs.length;aW--;){aT.sounds[aT.soundIDs[aW]].destruct()}try{if(f){au=aT.o.innerHTML}o=aT.o.parentNode.removeChild(aT.o);aT._wD("Flash movie removed.")}catch(aX){C("badRemove",2)}au=o=aj=null;aT.enabled=aA=aL=aU=G=aw=aN=J=aT.swfLoaded=false;aT.soundIDs=aT.sounds=[];aT.o=null;for(aW in am){if(am.hasOwnProperty(aW)){for(aV=am[aW].length;aV--;){am[aW][aV].fired=false}}}aT._wD(aC+": Rebooting...");k.setTimeout(aT.beginDelayedInit,20)};this.getMoviePercent=function(){return(aT.o&&typeof aT.o.PercentLoaded!=="undefined"?aT.o.PercentLoaded():null)};this.beginDelayedInit=function(){v=true;aP();setTimeout(function(){if(G){return false}aK();s();G=true;return true},20);ak()};this.destruct=function(){aT._wD(aC+".destruct()");aT.disable(true)};function P(aV){return function(aW){if(!this._t||!this._t._a){if(this._t&&this._t.sID){aT._wD(aI+"ignoring "+aW.type+": "+this._t.sID)}else{aT._wD(aI+"ignoring "+aW.type)}return null}else{return aV.call(this,aW)}}}t={abort:P(function(aV){aT._wD(aI+"abort: "+this._t.sID)}),canplay:P(function(aX){if(this._t._html5_canplay){return true}this._t._html5_canplay=true;aT._wD(aI+"canplay: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0);var aW=(!isNaN(this._t.position)?this._t.position/1000:null);if(this._t.position&&this.currentTime!==aW){aT._wD(aI+"canplay: setting position to "+aW);try{this.currentTime=aW}catch(aV){aT._wD(aI+"setting position failed: "+aV.message,2)}}}),load:P(function(aV){if(!this._t.loaded){this._t._onbufferchange(0);this._t._whileloading(this._t.bytesTotal,this._t.bytesTotal,this._t._get_html5_duration());this._t._onload(true)}}),emptied:P(function(aV){aT._wD(aI+"emptied: "+this._t.sID)}),ended:P(function(aV){aT._wD(aI+"ended: "+this._t.sID);this._t._onfinish()}),error:P(function(aV){aT._wD(aI+"error: "+this.error.code);this._t._onload(false)}),loadeddata:P(function(aX){var aV=this._t,aW=aV.bytesTotal||1;aT._wD(aI+"loadeddata: "+this._t.sID);if(!aV._loaded&&!F){aV.duration=aV._get_html5_duration();aV._whileloading(aW,aW,aV._get_html5_duration());aV._onload(true)}}),loadedmetadata:P(function(aV){aT._wD(aI+"loadedmetadata: "+this._t.sID)}),loadstart:P(function(aV){aT._wD(aI+"loadstart: "+this._t.sID);this._t._onbufferchange(1)}),play:P(function(aV){aT._wD(aI+"play: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0)}),playing:P(function(aV){aT._wD(aI+"playing: "+this._t.sID+", "+this._t.url);this._t._onbufferchange(0)}),progress:P(function(a0){if(this._t.loaded){return false}var aY,aX,a1,aW=0,a3=(a0.type==="progress"),aV=a0.target.buffered,aZ=(a0.loaded||0),a2=(a0.total||1);if(aV&&aV.length){for(aY=aV.length;aY--;){aW=(aV.end(aY)-aV.start(aY))}aZ=aW/a0.target.duration;if(a3&&aV.length>1){a1=[];aX=aV.length;for(aY=0;aY<aX;aY++){a1.push(a0.target.buffered.start(aY)+"-"+a0.target.buffered.end(aY))}aT._wD(aI+"progress: timeRanges: "+a1.join(", "))}if(a3&&!isNaN(aZ)){aT._wD(aI+"progress: "+this._t.sID+": "+Math.floor(aZ*100)+"% loaded")}}if(!isNaN(aZ)){this._t._onbufferchange(0);this._t._whileloading(aZ,a2,this._t._get_html5_duration());if(aZ&&a2&&aZ===a2){t.load.call(this,a0)}}}),ratechange:P(function(aV){aT._wD(aI+"ratechange: "+this._t.sID)}),suspend:P(function(aV){aT._wD(aI+"suspend: "+this._t.sID);t.progress.call(this,aV)}),stalled:P(function(aV){aT._wD(aI+"stalled: "+this._t.sID)}),timeupdate:P(function(aV){this._t._onTimer()}),waiting:P(function(aV){aT._wD(aI+"waiting: "+this._t.sID);this._t._onbufferchange(1)})};V=function(aW){var aY=this,aZ,aX,aV;this.sID=aW.id;this.url=aW.url;this.options=al(aW);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this._lastURL=null;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){if(aT.debugMode){var a2=null,a4=[],a1,a3,a0=64;for(a2 in aY.options){if(aY.options[a2]!==null){if(aY.options[a2] instanceof Function){a1=aY.options[a2].toString();a1=a1.replace(/\s\s+/g," ");a3=a1.indexOf("{");a4.push(" "+a2+": {"+a1.substr(a3+1,(Math.min(Math.max(a1.indexOf("\n")-1,a0),a0))).replace(/\n/g,"")+"... }")}else{a4.push(" "+a2+": "+aY.options[a2])}}}aT._wD("SMSound() merged options: {\n"+a4.join(", \n")+"\n}")}};this._debug();this.load=function(a0){var a1=null;if(typeof a0!=="undefined"){aY._iO=al(a0,aY.options);aY.instanceOptions=aY._iO}else{a0=aY.options;aY._iO=a0;aY.instanceOptions=aY._iO;if(aY._lastURL&&aY._lastURL!==aY.url){C("manURL");aY._iO.url=aY.url;aY.url=null}}if(!aY._iO.url){aY._iO.url=aY.url}aT._wD("SMSound.load(): "+aY._iO.url,1);if(aY._iO.url===aY.url&&aY.readyState!==0&&aY.readyState!==2){C("onURL",1);return aY}aY._lastURL=aY.url;aY.loaded=false;aY.readyState=1;aY.playState=0;if(E(aY._iO)){a1=aY._setup_html5(aY._iO);if(!a1._called_load){aT._wD(aI+"load: "+aY.sID);aY._html5_canplay=false;a1.load();a1._called_load=true;if(aY._iO.autoPlay){aY.play()}}else{aT._wD(aI+"ignoring request to load again: "+aY.sID)}}else{try{aY.isHTML5=false;aY._iO=y(ac(aY._iO));if(e===8){aT.o._load(aY.sID,aY._iO.url,aY._iO.stream,aY._iO.autoPlay,(aY._iO.whileloading?1:0),aY._iO.loops||1,aY._iO.usePolicyFile)}else{aT.o._load(aY.sID,aY._iO.url,aY._iO.stream?true:false,aY._iO.autoPlay?true:false,aY._iO.loops||1,aY._iO.autoLoad?true:false,aY._iO.usePolicyFile)}}catch(a2){C("smError",2);ai("onload",false);aD({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}return aY};this.unload=function(){if(aY.readyState!==0){aT._wD('SMSound.unload(): "'+aY.sID+'"');if(!aY.isHTML5){if(e===8){aT.o._unload(aY.sID,aT.nullURL)}else{aT.o._unload(aY.sID)}}else{aX();if(aY._a){aY._a.pause();aY._a.src=""}}aZ()}return aY};this.destruct=function(a0){aT._wD('SMSound.destruct(): "'+aY.sID+'"');if(!aY.isHTML5){aY._iO.onfailure=null;aT.o._destroySound(aY.sID)}else{aX();if(aY._a){aY._a.pause();aY._a.src="";if(!aM){aY._remove_html5_events()}aY._a._t=null;aY._a=null}}if(!a0){aT.destroySound(aY.sID,true)}};this.play=function(a3,a1){var a4="SMSound.play(): ",a0,a2;a1=a1===undefined?true:a1;if(!a3){a3={}}aY._iO=al(a3,aY._iO);aY._iO=al(aY._iO,aY.options);aY.instanceOptions=aY._iO;if(aY._iO.serverURL&&!aY.connected){if(!aY.getAutoPlay()){aT._wD(a4+" Netstream not connected yet - setting autoPlay");aY.setAutoPlay(true)}return aY}if(E(aY._iO)){aY._setup_html5(aY._iO);aV()}if(aY.playState===1&&!aY.paused){a0=aY._iO.multiShot;if(!a0){aT._wD(a4+'"'+aY.sID+'" already playing (one-shot)',1);return aY}else{aT._wD(a4+'"'+aY.sID+'" already playing (multi-shot)',1)}}if(!aY.loaded){if(aY.readyState===0){aT._wD(a4+'Attempting to load "'+aY.sID+'"',1);if(!aY.isHTML5){aY._iO.autoPlay=true}aY.load(aY._iO)}else{if(aY.readyState===2){aT._wD(a4+'Could not load "'+aY.sID+'" - exiting',2);return aY}else{aT._wD(a4+'"'+aY.sID+'" is loading - attempting to play..',1)}}}else{aT._wD(a4+'"'+aY.sID+'"')}if(!aY.isHTML5&&e===9&&aY.position>0&&aY.position===aY.duration){aT._wD(a4+'"'+aY.sID+'": Sound at end, resetting to position:0');aY._iO.position=0}if(aY.paused&&aY.position&&aY.position>0){aT._wD(a4+'"'+aY.sID+'" is resuming from paused state',1);aY.resume()}else{aT._wD(a4+'"'+aY.sID+'" is starting to play');aY.playState=1;aY.paused=false;if(!aY.instanceCount||aY._iO.multiShotEvents||(!aY.isHTML5&&e>8&&!aY.getAutoPlay())){aY.instanceCount++}aY.position=(typeof aY._iO.position!=="undefined"&&!isNaN(aY._iO.position)?aY._iO.position:0);if(!aY.isHTML5){aY._iO=y(ac(aY._iO))}if(aY._iO.onplay&&a1){aY._iO.onplay.apply(aY);aY._onplay_called=true}aY.setVolume(aY._iO.volume,true);aY.setPan(aY._iO.pan,true);if(!aY.isHTML5){aT.o._start(aY.sID,aY._iO.loops||1,(e===9?aY._iO.position:aY._iO.position/1000))}else{aV();a2=aY._setup_html5();aY.setPosition(aY._iO.position);a2.play()}}return aY};this.start=this.play;this.stop=function(a0){if(aY.playState===1){aY._onbufferchange(0);aY.resetOnPosition(0);if(!aY.isHTML5){aY.playState=0}aY.paused=false;if(aY._iO.onstop){aY._iO.onstop.apply(aY)}if(!aY.isHTML5){aT.o._stop(aY.sID,a0);if(aY._iO.serverURL){aY.unload()}}else{if(aY._a){aY.setPosition(0);aY._a.pause();aY.playState=0;aY._onTimer();aX();aY.unload()}}aY.instanceCount=0;aY._iO={}}return aY};this.setAutoPlay=function(a0){aT._wD("sound "+aY.sID+" turned autoplay "+(a0?"on":"off"));aY._iO.autoPlay=a0;if(!aY.isHTML5){aT.o._setAutoPlay(aY.sID,a0);if(a0){if(!aY.instanceCount&&aY.readyState===1){aY.instanceCount++;aT._wD("sound "+aY.sID+" incremented instance count to "+aY.instanceCount)}}}};this.getAutoPlay=function(){return aY._iO.autoPlay};this.setPosition=function(a3){if(a3===undefined){a3=0}var a2,a0,a1,a5=(aY.isHTML5?Math.max(a3,0):Math.min(aY.duration||aY._iO.duration,Math.max(a3,0)));a2=aY.position;aY.position=a5;a1=aY.position/1000;aY.resetOnPosition(aY.position);aY._iO.position=a5;if(!aY.isHTML5){a0=(e===9?aY.position:a1);if(aY.readyState&&aY.readyState!==2){aT.o._setPosition(aY.sID,a0,(aY.paused||!aY.playState))}}else{if(aY._a){if(aY._html5_canplay){if(aY._a.currentTime!==a1){aT._wD("setPosition("+a1+"): setting position");try{aY._a.currentTime=a1;if(aY.playState===0||aY.paused){aY._a.pause()}}catch(a4){aT._wD("setPosition("+a1+"): setting position failed: "+a4.message,2)}}}else{aT._wD("setPosition("+a1+"): delaying, sound not ready")}}}if(aY.isHTML5){if(aY.paused){aY._onTimer(true)}}return aY};this.pause=function(a0){if(aY.paused||(aY.playState===0&&aY.readyState!==1)){return aY}aT._wD("SMSound.pause()");aY.paused=true;if(!aY.isHTML5){if(a0||a0===undefined){aT.o._pause(aY.sID)}}else{aY._setup_html5().pause();aX()}if(aY._iO.onpause){aY._iO.onpause.apply(aY)}return aY};this.resume=function(){if(!aY.paused){return aY}aT._wD("SMSound.resume()");aY.paused=false;aY.playState=1;if(!aY.isHTML5){if(aY._iO.isMovieStar){aY.setPosition(aY.position)}aT.o._pause(aY.sID)}else{aY._setup_html5().play();aV()}if(!aY._onplay_called&&aY._iO.onplay){aY._iO.onplay.apply(aY);aY._onplay_called=true}else{if(aY._iO.onresume){aY._iO.onresume.apply(aY)}}return aY};this.togglePause=function(){aT._wD("SMSound.togglePause()");if(aY.playState===0){aY.play({position:(e===9&&!aY.isHTML5?aY.position:aY.position/1000)});return aY}if(aY.paused){aY.resume()}else{aY.pause()}return aY};this.setPan=function(a1,a0){if(typeof a1==="undefined"){a1=0}if(typeof a0==="undefined"){a0=false}if(!aY.isHTML5){aT.o._setPan(aY.sID,a1)}aY._iO.pan=a1;if(!a0){aY.pan=a1;aY.options.pan=a1}return aY};this.setVolume=function(a0,a1){if(typeof a0==="undefined"){a0=100}if(typeof a1==="undefined"){a1=false}if(!aY.isHTML5){aT.o._setVolume(aY.sID,(aT.muted&&!aY.muted)||aY.muted?0:a0)}else{if(aY._a){aY._a.volume=Math.max(0,Math.min(1,a0/100))}}aY._iO.volume=a0;if(!a1){aY.volume=a0;aY.options.volume=a0}return aY};this.mute=function(){aY.muted=true;if(!aY.isHTML5){aT.o._setVolume(aY.sID,0)}else{if(aY._a){aY._a.muted=true}}return aY};this.unmute=function(){aY.muted=false;var a0=typeof aY._iO.volume!=="undefined";if(!aY.isHTML5){aT.o._setVolume(aY.sID,a0?aY._iO.volume:aY.options.volume)}else{if(aY._a){aY._a.muted=false}}return aY};this.toggleMute=function(){return(aY.muted?aY.unmute():aY.mute())};this.onposition=function(a2,a1,a0){aY._onPositionItems.push({position:a2,method:a1,scope:(typeof a0!=="undefined"?a0:aY),fired:false});return aY};this.processOnPosition=function(){var a1,a2,a0=aY._onPositionItems.length;if(!a0||!aY.playState||aY._onPositionFired>=a0){return false}for(a1=a0;a1--;){a2=aY._onPositionItems[a1];if(!a2.fired&&aY.position>=a2.position){a2.method.apply(a2.scope,[a2.position]);a2.fired=true;aT._onPositionFired++}}return true};this.resetOnPosition=function(a0){var a2,a3,a1=aY._onPositionItems.length;if(!a1){return false}for(a2=a1;a2--;){a3=aY._onPositionItems[a2];if(a3.fired&&a0<=a3.position){a3.fired=false;aT._onPositionFired--}}return true};aV=function(){if(aY.isHTML5){w(aY)}};aX=function(){if(aY.isHTML5){T(aY)}};aZ=function(){aY._onPositionItems=[];aY._onPositionFired=0;aY._hasTimer=null;aY._onplay_called=false;aY._a=null;aY._html5_canplay=false;aY.bytesLoaded=null;aY.bytesTotal=null;aY.position=null;aY.duration=(aY._iO&&aY._iO.duration?aY._iO.duration:null);aY.durationEstimate=null;aY.failures=0;aY.loaded=false;aY.playState=0;aY.paused=false;aY.readyState=0;aY.muted=false;aY.didBeforeFinish=false;aY.didJustBeforeFinish=false;aY.isBuffering=false;aY.instanceOptions={};aY.instanceCount=0;aY.peakData={left:0,right:0};aY.waveformData={left:[],right:[]};aY.eqData=[];aY.eqData.left=[];aY.eqData.right=[]};aZ();this._onTimer=function(a1){var a2,a0={};if(aY._hasTimer||a1){if(aY._a&&(a1||((aY.playState>0||aY.readyState===1)&&!aY.paused))){aY.duration=aY._get_html5_duration();aY.durationEstimate=aY.duration;a2=aY._a.currentTime?aY._a.currentTime*1000:0;aY._whileplaying(a2,a0,a0,a0,a0);return true}else{aT._wD('_onTimer: Warn for "'+aY.sID+'": '+(!aY._a?"Could not find element. ":"")+(aY.playState===0?"playState bad, 0?":"playState = "+aY.playState+", OK"));return false}}};this._get_html5_duration=function(){var a1=(aY._a?aY._a.duration*1000:(aY._iO?aY._iO.duration:undefined)),a0=(a1&&!isNaN(a1)&&a1!==Infinity?a1:(aY._iO?aY._iO.duration:null));return a0};this._setup_html5=function(a2){var a1=al(aY._iO,a2),a5=decodeURI,a3=aM?aT._global_a:aY._a,a4=a5(a1.url),a0=(a3&&a3._t?a3._t.instanceOptions:null);if(a3){if(a3._t&&a0.url===a1.url&&(!aY._lastURL||(aY._lastURL===a0.url))){return a3}aT._wD("setting new URL on existing object: "+a4+(aY._lastURL?", old URL: "+aY._lastURL:""));if(aM&&a3._t&&a3._t.playState&&a1.url!==a0.url){a3._t.stop()}aZ();a3.src=a1.url;aY.url=a1.url;aY._lastURL=a1.url;a3._called_load=false}else{aT._wD("creating HTML5 Audio() element with URL: "+a4);a3=new Audio(a1.url);a3._called_load=false;if(aM){aT._global_a=a3}}aY.isHTML5=true;aY._a=a3;a3._t=aY;aY._add_html5_events();a3.loop=(a1.loops>1?"loop":"");if(a1.autoLoad||a1.autoPlay){a3.autobuffer="auto";a3.preload="auto";aY.load();a3._called_load=true}else{a3.autobuffer=false;a3.preload="none"}a3.loop=(a1.loops>1?"loop":"");return a3};this._add_html5_events=function(){if(aY._a._added_events){return false}var a0;function a1(a3,a2,a4){return aY._a?aY._a.addEventListener(a3,a2,a4||false):null}aT._wD(aI+"adding event listeners: "+aY.sID);aY._a._added_events=true;for(a0 in t){if(t.hasOwnProperty(a0)){a1(a0,t[a0])}}return true};this._remove_html5_events=function(){var a1;function a0(a3,a2,a4){return(aY._a?aY._a.removeEventListener(a3,a2,a4||false):null)}aT._wD(aI+"removing event listeners: "+aY.sID);aY._a._added_events=false;for(a1 in t){if(t.hasOwnProperty(a1)){a0(a1,t[a1])}}};this._onload=function(a2){var a0="SMSound._onload(): ",a1=(a2?true:false);aT._wD(a0+'"'+aY.sID+'"'+(a1?" loaded.":" failed to load? - "+aY.url),(a1?1:2));if(!a1&&!aY.isHTML5){if(aT.sandbox.noRemote===true){aT._wD(a0+aa("noNet"),1)}if(aT.sandbox.noLocal===true){aT._wD(a0+aa("noLocal"),1)}}aY.loaded=a1;aY.readyState=a1?3:2;aY._onbufferchange(0);if(aY._iO.onload){aY._iO.onload.apply(aY,[a1])}return true};this._onbufferchange=function(a0){var a1="SMSound._onbufferchange()";if(aY.playState===0){return false}if((a0&&aY.isBuffering)||(!a0&&!aY.isBuffering)){return false}aY.isBuffering=(a0===1);if(aY._iO.onbufferchange){aT._wD(a1+": "+a0);aY._iO.onbufferchange.apply(aY)}return true};this._onfailure=function(a1,a2,a0){aY.failures++;aT._wD('SMSound._onfailure(): "'+aY.sID+'" count '+aY.failures);if(aY._iO.onfailure&&aY.failures===1){aY._iO.onfailure(aY,a1,a2,a0)}else{aT._wD("SMSound._onfailure(): ignoring")}};this._onbeforefinish=function(){if(!aY.didBeforeFinish){aY.didBeforeFinish=true;if(aY._iO.onbeforefinish){aT._wD('SMSound._onbeforefinish(): "'+aY.sID+'"');aY._iO.onbeforefinish.apply(aY)}}};this._onjustbeforefinish=function(a0){if(!aY.didJustBeforeFinish){aY.didJustBeforeFinish=true;if(aY._iO.onjustbeforefinish){aT._wD('SMSound._onjustbeforefinish(): "'+aY.sID+'"');aY._iO.onjustbeforefinish.apply(aY)}}};this._onfinish=function(){var a0=aY._iO.onfinish;aY._onbufferchange(0);aY.resetOnPosition(0);if(aY._iO.onbeforefinishcomplete){aY._iO.onbeforefinishcomplete.apply(aY)}aY.didBeforeFinish=false;aY.didJustBeforeFinish=false;if(aY.instanceCount){aY.instanceCount--;if(!aY.instanceCount){aY.playState=0;aY.paused=false;aY.instanceCount=0;aY.instanceOptions={};aY._iO={};aX()}if(!aY.instanceCount||aY._iO.multiShotEvents){if(a0){aT._wD('SMSound._onfinish(): "'+aY.sID+'"');a0.apply(aY)}}}};this._whileloading=function(a0,a1,a3,a2){aY.bytesLoaded=a0;aY.bytesTotal=a1;aY.duration=Math.floor(a3);aY.bufferLength=a2;if(!aY._iO.isMovieStar){if(aY._iO.duration){aY.durationEstimate=(aY.duration>aY._iO.duration)?aY.duration:aY._iO.duration}else{aY.durationEstimate=parseInt((aY.bytesTotal/aY.bytesLoaded)*aY.duration,10)}if(aY.durationEstimate===undefined){aY.durationEstimate=aY.duration}if(aY.readyState!==3&&aY._iO.whileloading){aY._iO.whileloading.apply(aY)}}else{aY.durationEstimate=aY.duration;if(aY.readyState!==3&&aY._iO.whileloading){aY._iO.whileloading.apply(aY)}}};this._whileplaying=function(a2,a3,a5,a1,a4){if(isNaN(a2)||a2===null){return false}aY.position=a2;aY.processOnPosition();if(!aY.isHTML5&&e>8){if(aY._iO.usePeakData&&typeof a3!=="undefined"&&a3){aY.peakData={left:a3.leftPeak,right:a3.rightPeak}}if(aY._iO.useWaveformData&&typeof a5!=="undefined"&&a5){aY.waveformData={left:a5.split(","),right:a1.split(",")}}if(aY._iO.useEQData){if(typeof a4!=="undefined"&&a4&&a4.leftEQ){var a0=a4.leftEQ.split(",");aY.eqData=a0;aY.eqData.left=a0;if(typeof a4.rightEQ!=="undefined"&&a4.rightEQ){aY.eqData.right=a4.rightEQ.split(",")}}}}if(aY.playState===1){if(!aY.isHTML5&&aT.flashVersion===8&&!aY.position&&aY.isBuffering){aY._onbufferchange(0)}if(aY._iO.whileplaying){aY._iO.whileplaying.apply(aY)}if((aY.loaded||(!aY.loaded&&aY._iO.isMovieStar))&&aY._iO.onbeforefinish&&aY._iO.onbeforefinishtime&&!aY.didBeforeFinish&&aY.duration-aY.position<=aY._iO.onbeforefinishtime){aY._onbeforefinish()}}return true};this._onid3=function(a3,a0){aT._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var a4=[],a2,a1;for(a2=0,a1=a3.length;a2<a1;a2++){a4[a3[a2]]=a0[a2]}aY.id3=al(aY.id3,a4);if(aY._iO.onid3){aY._iO.onid3.apply(aY)}};this._onconnect=function(a0){var a1="SMSound._onconnect(): ";a0=(a0===1);aT._wD(a1+'"'+aY.sID+'"'+(a0?" connected.":" failed to connect? - "+aY.url),(a0?1:2));aY.connected=a0;if(a0){aY.failures=0;if(ag(aY.sID)){if(aY.getAutoPlay()){aY.play(undefined,aY.getAutoPlay())}else{if(aY._iO.autoLoad){aY.load()}}}if(aY._iO.onconnect){aY._iO.onconnect.apply(aY,[a0])}}};this._ondataerror=function(a0){if(aY.playState>0){aT._wD("SMSound._ondataerror(): "+a0);if(aY._iO.ondataerror){aY._iO.ondataerror.apply(aY)}}}};aq=function(){return(aG.body||aG._docElement||aG.getElementsByTagName("div")[0])};Z=function(aV){return aG.getElementById(aV)};al=function(aW,aV){var aZ={},aX,aY,a0;for(aX in aW){if(aW.hasOwnProperty(aX)){aZ[aX]=aW[aX]}}aY=(typeof aV==="undefined"?aT.defaultOptions:aV);for(a0 in aY){if(aY.hasOwnProperty(a0)&&typeof aZ[a0]==="undefined"){aZ[a0]=aY[a0]}}return aZ};r=(function(){var aX=(k.attachEvent),aW={add:(aX?"attachEvent":"addEventListener"),remove:(aX?"detachEvent":"removeEventListener")};function aZ(a3){var a2=j.call(a3),a1=a2.length;if(aX){a2[1]="on"+a2[1];if(a1>3){a2.pop()}}else{if(a1===3){a2.push(false)}}return a2}function aY(a1,a4){var a2=a1.shift(),a3=[aW[a4]];if(aX){a2[a3](a1[0],a1[1])}else{a2[a3].apply(a2,a1)}}function a0(){aY(aZ(arguments),"add")}function aV(){aY(aZ(arguments),"remove")}return{add:a0,remove:aV}}());E=function(aV){return(!aV.serverURL&&(aV.type?ax({type:aV.type}):ax({url:aV.url})||aT.html5Only))};ax=function(aY){if(!aT.useHTML5Audio||!aT.hasHTML5){return false}var aW=(aY.url||null),aV=(aY.type||null),aZ=aT.audioFormats,a3,a0,a2,a1;function aX(a4){return(aT.preferFlash&&g&&!aT.ignoreFlash&&(typeof aT.flash[a4]!=="undefined"&&aT.flash[a4]))}if(aV&&aT.html5[aV]!=="undefined"){return(aT.html5[aV]&&!aX(aV))}if(!p){p=[];for(a1 in aZ){if(aZ.hasOwnProperty(a1)){p.push(a1);if(aZ[a1].related){p=p.concat(aZ[a1].related)}}}p=new RegExp("\\.("+p.join("|")+")(\\?.*)?$","i")}a2=(aW?aW.toLowerCase().match(p):null);if(!a2||!a2.length){if(!aV){return false}else{a0=aV.indexOf(";");a2=(a0!==-1?aV.substr(0,a0):aV).substr(6)}}else{a2=a2[1]}if(a2&&typeof aT.html5[a2]!=="undefined"){return(aT.html5[a2]&&!aX(a2))}else{aV="audio/"+a2;a3=aT.html5.canPlayType({type:aV});aT.html5[a2]=a3;return(a3&&aT.html5[aV]&&!aX(aV))}};aR=function(){if(!aT.useHTML5Audio||typeof Audio==="undefined"){return false}var aV=(typeof Audio!=="undefined"?(L?new Audio(null):new Audio()):null),a0,aZ={},aX,aY;function aW(a2){var a4,a5,a3,a1=false;if(!aV||typeof aV.canPlayType!=="function"){return false}if(a2 instanceof Array){for(a5=0,a3=a2.length;a5<a3&&!a1;a5++){if(aT.html5[a2[a5]]||aV.canPlayType(a2[a5]).match(aT.html5Test)){a1=true;aT.html5[a2[a5]]=true;aT.flash[a2[a5]]=!!(aT.preferFlash&&g&&a2[a5].match(Q))}}return a1}else{a4=(aV&&typeof aV.canPlayType==="function"?aV.canPlayType(a2):false);return !!(a4&&(a4.match(aT.html5Test)))}}aX=aT.audioFormats;for(a0 in aX){if(aX.hasOwnProperty(a0)){aZ[a0]=aW(aX[a0].type);aZ["audio/"+a0]=aZ[a0];if(aT.preferFlash&&!aT.ignoreFlash&&a0.match(Q)){aT.flash[a0]=true}else{aT.flash[a0]=false}if(aX[a0]&&aX[a0].related){for(aY=aX[a0].related.length;aY--;){aZ["audio/"+aX[a0].related[aY]]=aZ[a0];aT.html5[aX[a0].related[aY]]=aZ[a0];aT.flash[aX[a0].related[aY]]=aZ[a0]}}}}aZ.canPlayType=(aV?aW:null);aT.html5=al(aT.html5,aZ);return true};O={notReady:"Not loaded yet - wait for soundManager.onload()/onready()",notOK:"Audio support is not available.",domError:ar+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:ar+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:aC+": Verify that %s is a valid path.",tryDebug:"Try "+aC+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:aC+": Non-HTTP page ("+aG.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:aC+": Special case: Waiting for focus-related event..",waitImpatient:aC+": Getting impatient, still waiting for Flash%s...",waitForever:aC+": Waiting indefinitely for Flash (will recover if unblocked)...",needFunction:aC+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',noMS:"MovieStar mode not enabled. Exiting.",currentObj:"--- "+aC+"._debug(): Current sound objects ---",waitEI:ar+"initMovie(): Waiting for ExternalInterface call from Flash..",waitOnload:aC+": Waiting for window.onload()",docLoaded:aC+": Document already loaded",onload:ar+"initComplete(): calling soundManager.onload()",onloadOK:aC+".onload() complete",init:ar+"init()",didInit:ar+"init(): Already called?",flashJS:aC+": Attempting to call Flash from JS..",noPolling:aC+": Polling (whileloading()/whileplaying() support) is disabled.",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",noPeak:"Warning: peakData features unsupported for movieStar formats",shutdown:aC+".disable(): Shutting down",queue:aC+": Queueing %s handler",smFail:aC+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+aT.swfCSS.swfTimedout+" CSS..",fbLoaded:"Flash loaded",fbHandler:ar+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:aC+".load(): current URL already assigned.",badFV:aC+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access"};aa=function(){var aW=j.call(arguments),aZ=aW.shift(),aY=(O&&O[aZ]?O[aZ]:""),aX,aV;if(aY&&aW&&aW.length){for(aX=0,aV=aW.length;aX<aV;aX++){aY=aY.replace("%s",aW[aX])}}return aY};ac=function(aV){if(e===8&&aV.loops>1&&aV.stream){C("as2loop");aV.stream=false}return aV};y=function(aW,aV){if(aW&&!aW.usePolicyFile&&(aW.onid3||aW.usePeakData||aW.useWaveformData||aW.useEQData)){aT._wD((aV||"")+aa("policy"));aW.usePolicyFile=true}return aW};d=function(aV){if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){console.warn(aV)}else{aT._wD(aV)}};af=function(){return false};X=function(aW){var aV;for(aV in aW){if(aW.hasOwnProperty(aV)&&typeof aW[aV]==="function"){aW[aV]=af}}aV=null};ap=function(aV){if(typeof aV==="undefined"){aV=false}if(J||aV){C("smFail",2);aT.disable(aV)}};h=function(aV){var aW=null;if(aV){if(aV.match(/\.swf(\?.*)?$/i)){aW=aV.substr(aV.toLowerCase().lastIndexOf(".swf?")+4);if(aW){return aV}}else{if(aV.lastIndexOf("/")!==aV.length-1){aV=aV+"/"}}}return(aV&&aV.lastIndexOf("/")!==-1?aV.substr(0,aV.lastIndexOf("/")+1):"./")+aT.movieURL};N=function(){if(e!==8&&e!==9){aT._wD(aa("badFV",e,R));aT.flashVersion=R}var aV=(aT.debugMode||aT.debugFlash?"_debug.swf":".swf");if(aT.useHTML5Audio&&!aT.html5Only&&aT.audioFormats.mp4.required&&aT.flashVersion<9){aT._wD(aa("needfl9"));aT.flashVersion=9}e=aT.flashVersion;aT.version=aT.versionNumber+(aT.html5Only?" (HTML5-only mode)":(e===9?" (AS3/Flash 9)":" (AS2/Flash 8)"));if(e>8){aT.defaultOptions=al(aT.defaultOptions,aT.flash9Options);aT.features.buffering=true}if(e>8&&aT.useMovieStar){aT.defaultOptions=al(aT.defaultOptions,aT.movieStarOptions);aT.filePatterns.flash9=new RegExp("\\.(mp3|"+aT.netStreamTypes.join("|")+")(\\?.*)?$","i");aT.mimePattern=aT.netStreamMimeTypes;aT.features.movieStar=true}else{aT.useMovieStar=false;aT.features.movieStar=false}aT.filePattern=aT.filePatterns[(e!==8?"flash9":"flash8")];aT.movieURL=(e===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",aV);aT.features.peakData=aT.features.waveformData=aT.features.eqData=(e>8)};an=function(aV,aW){if(!aT.o||!aT.allowPolling){return false}aT.o._setPolling(aV,aW)};I=function(){if(aT.debugURLParam.test(l)){aT.debugMode=true}if(Z(aT.debugID)){return false}var a0,aZ,aV,aX,aW;if(aT.debugMode&&!Z(aT.debugID)&&((!aB||!aT.useConsole)||(aT.useConsole&&aB&&!aT.consoleOnly))){a0=aG.createElement("div");a0.id=aT.debugID+"-toggle";aX={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};a0.appendChild(aG.createTextNode("-"));a0.onclick=z;a0.title="Toggle SM2 debug console";if(ad.match(/msie 6/i)){a0.style.position="absolute";a0.style.cursor="hand"}for(aW in aX){if(aX.hasOwnProperty(aW)){a0.style[aW]=aX[aW]}}aZ=aG.createElement("div");aZ.id=aT.debugID;aZ.style.display=(aT.debugMode?"block":"none");if(aT.debugMode&&!Z(a0.id)){try{aV=aq();aV.appendChild(a0)}catch(aY){throw new Error(aa("domError")+" \n"+aY.toString())}aV.appendChild(aZ)}}aV=null};ag=this.getSoundById;C=function(aW,aV){if(!aW){return""}else{return aT._wD(aa(aW),aV)}};if(l.indexOf("sm2-debug=alert")+1&&aT.debugMode){aT._wD=function(aV){c.alert(aV)}}z=function(){var aW=Z(aT.debugID),aV=Z(aT.debugID+"-toggle");if(!aW){return false}if(m){aV.innerHTML="+";aW.style.display="none"}else{aV.innerHTML="-";aW.style.display="block"}m=!m};ai=function(aY,aV,aW){if(typeof sm2Debugger!=="undefined"){try{sm2Debugger.handleEvent(aY,aV,aW)}catch(aX){}}return true};M=function(){var aV=[];if(aT.debugMode){aV.push(aT.swfCSS.sm2Debug)}if(aT.debugFlash){aV.push(aT.swfCSS.flashDebug)}if(aT.useHighPerformance){aV.push(aT.swfCSS.highPerf)}return aV.join(" ")};i=function(){var aW=aa("fbHandler"),aY=aT.getMoviePercent(),aX=aT.swfCSS,aV={type:"FLASHBLOCK"};if(aT.html5Only){return false}if(!aT.ok()){if(aj){aT.oMC.className=M()+" "+aX.swfDefault+" "+(aY===null?aX.swfTimedout:aX.swfError);aT._wD(aW+": "+aa("fbTimeout")+(aY?" ("+aa("fbLoaded")+")":""))}aT.didFlashBlock=true;aS({type:"ontimeout",ignoreInit:true,error:aV});aD(aV)}else{if(aT.didFlashBlock){aT._wD(aW+": Unblocked")}if(aT.oMC){aT.oMC.className=[M(),aX.swfDefault,aX.swfLoaded+(aT.didFlashBlock?" "+aX.swfUnblocked:"")].join(" ")}}};aO=function(aX,aW,aV){if(typeof am[aX]==="undefined"){am[aX]=[]}am[aX].push({method:aW,scope:(aV||null),fired:false})};aS=function(a1){if(!a1){a1={type:"onready"}}if(!aL&&a1&&!a1.ignoreInit){return false}if(a1.type==="ontimeout"&&aT.ok()){return false}var aX={success:(a1&&a1.ignoreInit?aT.ok():!J)},aW=(a1&&a1.type?am[a1.type]||[]:[]),aV=[],a2,a0,aZ=[aX],aY=(aj&&aT.useFlashBlock&&!aT.ok());if(a1.error){aZ[0].error=a1.error}for(a2=0,a0=aW.length;a2<a0;a2++){if(aW[a2].fired!==true){aV.push(aW[a2])}}if(aV.length){aT._wD(aC+": Firing "+aV.length+" "+a1.type+"() item"+(aV.length===1?"":"s"));for(a2=0,a0=aV.length;a2<a0;a2++){if(aV[a2].scope){aV[a2].method.apply(aV[a2].scope,aZ)}else{aV[a2].method.apply(this,aZ)}if(!aY){aV[a2].fired=true}}}return true};at=function(){k.setTimeout(function(){if(aT.useFlashBlock){i()}aS();if(aT.onload instanceof Function){C("onload",1);aT.onload.apply(k);C("onloadOK",1)}if(aT.waitForWindowLoad){r.add(k,"load",at)}},1)};aQ=function(){if(g!==undefined){return g}var aV=false,a2=navigator,aY=a2.plugins,a1,aX,aW,a0=k.ActiveXObject;if(aY&&aY.length){aX="application/x-shockwave-flash";aW=a2.mimeTypes;if(aW&&aW[aX]&&aW[aX].enabledPlugin&&aW[aX].enabledPlugin.description){aV=true}}else{if(typeof a0!=="undefined"){try{a1=new a0("ShockwaveFlash.ShockwaveFlash")}catch(aZ){}aV=(!!a1)}}g=aV;return aV};ah=function(){var aX,aW,aV=(ad.match(/iphone os (1|2|3_0|3_1)/i)?true:false);if(aV){aT.hasHTML5=false;aT.html5Only=true;if(aT.oMC){aT.oMC.style.display="none"}return false}if(aT.useHTML5Audio){if(!aT.html5||!aT.html5.canPlayType){aT._wD("SoundManager: No HTML5 Audio() support detected.");aT.hasHTML5=false;return true}else{aT.hasHTML5=true}if(ao){aT._wD(ar+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!g?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1);if(aQ()){return true}}}else{return true}for(aW in aT.audioFormats){if(aT.audioFormats.hasOwnProperty(aW)){if((aT.audioFormats[aW].required&&!aT.html5.canPlayType(aT.audioFormats[aW].type))||aT.flash[aW]||aT.flash[aT.audioFormats[aW].type]){aX=true}}}if(aT.ignoreFlash){aX=false}aT.html5Only=(aT.hasHTML5&&aT.useHTML5Audio&&!aX);return(!aT.html5Only)};w=function(aV){if(!aV._hasTimer){aV._hasTimer=true}};T=function(aV){if(aV._hasTimer){aV._hasTimer=false}};aD=function(aV){aV=(typeof aV!=="undefined"?aV:{});if(aT.onerror instanceof Function){aT.onerror.apply(k,[{type:(typeof aV.type!=="undefined"?aV.type:null)}])}if(typeof aV.fatal!=="undefined"&&aV.fatal){aT.disable()}};ab=function(){if(!ao||!aQ()){return false}var aV=aT.audioFormats,aW,aX;for(aX in aV){if(aV.hasOwnProperty(aX)){if(aX==="mp3"||aX==="mp4"){aT._wD(aC+": Using flash fallback for "+aX+" format");aT.html5[aX]=false;if(aV[aX]&&aV[aX].related){for(aW=aV[aX].related.length;aW--;){aT.html5[aV[aX].related[aW]]=false}}}}}};this._setSandboxType=function(aV){var aW=aT.sandbox;aW.type=aV;aW.description=aW.types[(typeof aW.types[aV]!=="undefined"?aV:"unknown")];aT._wD("Flash security sandbox type: "+aW.type);if(aW.type==="localWithFile"){aW.noRemote=true;aW.noLocal=false;C("secNote",2)}else{if(aW.type==="localWithNetwork"){aW.noRemote=false;aW.noLocal=true}else{if(aW.type==="localTrusted"){aW.noRemote=false;aW.noLocal=false}}}};this._externalInterfaceOK=function(aV){if(aT.swfLoaded){return false}var aW=new Date().getTime();aT._wD(ar+"externalInterfaceOK()"+(aV?" (~"+(aW-aV)+" ms)":""));ai("swf",true);ai("flashtojs",true);aT.swfLoaded=true;ae=false;if(ao){ab()}if(f){setTimeout(ay,100)}else{ay()}};aK=function(ba,a0){if(aw&&aN){return false}function a8(){aT._wD("-- SoundManager 2 "+aT.version+(!aT.html5Only&&aT.useHTML5Audio?(aT.hasHTML5?" + HTML5 audio":", no HTML5 audio support"):"")+(!aT.html5Only?(aT.useMovieStar?", MovieStar mode":"")+(aT.useHighPerformance?", high performance mode, ":", ")+((aT.flashPollingInterval?"custom ("+aT.flashPollingInterval+"ms)":(aT.useFastPolling?"fast":"normal"))+" polling")+(aT.wmode?", wmode: "+aT.wmode:"")+(aT.debugFlash?", flash debug mode":"")+(aT.useFlashBlock?", flashBlock mode":""):"")+" --",1)}if(aT.html5Only){N();a8();aT.oMC=Z(aT.movieID);ay();aw=true;aN=true;return false}var a9=(a0||aT.url),a4=(aT.altURL||a9),bf="JS/Flash audio component (SoundManager 2)",bc,a1,a7=aq(),bd,a5,a3,a6=M(),a2,aY,be,aV="auto",aW=null,aZ=aG.getElementsByTagName("html")[0];aW=(aZ&&aZ.dir&&aZ.dir.match(/rtl/i));ba=(typeof ba==="undefined"?aT.id:ba);function aX(bg,bh){return'<param name="'+bg+'" value="'+bh+'" />'}N();aT.url=h(av?a9:a4);a0=aT.url;aT.wmode=(!aT.wmode&&aT.useHighPerformance&&!aT.useMovieStar?"transparent":aT.wmode);if(aT.wmode!==null&&(ad.match(/msie 8/i)||(!f&&!aT.useHighPerformance))&&navigator.platform.match(/win32|win64/i)){aT.specialWmodeCase=true;C("spcWmode");aT.wmode=null}bc={name:ba,id:ba,src:a0,width:aV,height:aV,quality:"high",allowScriptAccess:aT.allowScriptAccess,bgcolor:aT.bgColor,pluginspage:az+"//www.macromedia.com/go/getflashplayer",title:bf,type:"application/x-shockwave-flash",wmode:aT.wmode,hasPriority:"true"};if(aT.debugFlash){bc.FlashVars="debug=1"}if(!aT.wmode){delete bc.wmode}if(f){a1=aG.createElement("div");a5=['<object id="'+ba+'" data="'+a0+'" type="'+bc.type+'" title="'+bc.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+az+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+bc.width+'" height="'+bc.height+'">',aX("movie",a0),aX("AllowScriptAccess",aT.allowScriptAccess),aX("quality",bc.quality),(aT.wmode?aX("wmode",aT.wmode):""),aX("bgcolor",aT.bgColor),aX("hasPriority","true"),(aT.debugFlash?aX("FlashVars",bc.FlashVars):""),"</object>"].join("")}else{a1=aG.createElement("embed");for(bd in bc){if(bc.hasOwnProperty(bd)){a1.setAttribute(bd,bc[bd])}}}I();a6=M();a7=aq();if(a7){aT.oMC=(Z(aT.movieID)||aG.createElement("div"));if(!aT.oMC.id){aT.oMC.id=aT.movieID;aT.oMC.className=aT.swfCSS.swfDefault+" "+a6;a2=null;a3=null;if(!aT.useFlashBlock){if(aT.useHighPerformance){a2={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{a2={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(aW){a2.left=Math.abs(parseInt(a2.left,10))+"px"}}}if(n){aT.oMC.style.zIndex=10000}if(!aT.debugFlash){for(aY in a2){if(a2.hasOwnProperty(aY)){aT.oMC.style[aY]=a2[aY]}}}try{if(!f){aT.oMC.appendChild(a1)}a7.appendChild(aT.oMC);if(f){a3=aT.oMC.appendChild(aG.createElement("div"));a3.className=aT.swfCSS.swfBox;a3.innerHTML=a5}aN=true}catch(bb){throw new Error(aa("domError")+" \n"+bb.toString())}}else{be=aT.oMC.className;aT.oMC.className=(be?be+" ":aT.swfCSS.swfDefault)+(a6?" "+a6:"");aT.oMC.appendChild(a1);if(f){a3=aT.oMC.appendChild(aG.createElement("div"));a3.className=aT.swfCSS.swfBox;a3.innerHTML=a5}aN=true}}aw=true;a8();aT._wD(ar+"createMovie(): Trying to load "+a0+(!av&&aT.altURL?" (alternate URL)":""),1);return true};s=function(){if(aT.html5Only){aK();return false}if(aT.o){return false}aT.o=aT.getMovie(aT.id);if(!aT.o){if(!o){aK(aT.id,aT.url)}else{if(!f){aT.oMC.appendChild(o)}else{aT.oMC.innerHTML=au}o=null;aw=true}aT.o=aT.getMovie(aT.id)}if(aT.o){C("waitEI")}if(aT.oninitmovie instanceof Function){setTimeout(aT.oninitmovie,1)}return true};ak=function(){setTimeout(u,1000)};u=function(){if(aU){return false}aU=true;r.remove(k,"load",ak);if(ae&&!aH){C("waitFocus");return false}var aV;if(!aL){aV=aT.getMoviePercent();aT._wD(aa("waitImpatient",(aV===100?" (SWF loaded)":(aV>0?" (SWF "+aV+"% loaded)":""))))}setTimeout(function(){aV=aT.getMoviePercent();if(!aL){aT._wD(aC+": No Flash response within expected time.\nLikely causes: "+(aV===0?"Loading "+aT.movieURL+" may have failed (and/or Flash "+e+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(aT.debugFlash?" "+aa("checkSWF"):""),2);if(!av&&aV){C("localFail",2);if(!aT.debugFlash){C("tryDebug",2)}}if(aV===0){aT._wD(aa("swf404",aT.url))}ai("flashtojs",false,": Timed out"+av?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!aL&&K){if(aV===null){if(aT.useFlashBlock||aT.flashLoadTimeout===0){if(aT.useFlashBlock){i()}C("waitForever")}else{ap(true)}}else{if(aT.flashLoadTimeout===0){C("waitForever")}else{ap(true)}}}},aT.flashLoadTimeout)};aE=function(){function aV(){r.remove(k,"focus",aE);r.remove(k,"load",aE)}if(aH||!ae){aV();return true}K=true;aH=true;aT._wD(ar+"handleFocus()");if(F&&ae){r.remove(k,"mousemove",aE)}aU=false;aV();return true};W=function(aX){if(aL){return false}if(aT.html5Only){aT._wD("-- SoundManager 2: loaded --");aL=true;at();ai("onload",true);return true}var aV=(aT.useFlashBlock&&aT.flashLoadTimeout&&!aT.getMoviePercent()),aW;if(!aV){aL=true;if(J){aW={type:(!g&&aj?"NO_FLASH":"INIT_TIMEOUT")}}}aT._wD("-- SoundManager 2 "+(J?"failed to load":"loaded")+" ("+(J?"security/load error":"OK")+") --",1);if(J||aX){if(aT.useFlashBlock&&aT.oMC){aT.oMC.className=M()+" "+(aT.getMoviePercent()===null?aT.swfCSS.swfTimedout:aT.swfCSS.swfError)}aS({type:"ontimeout",error:aW});ai("onload",false);aD(aW);return false}else{ai("onload",true)}r.add(k,"unload",af);if(aT.waitForWindowLoad&&!v){C("waitOnload");r.add(k,"load",at);return false}else{if(aT.waitForWindowLoad&&v){C("docLoaded")}at()}return true};D=function(){var aW,aV=[];if(aT.useHTML5Audio&&aT.hasHTML5){for(aW in aT.audioFormats){if(aT.audioFormats.hasOwnProperty(aW)){aV.push(aW+": "+aT.html5[aW]+(!aT.html5[aW]&&g&&aT.flash[aW]?" (using flash)":(aT.preferFlash&&aT.flash[aW]&&g?" (preferring flash)":(!aT.html5[aW]?" ("+(aT.audioFormats[aW].required?"required, ":"")+"and no flash support)":""))))}}aT._wD("-- SoundManager 2: HTML5 support tests ("+aT.html5Test+"): "+aV.join(", ")+" --",1)}};ay=function(){C("init");if(aL){C("didInit");return false}function aV(){r.remove(k,"load",aT.beginDelayedInit)}if(aT.html5Only){if(!aL){aV();aT.enabled=true;W()}return true}s();try{C("flashJS");aT.o._externalInterfaceTest(false);if(!aT.allowPolling){C("noPolling",1)}else{an(true,(aT.flashPollingInterval||(aT.useFastPolling?10:50)))}if(!aT.debugMode){aT.o._disableDebug()}aT.enabled=true;ai("jstoflash",true)}catch(aW){aT._wD("js/flash exception: "+aW.toString());ai("jstoflash",false);aD({type:"JS_TO_FLASH_EXCEPTION",fatal:true});ap(true);W();return false}W();aV();return true};aP=function(){if(aA){return false}aA=true;I();(function(){var aZ="sm2-usehtml5audio=",aY=l.toLowerCase(),aX=null,aW="sm2-preferflash=",a0=null,aV=(typeof console!=="undefined"&&typeof console.log!=="undefined");if(aY.indexOf(aZ)!==-1){aX=(aY.charAt(aY.indexOf(aZ)+aZ.length)==="1");if(aV){console.log((aX?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}aT.useHTML5Audio=aX}if(aY.indexOf(aW)!==-1){a0=(aY.charAt(aY.indexOf(aW)+aW.length)==="1");if(aV){console.log((a0?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}aT.preferFlash=a0}}());if(!g&&aT.hasHTML5){aT._wD("SoundManager: No Flash detected"+(!aT.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."));aT.useHTML5Audio=true;aT.preferFlash=false}aR();aT.html5.usingFlash=ah();aj=aT.html5.usingFlash;D();if(!g&&aj){aT._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available.");aT.flashLoadTimeout=1}if(aG.removeEventListener){aG.removeEventListener("DOMContentLoaded",aP,false)}s();return true};U=function(){if(aG.readyState==="complete"){aP();aG.detachEvent("onreadystatechange",U)}return true};aQ();r.add(k,"focus",aE);r.add(k,"load",aE);r.add(k,"load",ak);if(F&&ae){r.add(k,"mousemove",aE)}if(aG.addEventListener){aG.addEventListener("DOMContentLoaded",aP,false)}else{if(aG.attachEvent){aG.attachEvent("onreadystatechange",U)}else{ai("onload",false);aD({type:"NO_DOM2_EVENTS",fatal:true})}}if(aG.readyState==="complete"){setTimeout(aP,100)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){b=new a()}c.SoundManager=a;c.soundManager=b}(window));(function(i,j,c,h,l,f,b){j.seedrandom=function g(m,q){var o=[];var n;m=k(a(q?[m,i]:arguments.length?m:[new Date().getTime(),i,window],3),o);n=new e(o);k(n.S,i);j.random=function p(){var t=n.g(h);var s=b;var r=0;while(t<l){t=(t+r)*c;s*=c;r=n.g(1)}while(t>=f){t/=2;s/=2;r>>>=1}return(t+r)/s};return m};function e(r){var q,o,v=this,s=r.length;var p=0,n=v.i=v.j=v.m=0;v.S=[];v.c=[];if(!s){r=[s++]}while(p<c){v.S[p]=p++}for(p=0;p<c;p++){q=v.S[p];n=d(n+q+r[p%s]);o=v.S[n];v.S[p]=o;v.S[n]=q}v.g=function m(D){var B=v.S;var A=d(v.i+1);var z=B[A];var y=d(v.j+z);var w=B[y];B[A]=w;B[y]=z;var C=B[d(z+w)];while(--D){A=d(A+1);z=B[A];y=d(y+z);w=B[y];B[A]=w;B[y]=z;C=C*c+B[d(z+w)]}v.i=A;v.j=y;return C};v.g(c)}function a(p,q,m,r,n){m=[];n=typeof(p);if(q&&n=="object"){for(r in p){if(r.indexOf("S")<5){try{m.push(a(p[r],q-1))}catch(o){}}}}return(m.length?m:p+(n!="string"?"\0":""))}function k(m,o,p,n){m+="";p=0;for(n=0;n<m.length;n++){o[d(n)]=d((p^=o[d(n)]*19)+m.charCodeAt(n))}m="";for(n in o){m+=String.fromCharCode(o[n])}return m}function d(m){return m&(c-1)}b=j.pow(c,h);l=j.pow(2,l);f=l*2;k(j.random(),i)})([],Math,256,6,52);var ClassicalNoise=function(b){if(b==undefined){b=Math}this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];this.p=[];for(var a=0;a<256;a++){this.p[a]=Math.floor(b.random()*256)}this.perm=[];for(var a=0;a<512;a++){this.perm[a]=this.p[a&255]}};ClassicalNoise.prototype.dot=function(b,a,d,c){return b[0]*a+b[1]*d+b[2]*c};ClassicalNoise.prototype.mix=function(d,c,e){return(1-e)*d+e*c};ClassicalNoise.prototype.fade=function(a){return a*a*a*(a*(a*6-15)+10)};ClassicalNoise.prototype.noise=function(s,r,p){var h=Math.floor(s);var f=Math.floor(r);var e=Math.floor(p);s=s-h;r=r-f;p=p-e;h=h&255;f=f&255;e=e&255;var c=this.perm[h+this.perm[f+this.perm[e]]]%12;var a=this.perm[h+this.perm[f+this.perm[e+1]]]%12;var o=this.perm[h+this.perm[f+1+this.perm[e]]]%12;var m=this.perm[h+this.perm[f+1+this.perm[e+1]]]%12;var F=this.perm[h+1+this.perm[f+this.perm[e]]]%12;var E=this.perm[h+1+this.perm[f+this.perm[e+1]]]%12;var L=this.perm[h+1+this.perm[f+1+this.perm[e]]]%12;var K=this.perm[h+1+this.perm[f+1+this.perm[e+1]]]%12;var k=this.dot(this.grad3[c],s,r,p);var H=this.dot(this.grad3[F],s-1,r,p);var D=this.dot(this.grad3[o],s,r-1,p);var i=this.dot(this.grad3[L],s-1,r-1,p);var j=this.dot(this.grad3[a],s,r,p-1);var G=this.dot(this.grad3[E],s-1,r,p-1);var C=this.dot(this.grad3[m],s,r-1,p-1);var g=this.dot(this.grad3[K],s-1,r-1,p-1);var B=this.fade(s);var A=this.fade(r);var t=this.fade(p);var d=this.mix(k,H,B);var b=this.mix(j,G,B);var q=this.mix(D,i,B);var n=this.mix(C,g,B);var J=this.mix(d,q,A);var I=this.mix(b,n,A);var l=this.mix(J,I,t);return l};var PLAYING=0;var MAIN_MENU=1;var HOW_TO_PLAY_MENU=2;var CREDITS_MENU=3;var IDLE=0;var ATTACKING=1;var PATROLLING=2;var NO_PICKUP=-1;var HEALTH=0;var POWER=1;function Map(a){this.current=undefined;this.size=0;this.isLinked=true;if(a===false){this.disableLinking()}}Map.from=function(d,a,c){var b=new Map(c);for(var e in d){if(a||d.hasOwnProperty(e)){b.put(e,d[e])}}return b};Map.noop=function(){return this};Map.illegal=function(){throw new Error("can't do this with unlinked maps")};Map.prototype.disableLinking=function(){this.isLinked=false;this.link=Map.noop;this.unlink=Map.noop;this.disableLinking=Map.noop;this.next=Map.illegal;this.key=Map.illegal;this.value=Map.illegal;this.removeAll=Map.illegal;this.each=Map.illegal;this.flip=Map.illegal;this.drop=Map.illegal;this.listKeys=Map.illegal;this.listValues=Map.illegal;return this};Map.prototype.hash=function(a){return a instanceof Object?(a.__hash||(a.__hash="object "+ ++arguments.callee.current)):(typeof a)+" "+String(a)};Map.prototype.hash.current=0;Map.prototype.link=function(a){if(this.size===0){a.prev=a;a.next=a;this.current=a}else{a.prev=this.current.prev;a.prev.next=a;a.next=this.current;this.current.prev=a}};Map.prototype.unlink=function(a){if(this.size===0){this.current=undefined}else{a.prev.next=a.next;a.next.prev=a.prev;if(a===this.current){this.current=a.next}}};Map.prototype.get=function(a){var b=this[this.hash(a)];return typeof b==="undefined"?undefined:b.value};Map.prototype.put=function(a,c){var d=this.hash(a);if(this.hasOwnProperty(d)){this[d].value=c}else{var b={key:a,value:c};this[d]=b;this.link(b);++this.size}return this};Map.prototype.remove=function(a){var b=this.hash(a);if(this.hasOwnProperty(b)){--this.size;this.unlink(this[b]);delete this[b]}return this};Map.prototype.removeAll=function(){while(this.size){this.remove(this.key())}return this};Map.prototype.contains=function(a){return this.hasOwnProperty(this.hash(a))};Map.prototype.isUndefined=function(a){var b=this.hash(a);return this.hasOwnProperty(b)?typeof this[b]==="undefined":false};Map.prototype.next=function(){this.current=this.current.next};Map.prototype.key=function(){return this.current.key};Map.prototype.value=function(){return this.current.value};Map.prototype.each=function(c,a){if(typeof a==="undefined"){a=this}for(var b=this.size;b--;this.next()){var d=c.call(a,this.key(),this.value(),b>0);if(typeof d==="number"){b+=d}}return this};Map.prototype.flip=function(e){var d=new Map(e);for(var a=this.size;a--;this.next()){var c=this.value(),b=d.get(c);if(b){b.push(this.key())}else{d.put(c,[this.key()])}}return d};Map.prototype.drop=function(c,a){if(typeof a==="undefined"){a=this}for(var b=this.size;b--;){if(c.call(a,this.key(),this.value())){this.remove(this.key());--b}else{this.next()}}return this};Map.prototype.listValues=function(){var b=[];for(var a=this.size;a--;this.next()){b.push(this.value())}return b};Map.prototype.listKeys=function(){var b=[];for(var a=this.size;a--;this.next()){b.push(this.key())}return b};Map.prototype.toString=function(){var a="[object Map";function b(d,e,c){a+="    { "+this.hash(d)+" : "+e+" }"+(c?",":"")+"\n"}if(this.isLinked&&this.size){a+="\n";this.each(b)}a+="]";return a};Map.reverseIndexTableFrom=function(g,f){var e=new Map(f);for(var b=0,a=g.length;b<a;++b){var c=g[b],d=e.get(c);if(d){d.push(b)}else{e.put(c,[b])}}return e};Map.cross=function(h,g,e,b){var f,a;if(h.isLinked){f=h;a=g}else{if(g.isLinked){f=g;a=h}else{Map.illegal()}}for(var d=f.size;d--;f.next()){var c=f.key();if(a.contains(c)){e.call(b,c,h.get(c),g.get(c))}}return b};Map.uniqueArray=function(d){var c=new Map;for(var b=0,a=d.length;b<a;++b){c.put(d[b])}return c.listKeys()};function createSubImage(c,d,f){var a=document.createElement("canvas");a.width=d[2];a.height=d[3];var b=a.getContext("2d");b.drawImage(c,d[0],d[1],d[2],d[3],0,0,d[2],d[3]);if(f){var e=b.getImageData(0,0,d[2],d[3]);f(e);b.putImageData(e,0,0)}return a}function rectCollide(c,a){var d=c[0];var f=c[1];var b=a[0];var e=a[1];return !(f+c[3]<e||f>e+a[3]||d+c[2]<b||d>b+a[2])}function rectContains(e,c){var d=c[0];var b=c[1];var g=e[0];var f=e[1];var h=e[2];var a=e[3];return !(d<g||d>g+h||b<f||b>f+a)}function rectContainsRect(i,h){var f=i[0];var e=i[1];var g=i[2];var d=i[3];var b=h[0];var a=h[1];var c=h[2];var j=h[3];return(b>=f&&b+c<=f+g&&a>=e&&a+j<=e+d)}function rectTranslate(c,b,a){c[0]+=b;c[1]+=a;return c}function rectTranslateCopy(c,b,a){return rectTranslate(rectCopy(c),b,a)}function rectCopy(a){return[a[0],a[1],a[2],a[3]]}function collisionResponse(k,b,a,j,h){var d=vecMinusCopy(a,b);var n=k[0];var g=k[1];var m=n+k[2];var e=g+k[3];var l=d[0];var c=Math.abs(d[1]);var p=1;var i=1;if(b[0]>=m){p=-1;j[0]=m;var f=Math.abs((d[0]-j[0])/d[0]);j[1]=Math.max(g,Math.min(e,b[1]+f*d[1]))}else{if(b[0]<=n){p=-1;j[0]=n;var f=Math.abs((d[0]-j[0])/d[0]);j[1]=Math.max(g,Math.min(e,b[1]+f*d[1]))}}if(b[1]>=e){i=-1;j[1]=e;var o=Math.abs((d[1]-j[1])/d[1]);j[0]=Math.max(n,Math.min(m,b[0]+o*d[0]))}else{if(b[1]<=g){i=-1;j[1]=g;var o=Math.abs((d[1]-j[1])/d[1]);j[0]=Math.max(n,Math.min(m,b[0]+o*d[0]))}}h[0]=d[0]*p;h[1]=d[1]*i}function vecCrossWithZ(a){return[-a[1],a[0]]}function vecCrossValue(b,a){return b[0]*a[1]-b[1]*a[0]}function vecNormalize(a){var b=vecLength(a);a[0]/=b;a[1]/=b;return a}function vecCopy(a){return[a[0],a[1]]}function vecNormalizeCopy(a){return vecNormalize(vecCopy(a))}function vecDistanceBetween(b,a){return distanceBetween(b[0],b[1],a[0],a[1])}function vecDot(b,a){return b[0]*a[0]+b[1]*a[1]}function vecMinus(b,a){b[0]-=a[0];b[1]-=a[1];return b}function vecRotate(c,b){var a=c[0];var f=c[1];var e=a*Math.cos(b)-f*Math.sin(b);var d=a*Math.sin(b)+f*Math.cos(b);c[0]=e;c[1]=d;return c}function vecMult(a,b){a[0]*=b;a[1]*=b;return a}function vecMultCopy(a,b){return vecMult(vecCopy(a),b)}function vecPlus(b,a){b[0]+=a[0];b[1]+=a[1];return b}function vecMinusCopy(b,a){return vecMinus(vecCopy(b),a)}function vecPlusCopy(b,a){return vecPlus(vecCopy(b),a)}function vecLength(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function distanceBetween(d,f,b,e){var c=b-d;var a=e-f;return Math.sqrt(c*c+a*a)}function vec2dToString(a){return"["+a[0]+","+a[1]+"]"}function vec3dToString(a){return"["+a[0]+","+a[1]+","+a[2]+"]"}function vec4dToString(a){return"["+a[0]+","+a[1]+","+a[2]+","+a[3]+"]"}var ImageHandler={};ImageHandler.images={};ImageHandler.allLoaded=false;ImageHandler.percentDone=0;ImageHandler.loadImages=function(c,e){var b=0;var a=0;for(var d in c){a++}for(var d in c){ImageHandler.images[d]=new Image();ImageHandler.images[d].onload=function(){if(++b>=a){e()}};if(a>0){ImageHandler.percentDone=Math.round(100*Math.min(1,(b/a)))}else{ImageHandler.percentDone=100}ImageHandler.images[d].src=c[d]}};ImageHandler.init=function(a){var b={tiles:"tiles.png",font:"font.png",title:"title.png"};ImageHandler.loadImages(b,function(){ImageHandler.allLoaded=true})};var Font={};var FontInfos={smallFont:{fontStringArr:["ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789.,!><+-;:?* "],width:10,height:10,imageName:"font"}};Font.initFont=function(b){var a=b.fontStringArr;var f=new Map();b.map=f;for(var d=0;d<a.length;d++){var g=a[d];for(var c=0;c<g.length;c++){var e=g.charAt(c);f.put(e,[c,d])}}};Font.init=function(){Font.initFont(FontInfos.smallFont)};Font.drawString=function(n,k,j,b,c){if(!b.image){b.image=ImageHandler.images[b.imageName]}if(!c){c=1}var d=b.image;var o=b.width;var g=b.height;var m=b.width*c;var f=b.height*c;for(var e=0;e<j.length;e++){var a=j.charAt(e);var l=b.map.get(a);if(typeof l=="undefined"){}else{ctx.drawImage(d,l[0]*o,l[1]*g,o,g,n+e*m,k,m,f)}}};var Sound={};Sound.BLIP_1_ID=1;Sound.BUTTON_PRESS_1_ID=2;Sound.CHARGE_ID=3;Sound.HIT_1_ID=4;Sound.RELEASE_ID=5;Sound.TRY_HIT_ID=6;Sound.HEALTH_PICKUP_ID=7;Sound.STAR_PICKUP_ID=8;Sound.HAPPY_MUSIC_ID=20;Sound.sounds=[];Sound.loaded=[];Sound.allLoaded=false;Sound.smInitiated=false;Sound.loadedSounds=0;Sound.percentDone=0;Sound.mute=false;Sound.init=function(){soundManager.debugMode=false;soundManager.url="";soundManager.useHTML5Audio=true;soundManager.preferFlash=false;soundManager.onready(function(){var a=[{name:"happyMusic",intId:Sound.HAPPY_MUSIC_ID,filename:"happy_music.mp3"},{name:"blip1",intId:Sound.BLIP_1_ID,filename:"blip_1.mp3"},{name:"buttonPress1",intId:Sound.BUTTON_PRESS_1_ID,filename:"button_press_1.mp3"},{name:"charge",intId:Sound.CHARGE_ID,filename:"charge.mp3"},{name:"hit1",intId:Sound.HIT_1_ID,filename:"hit_1.mp3"},{name:"release",intId:Sound.RELEASE_ID,filename:"release.mp3"},{name:"tryHit",intId:Sound.TRY_HIT_ID,filename:"try_hit.mp3"},{name:"starPickup",intId:Sound.STAR_PICKUP_ID,filename:"star_pickup.mp3"},{name:"healthPickup",intId:Sound.HEALTH_PICKUP_ID,filename:"health_pickup.mp3"}];Sound.soundInfoArray=a;for(var c=0;c<a.length;c++){var b=a[c];var d=soundManager.createSound({id:b.name,url:b.filename,autoLoad:true,autoPlay:false,onload:function(){Sound.loaded[b.intId]=true;Sound.loadedSounds++;Sound.percentDone=Math.round(100*Math.min(1,(Sound.loadedSounds/Sound.soundInfoArray.length)))},volume:50});Sound.sounds[b.intId]=d}Sound.smInitiated=true})};Sound.isPlaying=function(a){if(Sound.smInitiated){var b=Sound.sounds[a];if(typeof b!="undefined"){return b.playState==1}}return false};Sound.play=function(b,a){if(Sound.smInitiated&&!Sound.mute){if(a){Sound.sounds[b].play(a)}else{Sound.sounds[b].play()}}};Sound.stop=function(a){if(Sound.smInitiated){Sound.sounds[a].stop()}};Sound.muteSound=function(){Sound.stop(Sound.MUSIC_ID_1);Sound.mute=true};Sound.unMuteSound=function(){Sound.mute=false};var Input={};Input.down=[];Input.pressed=[];Input.leftKey=37;Input.upKey=38;Input.rightKey=39;Input.downKey=40;Input.oneKey=49;Input.twoKey=50;Input.threeKey=51;Input.enterKey=13;Input.aKey=65;Input.wKey=87;Input.sKey=83;Input.dKey=68;Input.zKey=90;Input.xKey=88;Input.cKey=67;Input.vKey=86;Input.bKey=66;Input.qKey=81;Input.eKey=69;Input.spaceKey=32;Input.ctrlKey=17;Input.escapeKey=27;Input.mouseDown=false;Input.mouseJustPressed=false;Input.rightMouseDown=false;Input.rightMouseJustPressed=false;Input.mouseX=0;Input.mouseY=0;Input.keyDown=function(a){return Input.down[a]};Input.anyOfTheseKeysDown=function(b){for(var a=0;a<b.length;a++){if(Input.down[b[a]]){return true}}return false};Input.anyKeyJustPressed=function(){return Input.pressed.length>0};Input.keyJustPressed=function(b){for(var a=0;a<Input.pressed.length;a++){if(Input.pressed[a]==b){return true}}return false};Input.onMouseDown=function(a){switch(a.which){case 1:Input.mouseDown=true;Input.mouseJustPressed=true;break;case 3:Input.rightMouseDown=true;Input.rightMouseJustPressed=true;a.preventDefault();break}return false};Input.onMouseUp=function(a){Input.mouseDown=false;return false};Input.setKeyUpOrDown=function(a,b){Input.down[a.keyCode]=b};Input.onKeyDown=function(a){Input.pressed.push(a.keyCode);Input.setKeyUpOrDown(a,true)};Input.onKeyUp=function(a){Input.setKeyUpOrDown(a,false)};Input.onMouseMove=function(b){var a=$("#mainCanvas").offset();Input.mouseX=b.pageX-a.left;Input.mouseY=b.pageY-a.top};Input.init=function(){$(document).keydown(Input.onKeyDown);$(document).keyup(Input.onKeyUp);$("#mainCanvas").mousedown(Input.onMouseDown);$("#mainCanvas").mouseup(Input.onMouseUp);$("#document").mousemove(Input.onMouseMove);$(window).bind("beforeunload",function(){return"Really want to exit the game?"});$("#mainCanvas").bind("contextmenu",function(b){return false});var a=[33,34,35,36,37,38,39,40];$(document).keydown(function(c){var b=c.which;if($.inArray(b,a)>-1){c.preventDefault();return false}return true})};Input.step=function(){Input.mouseJustPressed=false;Input.rightMouseJustPressed=false;Input.pressed.length=0};var js={};js.poly2tri={};js.poly2tri.Point=function(){this.x=null;this.y=null;if(arguments.length==0){this.x=0;this.y=0}else{if(arguments.length==2){this.x=arguments[0];this.y=arguments[1]}else{alert("Invalid js.poly2tri.Point constructor call!")}}this.edge_list=[]};js.poly2tri.Point.prototype.set_zero=function(){this.x=0;this.y=0};js.poly2tri.Point.prototype.set=function(a,b){this.x=a;this.y=b};js.poly2tri.Point.prototype.negate=function(){this.x=-this.x;this.y=-this.y};js.poly2tri.Point.prototype.add=function(a){this.x+=a.x;this.y+=a.y};js.poly2tri.Point.prototype.sub=function(a){this.x-=a.x;this.y-=a.y};js.poly2tri.Point.prototype.mul=function(a){this.x*=a;this.y*=a};js.poly2tri.Point.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};js.poly2tri.Point.prototype.normalize=function(){var a=this.length();this.x/=a;this.y/=a;return a};js.poly2tri.Point.prototype.equals=function(a){return js.poly2tri.equals(this,a)};js.poly2tri.negate=function(a){return new js.poly2tri.Point(-a.x,-a.y)};js.poly2tri.cmp=function(d,c){if(d.y==c.y){return d.x-c.x}else{return d.y-c.y}};js.poly2tri.add=function(d,c){return new js.poly2tri.Point(d.x+c.x,d.y+c.y)};js.poly2tri.sub=function(d,c){return new js.poly2tri.Point(d.x-c.x,d.y-c.y)};js.poly2tri.mul=function(a,b){return new js.poly2tri.Point(a*b.x,a*b.y)};js.poly2tri.equals=function(d,c){return d.x==c.x&&d.y==c.y};js.poly2tri.dot=function(d,c){return d.x*c.x+d.y*c.y};js.poly2tri.cross=function(){var a=false;var b=false;if(arguments.length==2){if(typeof(arguments[0])=="number"){a=true}if(typeof(arguments[1]=="number")){b=true}if(a){if(b){return arguments[0].x*arguments[1].y-arguments[0].y*arguments[1].x}else{return new js.poly2tri.Point(arguments[1]*arguments[0].y,-arguments[1]*arguments[0].x)}}else{if(b){return new js.poly2tri.Point(-arguments[0]*arguments[1].y,arguments[0]*arguments[1].x)}else{return arguments[0]*arguments[1]}}}else{alert("Invalid js.poly2tri.cross call!");return undefined}};js.poly2tri.Edge=function(){this.p=null;this.q=null;if(arguments.length==2){if(arguments[0].y>arguments[1].y){this.q=arguments[0];this.p=arguments[1]}else{if(arguments[0].y==arguments[1].y){if(arguments[0].x>arguments[1].x){this.q=arguments[0];this.p=arguments[1]}else{if(arguments[0].x==arguments[1].x){alert("Invalid js.poly2tri.edge constructor call: repeated points!")}else{this.p=arguments[0];this.q=arguments[1]}}}else{this.p=arguments[0];this.q=arguments[1]}}}else{alert("Invalid js.poly2tri.Edge constructor call!")}this.q.edge_list.push(this)};js.poly2tri.Triangle=function(c,b,a){this.points_=[null,null,null];this.neighbors_=[null,null,null];this.interior_=false;this.constrained_edge=[false,false,false];this.delaunay_edge=[false,false,false];if(arguments.length==3){this.points_[0]=c;this.points_[1]=b;this.points_[2]=a}};js.poly2tri.Triangle.prototype.GetPoint=function(a){return this.points_[a]};js.poly2tri.Triangle.prototype.GetNeighbor=function(a){return this.neighbors_[a]};js.poly2tri.Triangle.prototype.ContainsP=function(){var a=true;for(var b=0;b<arguments.length;++b){a=a&&(arguments[b].equals(this.points_[0])||arguments[b].equals(this.points_[1])||arguments[b].equals(this.points_[2]))}return a};js.poly2tri.Triangle.prototype.ContainsE=function(){var a=true;for(var b=0;b<arguments.length;++b){a=a&&this.ContainsP(arguments[b].p,arguments[b].q)}return a};js.poly2tri.Triangle.prototype.IsInterior=function(){if(arguments.length==0){return this.interior_}else{this.interior_=arguments[0];return this.interior_}};js.poly2tri.Triangle.prototype.MarkNeighbor=function(){var a;if(arguments.length==3){var c=arguments[0];var b=arguments[1];a=arguments[2];if((c.equals(this.points_[2])&&b.equals(this.points_[1]))||(c.equals(this.points_[1])&&b.equals(this.points_[2]))){this.neighbors_[0]=a}else{if((c.equals(this.points_[0])&&b.equals(this.points_[2]))||(c.equals(this.points_[2])&&b.equals(this.points_[0]))){this.neighbors_[1]=a}else{if((c.equals(this.points_[0])&&b.equals(this.points_[1]))||(c.equals(this.points_[1])&&b.equals(this.points_[0]))){this.neighbors_[2]=a}else{alert("Invalid js.poly2tri.Triangle.MarkNeighbor call (1)!")}}}}else{if(arguments.length==1){a=arguments[0];if(a.ContainsP(this.points_[1],this.points_[2])){this.neighbors_[0]=a;a.MarkNeighbor(this.points_[1],this.points_[2],this)}else{if(a.ContainsP(this.points_[0],this.points_[2])){this.neighbors_[1]=a;a.MarkNeighbor(this.points_[0],this.points_[2],this)}else{if(a.ContainsP(this.points_[0],this.points_[1])){this.neighbors_[2]=a;a.MarkNeighbor(this.points_[0],this.points_[1],this)}}}}else{alert("Invalid js.poly2tri.Triangle.MarkNeighbor call! (2)")}}};js.poly2tri.Triangle.prototype.ClearNeigbors=function(){this.neighbors_[0]=null;this.neighbors_[1]=null;this.neighbors_[2]=null};js.poly2tri.Triangle.prototype.ClearDelunayEdges=function(){this.delaunay_edge[0]=false;this.delaunay_edge[1]=false;this.delaunay_edge[2]=false};js.poly2tri.Triangle.prototype.PointCW=function(a){if(a.equals(this.points_[0])){return this.points_[2]}else{if(a.equals(this.points_[1])){return this.points_[0]}else{if(a.equals(this.points_[2])){return this.points_[1]}else{return null}}}};js.poly2tri.Triangle.prototype.PointCCW=function(a){if(a.equals(this.points_[0])){return this.points_[1]}else{if(a.equals(this.points_[1])){return this.points_[2]}else{if(a.equals(this.points_[2])){return this.points_[0]}else{return null}}}};js.poly2tri.Triangle.prototype.NeighborCW=function(a){if(a.equals(this.points_[0])){return this.neighbors_[1]}else{if(a.equals(this.points_[1])){return this.neighbors_[2]}else{return this.neighbors_[0]}}};js.poly2tri.Triangle.prototype.NeighborCCW=function(a){if(a.equals(this.points_[0])){return this.neighbors_[2]}else{if(a.equals(this.points_[1])){return this.neighbors_[0]}else{return this.neighbors_[1]}}};js.poly2tri.Triangle.prototype.GetConstrainedEdgeCW=function(a){if(a.equals(this.points_[0])){return this.constrained_edge[1]}else{if(a.equals(this.points_[1])){return this.constrained_edge[2]}else{return this.constrained_edge[0]}}};js.poly2tri.Triangle.prototype.GetConstrainedEdgeCCW=function(a){if(a.equals(this.points_[0])){return this.constrained_edge[2]}else{if(a.equals(this.points_[1])){return this.constrained_edge[0]}else{return this.constrained_edge[1]}}};js.poly2tri.Triangle.prototype.SetConstrainedEdgeCW=function(b,a){if(b.equals(this.points_[0])){this.constrained_edge[1]=a}else{if(b.equals(this.points_[1])){this.constrained_edge[2]=a}else{this.constrained_edge[0]=a}}};js.poly2tri.Triangle.prototype.SetConstrainedEdgeCCW=function(b,a){if(b.equals(this.points_[0])){this.constrained_edge[2]=a}else{if(b.equals(this.points_[1])){this.constrained_edge[0]=a}else{this.constrained_edge[1]=a}}};js.poly2tri.Triangle.prototype.GetDelaunayEdgeCW=function(a){if(a.equals(this.points_[0])){return this.delaunay_edge[1]}else{if(a.equals(this.points_[1])){return this.delaunay_edge[2]}else{return this.delaunay_edge[0]}}};js.poly2tri.Triangle.prototype.GetDelaunayEdgeCCW=function(a){if(a.equals(this.points_[0])){return this.delaunay_edge[2]}else{if(a.equals(this.points_[1])){return this.delaunay_edge[0]}else{return this.delaunay_edge[1]}}};js.poly2tri.Triangle.prototype.SetDelaunayEdgeCW=function(b,a){if(b.equals(this.points_[0])){this.delaunay_edge[1]=a}else{if(b.equals(this.points_[1])){this.delaunay_edge[2]=a}else{this.delaunay_edge[0]=a}}};js.poly2tri.Triangle.prototype.SetDelaunayEdgeCCW=function(b,a){if(b.equals(this.points_[0])){this.delaunay_edge[2]=a}else{if(b.equals(this.points_[1])){this.delaunay_edge[0]=a}else{this.delaunay_edge[1]=a}}};js.poly2tri.Triangle.prototype.NeighborAcross=function(a){if(a.equals(this.points_[0])){return this.neighbors_[0]}else{if(a.equals(this.points_[1])){return this.neighbors_[1]}else{return this.neighbors_[2]}}};js.poly2tri.Triangle.prototype.OppositePoint=function(b,c){var a=b.PointCW(c);return this.PointCW(a)};js.poly2tri.Triangle.prototype.Legalize=function(){if(arguments.length==1){this.Legalize(this.points_[0],arguments[0])}else{if(arguments.length==2){var a=arguments[0];var b=arguments[1];if(a.equals(this.points_[0])){this.points_[1]=this.points_[0];this.points_[0]=this.points_[2];this.points_[2]=b}else{if(a.equals(this.points_[1])){this.points_[2]=this.points_[1];this.points_[1]=this.points_[0];this.points_[0]=b}else{if(a.equals(this.points_[2])){this.points_[0]=this.points_[2];this.points_[2]=this.points_[1];this.points_[1]=b}else{alert("Invalid js.poly2tri.Triangle.Legalize call!")}}}}else{alert("Invalid js.poly2tri.Triangle.Legalize call!")}}};js.poly2tri.Triangle.prototype.Index=function(a){if(a.equals(this.points_[0])){return 0}else{if(a.equals(this.points_[1])){return 1}else{if(a.equals(this.points_[2])){return 2}else{return -1}}}};js.poly2tri.Triangle.prototype.EdgeIndex=function(b,a){if(b.equals(this.points_[0])){if(a.equals(this.points_[1])){return 2}else{if(a.equals(this.points_[2])){return 1}}}else{if(b.equals(this.points_[1])){if(a.equals(this.points_[2])){return 0}else{if(a.equals(this.points_[0])){return 2}}}else{if(b.equals(this.points_[2])){if(a.equals(this.points_[0])){return 1}else{if(a.equals(this.points_[1])){return 0}}}}}return -1};js.poly2tri.Triangle.prototype.MarkConstrainedEdge=function(){if(arguments.length==1){if(typeof(arguments[0])=="number"){this.constrained_edge[arguments[0]]=true}else{this.MarkConstrainedEdge(arguments[0].p,arguments[0].q)}}else{if(arguments.length==2){var b=arguments[0];var a=arguments[1];if((a.equals(this.points_[0])&&b.equals(this.points_[1]))||(a.equals(this.points_[1])&&b.equals(this.points_[0]))){this.constrained_edge[2]=true}else{if((a.equals(this.points_[0])&&b.equals(this.points_[2]))||(a.equals(this.points_[2])&&b.equals(this.points_[0]))){this.constrained_edge[1]=true}else{if((a.equals(this.points_[1])&&b.equals(this.points_[2]))||(a.equals(this.points_[2])&&b.equals(this.points_[1]))){this.constrained_edge[0]=true}}}}else{alert("Invalid js.poly2tri.Triangle.MarkConstrainedEdge call!")}}};js.poly2tri.PI_3div4=3*Math.PI/4;js.poly2tri.PI_2=Math.PI/2;js.poly2tri.EPSILON=1e-12;js.poly2tri.kAlpha=0.3;js.poly2tri.Orientation={CW:1,CCW:-1,COLLINEAR:0};js.poly2tri.Orient2d=function(c,b,a){var e=(c.x-a.x)*(b.y-a.y);var d=(c.y-a.y)*(b.x-a.x);var f=e-d;if(f>-(js.poly2tri.EPSILON)&&f<(js.poly2tri.EPSILON)){return js.poly2tri.Orientation.COLLINEAR}else{if(f>0){return js.poly2tri.Orientation.CCW}else{return js.poly2tri.Orientation.CW}}};js.poly2tri.InScanArea=function(c,b,a,r){var l=r.x;var k=r.y;var f=c.x-l;var e=c.y-k;var p=b.x-l;var o=b.y-k;var d=f*o;var n=p*e;var j=d-n;if(j<=(js.poly2tri.EPSILON)){return false}var i=a.x-l;var h=a.y-k;var q=i*e;var m=f*h;var g=q-m;if(g<=(js.poly2tri.EPSILON)){return false}return true};js.poly2tri.Node=function(){this.point=null;this.triangle=null;this.next=null;this.prev=null;this.value=0;if(arguments.length==1){this.point=arguments[0];this.value=this.point.x}else{if(arguments.length==2){this.point=arguments[0];this.triangle=arguments[1];this.value=this.point.x}else{alert("Invalid js.poly2tri.Node constructor call!")}}};js.poly2tri.AdvancingFront=function(b,a){this.head_=b;this.tail_=a;this.search_node_=b};js.poly2tri.AdvancingFront.prototype.head=function(){return this.head_};js.poly2tri.AdvancingFront.prototype.set_head=function(a){this.head_=a};js.poly2tri.AdvancingFront.prototype.tail=function(){return this.tail_};js.poly2tri.AdvancingFront.prototype.set_tail=function(a){this.tail_=a};js.poly2tri.AdvancingFront.prototype.search=function(){return this.search_node_};js.poly2tri.AdvancingFront.prototype.set_search=function(a){this.search_node_=a};js.poly2tri.AdvancingFront.prototype.FindSearchNode=function(a){return this.search_node_};js.poly2tri.AdvancingFront.prototype.LocateNode=function(a){var b=this.search_node_;if(a<b.value){while((b=b.prev)!=null){if(a>=b.value){this.search_node_=b;return b}}}else{while((b=b.next)!=null){if(a<b.value){this.search_node_=b.prev;return b.prev}}}return null};js.poly2tri.AdvancingFront.prototype.LocatePoint=function(b){var c=b.x;var d=this.FindSearchNode(c);var a=d.point.x;if(c==a){if(b.equals(d.prev.point)){d=d.prev}else{if(b.equals(d.next.point)){d=d.next}else{if(b.equals(d.point)){}else{alert("Invalid js.poly2tri.AdvancingFront.LocatePoint call!");return null}}}}else{if(c<a){while((d=d.prev)!=null){if(b.equals(d.point)){break}}}else{while((d=d.next)!=null){if(b.equals(d.point)){break}}}}if(d!=null){this.search_node_=d}return d};js.poly2tri.Basin=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};js.poly2tri.Basin.prototype.Clear=function(){this.left_node=null;this.bottom_node=null;this.right_node=null;this.width=0;this.left_highest=false};js.poly2tri.EdgeEvent=function(){this.constrained_edge=null;this.right=false};js.poly2tri.SweepContext=function(a){this.triangles_=[];this.map_=[];this.points_=a;this.edge_list=[];this.front_=null;this.head_=null;this.tail_=null;this.af_head_=null;this.af_middle_=null;this.af_tail_=null;this.basin=new js.poly2tri.Basin();this.edge_event=new js.poly2tri.EdgeEvent();this.InitEdges(this.points_)};js.poly2tri.SweepContext.prototype.AddHole=function(a){this.InitEdges(a);for(var b in a){this.points_.push(a[b])}};js.poly2tri.SweepContext.prototype.front=function(){return this.front_};js.poly2tri.SweepContext.prototype.point_count=function(){return this.points_.length};js.poly2tri.SweepContext.prototype.head=function(){return this.head_};js.poly2tri.SweepContext.prototype.set_head=function(a){this.head_=a};js.poly2tri.SweepContext.prototype.tail=function(){return this.tail_};js.poly2tri.SweepContext.prototype.set_tail=function(a){this.tail_=a};js.poly2tri.SweepContext.prototype.GetTriangles=function(){return this.triangles_};js.poly2tri.SweepContext.prototype.GetMap=function(){return this.map_};js.poly2tri.SweepContext.prototype.InitTriangulation=function(){var d=this.points_[0].x;var g=this.points_[0].x;var a=this.points_[0].y;var f=this.points_[0].y;for(var e in this.points_){var h=this.points_[e];if(h.x>d){d=h.x}if(h.x<g){g=h.x}if(h.y>a){a=h.y}if(h.y<f){f=h.y}}var c=js.poly2tri.kAlpha*(d-g);var b=js.poly2tri.kAlpha*(a-f);this.head_=new js.poly2tri.Point(d+c,f-b);this.tail_=new js.poly2tri.Point(g-b,f-b);this.points_.sort(js.poly2tri.cmp)};js.poly2tri.SweepContext.prototype.InitEdges=function(a){for(var b=0;b<a.length;++b){this.edge_list.push(new js.poly2tri.Edge(a[b],a[(b+1)%a.length]))}};js.poly2tri.SweepContext.prototype.GetPoint=function(a){return this.points_[a]};js.poly2tri.SweepContext.prototype.AddToMap=function(a){this.map_.push(a)};js.poly2tri.SweepContext.prototype.LocateNode=function(a){return this.front_.LocateNode(a.x)};js.poly2tri.SweepContext.prototype.CreateAdvancingFront=function(){var c;var b;var a;var d=new js.poly2tri.Triangle(this.points_[0],this.tail_,this.head_);this.map_.push(d);c=new js.poly2tri.Node(d.GetPoint(1),d);b=new js.poly2tri.Node(d.GetPoint(0),d);a=new js.poly2tri.Node(d.GetPoint(2));this.front_=new js.poly2tri.AdvancingFront(c,a);c.next=b;b.next=a;b.prev=c;a.prev=b};js.poly2tri.SweepContext.prototype.RemoveNode=function(a){};js.poly2tri.SweepContext.prototype.MapTriangleToNodes=function(b){for(var a=0;a<3;++a){if(b.GetNeighbor(a)==null){var c=this.front_.LocatePoint(b.PointCW(b.GetPoint(a)));if(c!=null){c.triangle=b}}}};js.poly2tri.SweepContext.prototype.RemoveFromMap=function(b){for(var a in this.map_){if(this.map_[a]==b){delete this.map_[a];break}}};js.poly2tri.SweepContext.prototype.MeshClean=function(b){if(b!=null&&!b.IsInterior()){b.IsInterior(true);this.triangles_.push(b);for(var a=0;a<3;++a){if(!b.constrained_edge[a]){this.MeshClean(b.GetNeighbor(a))}}}};js.poly2tri.sweep={};js.poly2tri.sweep.Triangulate=function(a){a.InitTriangulation();a.CreateAdvancingFront();js.poly2tri.sweep.SweepPoints(a);js.poly2tri.sweep.FinalizationPolygon(a)};js.poly2tri.sweep.SweepPoints=function(e){for(var c=1;c<e.point_count();++c){var a=e.GetPoint(c);var d=js.poly2tri.sweep.PointEvent(e,a);for(var b=0;b<a.edge_list.length;++b){js.poly2tri.sweep.EdgeEvent(e,a.edge_list[b],d)}}};js.poly2tri.sweep.FinalizationPolygon=function(c){var a=c.front().head().next.triangle;var b=c.front().head().next.point;while(!a.GetConstrainedEdgeCW(b)){a=a.NeighborCCW(b)}c.MeshClean(a)};js.poly2tri.sweep.PointEvent=function(c,a){var b=c.LocateNode(a);var d=js.poly2tri.sweep.NewFrontTriangle(c,a,b);if(a.x<=b.point.x+(js.poly2tri.EPSILON)){js.poly2tri.sweep.Fill(c,b)}js.poly2tri.sweep.FillAdvancingFront(c,d);return d};js.poly2tri.sweep.EdgeEvent=function(){var f;if(arguments.length==3){f=arguments[0];var a=arguments[1];var d=arguments[2];f.edge_event.constrained_edge=a;f.edge_event.right=(a.p.x>a.q.x);if(js.poly2tri.sweep.IsEdgeSideOfTriangle(d.triangle,a.p,a.q)){return}js.poly2tri.sweep.FillEdgeEvent(f,a,d);js.poly2tri.sweep.EdgeEvent(f,a.p,a.q,d.triangle,a.q)}else{if(arguments.length==5){f=arguments[0];var k=arguments[1];var j=arguments[2];var e=arguments[3];var g=arguments[4];if(js.poly2tri.sweep.IsEdgeSideOfTriangle(e,k,j)){return}var i=e.PointCCW(g);var c=js.poly2tri.Orient2d(j,i,k);if(c==js.poly2tri.Orientation.COLLINEAR){alert("js.poly2tri.sweep.EdgeEvent: Collinear not supported!");return}var h=e.PointCW(g);var b=js.poly2tri.Orient2d(j,h,k);if(b==js.poly2tri.Orientation.COLLINEAR){alert("js.poly2tri.sweep.EdgeEvent: Collinear not supported!");return}if(c==b){if(c==js.poly2tri.Orientation.CW){e=e.NeighborCCW(g)}else{e=e.NeighborCW(g)}js.poly2tri.sweep.EdgeEvent(f,k,j,e,g)}else{js.poly2tri.sweep.FlipEdgeEvent(f,k,j,e,g)}}else{alert("Invalid js.poly2tri.sweep.EdgeEvent call!")}}};js.poly2tri.sweep.IsEdgeSideOfTriangle=function(e,b,a){var c=e.EdgeIndex(b,a);if(c!=-1){e.MarkConstrainedEdge(c);var d=e.GetNeighbor(c);if(d!=null){d.MarkConstrainedEdge(b,a)}return true}return false};js.poly2tri.sweep.NewFrontTriangle=function(d,a,b){var c=new js.poly2tri.Triangle(a,b.point,b.next.point);c.MarkNeighbor(b.triangle);d.AddToMap(c);var e=new js.poly2tri.Node(a);e.next=b.next;e.prev=b;b.next.prev=e;b.next=e;if(!js.poly2tri.sweep.Legalize(d,c)){d.MapTriangleToNodes(c)}return e};js.poly2tri.sweep.Fill=function(c,a){var b=new js.poly2tri.Triangle(a.prev.point,a.point,a.next.point);b.MarkNeighbor(a.prev.triangle);b.MarkNeighbor(a.triangle);c.AddToMap(b);a.prev.next=a.next;a.next.prev=a.prev;if(!js.poly2tri.sweep.Legalize(c,b)){c.MapTriangleToNodes(b)}};js.poly2tri.sweep.FillAdvancingFront=function(c,d){var a=d.next;var b;while(a.next!=null){b=js.poly2tri.sweep.HoleAngle(a);if(b>js.poly2tri.PI_2||b<-(js.poly2tri.PI_2)){break}js.poly2tri.sweep.Fill(c,a);a=a.next}a=d.prev;while(a.prev!=null){b=js.poly2tri.sweep.HoleAngle(a);if(b>js.poly2tri.PI_2||b<-(js.poly2tri.PI_2)){break}js.poly2tri.sweep.Fill(c,a);a=a.prev}if(d.next!=null&&d.next.next!=null){b=js.poly2tri.sweep.BasinAngle(d);if(b<js.poly2tri.PI_3div4){js.poly2tri.sweep.FillBasin(c,d)}}};js.poly2tri.sweep.BasinAngle=function(b){var c=b.point.x-b.next.next.point.x;var a=b.point.y-b.next.next.point.y;return Math.atan2(a,c)};js.poly2tri.sweep.HoleAngle=function(b){var c=b.next.point.x-b.point.x;var a=b.next.point.y-b.point.y;var e=b.prev.point.x-b.point.x;var d=b.prev.point.y-b.point.y;return Math.atan2(c*d-a*e,c*e+a*d)};js.poly2tri.sweep.Legalize=function(f,h){for(var d=0;d<3;++d){if(h.delaunay_edge[d]){continue}var c=h.GetNeighbor(d);if(c!=null){var a=h.GetPoint(d);var e=c.OppositePoint(h,a);var g=c.Index(e);if(c.constrained_edge[g]||c.delaunay_edge[g]){h.constrained_edge[d]=c.constrained_edge[g];continue}var b=js.poly2tri.sweep.Incircle(a,h.PointCCW(a),h.PointCW(a),e);if(b){h.delaunay_edge[d]=true;c.delaunay_edge[g]=true;js.poly2tri.sweep.RotateTrianglePair(h,a,c,e);var j=!js.poly2tri.sweep.Legalize(f,h);if(j){f.MapTriangleToNodes(h)}j=!js.poly2tri.sweep.Legalize(f,c);if(j){f.MapTriangleToNodes(c)}h.delaunay_edge[d]=false;c.delaunay_edge[g]=false;return true}}}return false};js.poly2tri.sweep.Incircle=function(c,b,a,v){var f=c.x-v.x;var e=c.y-v.y;var r=b.x-v.x;var q=b.y-v.y;var d=f*q;var p=r*e;var m=d-p;if(m<=0){return false}var j=a.x-v.x;var i=a.y-v.y;var t=j*e;var o=f*i;var g=t-o;if(g<=0){return false}var s=r*i;var l=j*q;var k=f*f+e*e;var u=r*r+q*q;var n=j*j+i*i;var h=k*(s-l)+u*g+n*m;return h>0};js.poly2tri.sweep.RotateTrianglePair=function(q,b,g,l){var o;var n;var m;var k;o=q.NeighborCCW(b);n=q.NeighborCW(b);m=g.NeighborCCW(l);k=g.NeighborCW(l);var e;var d;var c;var a;e=q.GetConstrainedEdgeCCW(b);d=q.GetConstrainedEdgeCW(b);c=g.GetConstrainedEdgeCCW(l);a=g.GetConstrainedEdgeCW(l);var j;var i;var h;var f;j=q.GetDelaunayEdgeCCW(b);i=q.GetDelaunayEdgeCW(b);h=g.GetDelaunayEdgeCCW(l);f=g.GetDelaunayEdgeCW(l);q.Legalize(b,l);g.Legalize(l,b);g.SetDelaunayEdgeCCW(b,j);q.SetDelaunayEdgeCW(b,i);q.SetDelaunayEdgeCCW(l,h);g.SetDelaunayEdgeCW(l,f);g.SetConstrainedEdgeCCW(b,e);q.SetConstrainedEdgeCW(b,d);q.SetConstrainedEdgeCCW(l,c);g.SetConstrainedEdgeCW(l,a);q.ClearNeigbors();g.ClearNeigbors();if(o){g.MarkNeighbor(o)}if(n){q.MarkNeighbor(n)}if(m){q.MarkNeighbor(m)}if(k){g.MarkNeighbor(k)}q.MarkNeighbor(g)};js.poly2tri.sweep.FillBasin=function(b,a){if(js.poly2tri.Orient2d(a.point,a.next.point,a.next.next.point)==js.poly2tri.Orientation.CCW){b.basin.left_node=a.next.next}else{b.basin.left_node=a.next}b.basin.bottom_node=b.basin.left_node;while(b.basin.bottom_node.next!=null&&b.basin.bottom_node.point.y>=b.basin.bottom_node.next.point.y){b.basin.bottom_node=b.basin.bottom_node.next}if(b.basin.bottom_node==b.basin.left_node){return}b.basin.right_node=b.basin.bottom_node;while(b.basin.right_node.next!=null&&b.basin.right_node.point.y<b.basin.right_node.next.point.y){b.basin.right_node=b.basin.right_node.next}if(b.basin.right_node==b.basin.bottom_node){return}b.basin.width=b.basin.right_node.point.x-b.basin.left_node.point.x;b.basin.left_highest=b.basin.left_node.point.y>b.basin.right_node.point.y;js.poly2tri.sweep.FillBasinReq(b,b.basin.bottom_node)};js.poly2tri.sweep.FillBasinReq=function(c,a){if(js.poly2tri.sweep.IsShallow(c,a)){return}js.poly2tri.sweep.Fill(c,a);var b;if(a.prev==c.basin.left_node&&a.next==c.basin.right_node){return}else{if(a.prev==c.basin.left_node){b=js.poly2tri.Orient2d(a.point,a.next.point,a.next.next.point);if(b==js.poly2tri.Orientation.CW){return}a=a.next}else{if(a.next==c.basin.right_node){b=js.poly2tri.Orient2d(a.point,a.prev.point,a.prev.prev.point);if(b==js.poly2tri.Orientation.CCW){return}a=a.prev}else{if(a.prev.point.y<a.next.point.y){a=a.prev}else{a=a.next}}}}js.poly2tri.sweep.FillBasinReq(c,a)};js.poly2tri.sweep.IsShallow=function(c,b){var a;if(c.basin.left_highest){a=c.basin.left_node.point.y-b.point.y}else{a=c.basin.right_node.point.y-b.point.y}if(c.basin.width>a){return true}return false};js.poly2tri.sweep.FillEdgeEvent=function(c,b,a){if(c.edge_event.right){js.poly2tri.sweep.FillRightAboveEdgeEvent(c,b,a)}else{js.poly2tri.sweep.FillLeftAboveEdgeEvent(c,b,a)}};js.poly2tri.sweep.FillRightAboveEdgeEvent=function(c,b,a){while(a.next.point.x<b.p.x){if(js.poly2tri.Orient2d(b.q,a.next.point,b.p)==js.poly2tri.Orientation.CCW){js.poly2tri.sweep.FillRightBelowEdgeEvent(c,b,a)}else{a=a.next}}};js.poly2tri.sweep.FillRightBelowEdgeEvent=function(c,b,a){if(a.point.x<b.p.x){if(js.poly2tri.Orient2d(a.point,a.next.point,a.next.next.point)==js.poly2tri.Orientation.CCW){js.poly2tri.sweep.FillRightConcaveEdgeEvent(c,b,a)}else{js.poly2tri.sweep.FillRightConvexEdgeEvent(c,b,a);js.poly2tri.sweep.FillRightBelowEdgeEvent(c,b,a)}}};js.poly2tri.sweep.FillRightConcaveEdgeEvent=function(c,b,a){js.poly2tri.sweep.Fill(c,a.next);if(a.next.point!=b.p){if(js.poly2tri.Orient2d(b.q,a.next.point,b.p)==js.poly2tri.Orientation.CCW){if(js.poly2tri.Orient2d(a.point,a.next.point,a.next.next.point)==js.poly2tri.Orientation.CCW){js.poly2tri.sweep.FillRightConcaveEdgeEvent(c,b,a)}else{}}}};js.poly2tri.sweep.FillRightConvexEdgeEvent=function(c,b,a){if(js.poly2tri.Orient2d(a.next.point,a.next.next.point,a.next.next.next.point)==js.poly2tri.Orientation.CCW){js.poly2tri.sweep.FillRightConcaveEdgeEvent(c,b,a.next)}else{if(js.poly2tri.Orient2d(b.q,a.next.next.point,b.p)==js.poly2tri.Orientation.CCW){js.poly2tri.sweep.FillRightConvexEdgeEvent(c,b,a.next)}else{}}};js.poly2tri.sweep.FillLeftAboveEdgeEvent=function(c,b,a){while(a.prev.point.x>b.p.x){if(js.poly2tri.Orient2d(b.q,a.prev.point,b.p)==js.poly2tri.Orientation.CW){js.poly2tri.sweep.FillLeftBelowEdgeEvent(c,b,a)}else{a=a.prev}}};js.poly2tri.sweep.FillLeftBelowEdgeEvent=function(c,b,a){if(a.point.x>b.p.x){if(js.poly2tri.Orient2d(a.point,a.prev.point,a.prev.prev.point)==js.poly2tri.Orientation.CW){js.poly2tri.sweep.FillLeftConcaveEdgeEvent(c,b,a)}else{js.poly2tri.sweep.FillLeftConvexEdgeEvent(c,b,a);js.poly2tri.sweep.FillLeftBelowEdgeEvent(c,b,a)}}};js.poly2tri.sweep.FillLeftConvexEdgeEvent=function(c,b,a){if(js.poly2tri.Orient2d(a.prev.point,a.prev.prev.point,a.prev.prev.prev.point)==js.poly2tri.Orientation.CW){js.poly2tri.sweep.FillLeftConcaveEdgeEvent(c,b,a.prev)}else{if(js.poly2tri.Orient2d(b.q,a.prev.prev.point,b.p)==js.poly2tri.Orientation.CW){js.poly2tri.sweep.FillLeftConvexEdgeEvent(c,b,a.prev)}else{}}};js.poly2tri.sweep.FillLeftConcaveEdgeEvent=function(c,b,a){js.poly2tri.sweep.Fill(c,a.prev);if(a.prev.point!=b.p){if(js.poly2tri.Orient2d(b.q,a.prev.point,b.p)==js.poly2tri.Orientation.CW){if(js.poly2tri.Orient2d(a.point,a.prev.point,a.prev.prev.point)==js.poly2tri.Orientation.CW){js.poly2tri.sweep.FillLeftConcaveEdgeEvent(c,b,a)}else{}}}};js.poly2tri.sweep.FlipEdgeEvent=function(f,i,h,g,a){var c=g.NeighborAcross(a);if(c==null){alert("[BUG:FIXME] FLIP failed due to missing triangle!");return}var e=c.OppositePoint(g,a);if(js.poly2tri.InScanArea(a,g.PointCCW(a),g.PointCW(a),e)){js.poly2tri.sweep.RotateTrianglePair(g,a,c,e);f.MapTriangleToNodes(g);f.MapTriangleToNodes(c);if(a==h&&e==i){if(h==f.edge_event.constrained_edge.q&&i==f.edge_event.constrained_edge.p){g.MarkConstrainedEdge(i,h);c.MarkConstrainedEdge(i,h);js.poly2tri.sweep.Legalize(f,g);js.poly2tri.sweep.Legalize(f,c)}else{}}else{var b=js.poly2tri.Orient2d(h,e,i);g=js.poly2tri.sweep.NextFlipTriangle(f,b,g,c,a,e);js.poly2tri.sweep.FlipEdgeEvent(f,i,h,g,a)}}else{var d=js.poly2tri.sweep.NextFlipPoint(i,h,c,e);js.poly2tri.sweep.FlipScanEdgeEvent(f,i,h,g,c,d);js.poly2tri.sweep.EdgeEvent(f,i,h,g,a)}};js.poly2tri.sweep.NextFlipTriangle=function(f,e,a,c,d,g){var b;if(e==js.poly2tri.Orientation.CCW){b=c.EdgeIndex(d,g);c.delaunay_edge[b]=true;js.poly2tri.sweep.Legalize(f,c);c.ClearDelunayEdges();return a}b=a.EdgeIndex(d,g);a.delaunay_edge[b]=true;js.poly2tri.sweep.Legalize(f,a);a.ClearDelunayEdges();return c};js.poly2tri.sweep.NextFlipPoint=function(b,a,d,e){var c=js.poly2tri.Orient2d(a,e,b);if(c==js.poly2tri.Orientation.CW){return d.PointCCW(e)}else{if(c==js.poly2tri.Orientation.CCW){return d.PointCW(e)}else{alert("[Unsupported] js.poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!");return undefined}}};js.poly2tri.sweep.FlipScanEdgeEvent=function(e,i,g,h,f,a){var b=f.NeighborAcross(a);if(b==null){alert("[BUG:FIXME] FLIP failed due to missing triangle");return}var d=b.OppositePoint(f,a);if(js.poly2tri.InScanArea(g,h.PointCCW(g),h.PointCW(g),d)){js.poly2tri.sweep.FlipEdgeEvent(e,g,d,b,d)}else{var c=NextFlipPoint(i,g,b,d);js.poly2tri.sweep.FlipScanEdgeEvent(e,i,g,h,b,c)}};var MJS_VERSION=0;var MJS_DO_ASSERT=true;try{WebGLFloatArray}catch(x){WebGLFloatArray=Array}var MJS_FLOAT_ARRAY_TYPE=WebGLFloatArray;if(MJS_DO_ASSERT){function MathUtils_assert(a,b){if(!a){throw"Assertion failed: "+b}}}else{function MathUtils_assert(){}}var V3={};V3._temp1=new MJS_FLOAT_ARRAY_TYPE(3);V3._temp2=new MJS_FLOAT_ARRAY_TYPE(3);V3._temp3=new MJS_FLOAT_ARRAY_TYPE(3);if(MJS_FLOAT_ARRAY_TYPE==Array){V3.x=[1,0,0];V3.y=[0,1,0];V3.z=[0,0,1];V3.$=function V3_$(a,c,b){return[a,c,b]};V3.clone=function V3_clone(b){return[b[0],b[1],b[2]]}}else{V3.x=new MJS_FLOAT_ARRAY_TYPE([1,0,0]);V3.y=new MJS_FLOAT_ARRAY_TYPE([0,1,0]);V3.z=new MJS_FLOAT_ARRAY_TYPE([0,0,1]);V3.$=function V3_$(a,c,b){return new MJS_FLOAT_ARRAY_TYPE([a,c,b])};V3.clone=function V3_clone(b){return new MJS_FLOAT_ARRAY_TYPE(b)}}V3.u=V3.x;V3.v=V3.y;V3.add=function V3_add(d,c,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}e[0]=d[0]+c[0];e[1]=d[1]+c[1];e[2]=d[2]+c[2];return e};V3.sub=function V3_sub(d,c,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}e[0]=d[0]-c[0];e[1]=d[1]-c[1];e[2]=d[2]-c[2];return e};V3.neg=function V3_neg(b,c){if(c==undefined){c=new MJS_FLOAT_ARRAY_TYPE(3)}c[0]=-b[0];c[1]=-b[1];c[2]=-b[2];return c};V3.direction=function V3_direction(d,c,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}return V3.normalize(V3.sub(d,c,e),e)};V3.length=function V3_length(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])};V3.lengthSquared=function V3_lengthSquared(b){return b[0]*b[0]+b[1]*b[1]+b[2]*b[2]};V3.normalize=function V3_normalize(c,d){if(d==undefined){d=new MJS_FLOAT_ARRAY_TYPE(3)}var b=1/V3.length(c);d[0]=c[0]*b;d[1]=c[1]*b;d[2]=c[2]*b;return d};V3.scale=function V3_scale(b,c,d){if(d==undefined){d=new MJS_FLOAT_ARRAY_TYPE(3)}d[0]=b[0]*c;d[1]=b[1]*c;d[2]=b[2]*c;return d};V3.dot=function V3_dot(d,c){return d[0]*c[0]+d[1]*c[1]+d[2]*c[2]};V3.cross=function V3_cross(d,c,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}e[0]=d[1]*c[2]-d[2]*c[1];e[1]=d[2]*c[0]-d[0]*c[2];e[2]=d[0]*c[1]-d[1]*c[0];return e};V3.mul4x4=function V3_mul4x4(a,c,e){var b;var d=V3._temp1;if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}d[0]=a[3];d[1]=a[7];d[2]=a[11];b=V3.dot(c,d)+a[15];d[0]=a[0];d[1]=a[4];d[2]=a[8];e[0]=(V3.dot(c,d)+a[12])/b;d[0]=a[1];d[1]=a[5];d[2]=a[9];e[1]=(V3.dot(c,d)+a[13])/b;d[0]=a[2];d[1]=a[6];d[2]=a[10];e[2]=(V3.dot(c,d)+a[14])/b;return e};var M4x4={};M4x4._temp1=new MJS_FLOAT_ARRAY_TYPE(16);M4x4._temp2=new MJS_FLOAT_ARRAY_TYPE(16);if(MJS_FLOAT_ARRAY_TYPE==Array){M4x4.I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M4x4.$=function M4x4_$(p,o,n,m,l,k,j,i,h,f,g,e,d,c,b,a){return[p,o,n,m,l,k,j,i,h,f,g,e,d,c,b,a]};M4x4.clone=function M4x4_clone(a){return new [a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]}}else{M4x4.I=new MJS_FLOAT_ARRAY_TYPE([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);M4x4.$=function M4x4_$(p,o,n,m,l,k,j,i,h,f,g,e,d,c,b,a){return new MJS_FLOAT_ARRAY_TYPE([p,o,n,m,l,k,j,i,h,f,g,e,d,c,b,a])};M4x4.clone=function M4x4_clone(a){return new MJS_FLOAT_ARRAY_TYPE(a)}}M4x4.identity=M4x4.I;M4x4.topLeft3x3=function M4x4_topLeft3x3(a,b){if(b==undefined){b=new MJS_FLOAT_ARRAY_TYPE(9)}b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};M4x4.inverseOrthonormal=function M4x4_inverseOrthonormal(a,c){if(c==undefined){c=new MJS_FLOAT_ARRAY_TYPE(16)}M4x4.transpose(a,c);var b=[a[12],a[13],a[14]];c[3]=c[7]=c[11]=0;c[12]=-V3.dot([c[0],c[4],c[8]],b);c[13]=-V3.dot([c[1],c[5],c[9]],b);c[14]=-V3.dot([c[2],c[6],c[10]],b);return c};M4x4.inverseTo3x3=function M4x4_inverseTo3x3(f,a){if(a==undefined){a=new MJS_FLOAT_ARRAY_TYPE(9)}var n=f[10]*f[5]-f[6]*f[9],j=-f[10]*f[1]+f[2]*f[9],e=f[6]*f[1]-f[2]*f[5],l=-f[10]*f[4]+f[6]*f[8],h=f[10]*f[0]-f[2]*f[8],d=-f[6]*f[0]+f[2]*f[4],k=f[9]*f[4]-f[5]*f[8],g=-f[9]*f[0]+f[1]*f[8],b=f[5]*f[0]-f[1]*f[4];var i=f[0]*(n)+f[1]*(l)+f[2]*(k);if(i==0){throw"matrix not invertible"}var c=1/i;a[0]=c*n;a[1]=c*j;a[2]=c*e;a[3]=c*l;a[4]=c*h;a[5]=c*d;a[6]=c*k;a[7]=c*g;a[8]=c*b;return a};M4x4.makeFrustum=function M4x4_makeFrustum(i,l,c,k,m,j,b){if(b==undefined){b=new MJS_FLOAT_ARRAY_TYPE(16)}var h=2*m/(l-i);var f=2*m/(k-c);var g=(l+i)/(l-i);var e=(k+c)/(k-c);var d=-(j+m)/(j-m);var a=-2*j*m/(j-m);b[0]=2*m/(l-i);b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*m/(k-c);b[6]=0;b[7]=0;b[8]=(l+i)/(l-i);b[9]=(k+c)/(k-c);b[10]=-(j+m)/(j-m);b[11]=-1;b[12]=0;b[13]=0;b[14]=-2*j*m/(j-m);b[15]=0;return b};M4x4.makePerspective=function M4x4_makePerspective(e,b,i,g,a){var d=i*Math.tan(e*Math.PI/360);var h=-d;var c=h*b;var f=d*b;return M4x4.makeFrustum(c,f,h,d,i,g,a)};M4x4.makeOrtho=function M4x4_makeOrtho(f,l,b,i,m,g,a){if(a==undefined){a=new MJS_FLOAT_ARRAY_TYPE(16)}var k=-(l+f)/(l-f);var j=-(i+b)/(i-b);var h=-(g+m)/(g-m);var e=2/(l-f);var d=2/(i-b);var c=-2/(g-m);a[0]=2/(l-f);a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2/(i-b);a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=-2/(g-m);a[11]=0;a[12]=-(l+f)/(l-f);a[13]=-(i+b)/(i-b);a[14]=-(g+m)/(g-m);a[15]=1;return a};M4x4.makeOrtho2D=function M4x4_makeOrtho2D(e,b,a,d,c){return M4x4.makeOrtho(e,b,a,d,-1,1,c)};M4x4.mul=function M4x4_mul(J,I,u){if(u==undefined){u=new MJS_FLOAT_ARRAY_TYPE(16)}var l=J[0];var y=J[1];var M=J[2];var n=J[3];var j=J[4];var w=J[5];var L=J[6];var m=J[7];var i=J[8];var v=J[9];var K=J[10];var k=J[11];var g=J[12];var t=J[13];var H=J[14];var h=J[15];var F=I[0];var f=I[1];var s=I[2];var G=I[3];var D=I[4];var e=I[5];var q=I[6];var E=I[7];var B=I[8];var d=I[9];var p=I[10];var C=I[11];var z=I[12];var c=I[13];var o=I[14];var A=I[15];u[0]=l*F+j*f+i*s+g*G;u[1]=y*F+w*f+v*s+t*G;u[2]=M*F+L*f+K*s+H*G;u[3]=n*F+m*f+k*s+h*G;u[4]=l*D+j*e+i*q+g*E;u[5]=y*D+w*e+v*q+t*E;u[6]=M*D+L*e+K*q+H*E;u[7]=n*D+m*e+k*q+h*E;u[8]=l*B+j*d+i*p+g*C;u[9]=y*B+w*d+v*p+t*C;u[10]=M*B+L*d+K*p+H*C;u[11]=n*B+m*d+k*p+h*C;u[12]=l*z+j*c+i*o+g*A;u[13]=y*z+w*c+v*o+t*A;u[14]=M*z+L*c+K*o+H*A;u[15]=n*z+m*c+k*o+h*A;return u};M4x4.mulOffset=function M4x4_mulOffset(K,J,u,z){var y=K[1];var N=K[2];var m=K[3];var j=K[4];var w=K[5];var M=K[6];var l=K[7];var i=K[8];var v=K[9];var L=K[10];var k=K[11];var g=K[12];var t=K[13];var I=K[14];var h=K[15];var G=J[0];var f=J[1];var s=J[2];var H=J[3];var E=J[4];var e=J[5];var q=J[6];var F=J[7];var C=J[8];var d=J[9];var p=J[10];var D=J[11];var A=J[12];var c=J[13];var n=J[14];var B=J[15];u[z+0]=a11*G+j*f+i*s+g*H;u[z+1]=y*G+w*f+v*s+t*H;u[z+2]=N*G+M*f+L*s+I*H;u[z+3]=m*G+l*f+k*s+h*H;u[z+4]=a11*E+j*e+i*q+g*F;u[z+5]=y*E+w*e+v*q+t*F;u[z+6]=N*E+M*e+L*q+I*F;u[z+7]=m*E+l*e+k*q+h*F;u[z+8]=a11*C+j*d+i*p+g*D;u[z+9]=y*C+w*d+v*p+t*D;u[z+10]=N*C+M*d+L*p+I*D;u[z+11]=m*C+l*d+k*p+h*D;u[z+12]=a11*A+j*c+i*n+g*B;u[z+13]=y*A+w*c+v*n+t*B;u[z+14]=N*A+M*c+L*n+I*B;u[z+15]=m*A+l*c+k*n+h*B;return u};M4x4.mulAffine=function M4x4_mulAffine(B,z,p){if(p==undefined){p=new MJS_FLOAT_ARRAY_TYPE(16)}var j=B[0];var t=B[1];var E=B[2];var i=B[4];var s=B[5];var D=B[6];var h=B[8];var q=B[9];var C=B[10];var g=B[12];var o=B[13];var A=B[14];var y=z[0];var f=z[1];var n=z[2];var w=z[4];var e=z[5];var m=z[6];var v=z[8];var d=z[9];var l=z[10];var u=z[12];var c=z[13];var k=z[14];p[0]=j*y+i*f+h*n;p[1]=t*y+s*f+q*n;p[2]=E*y+D*f+C*n;p[3]=0;p[4]=j*w+i*e+h*m;p[5]=t*w+s*e+q*m;p[6]=E*w+D*e+C*m;p[7]=0;p[8]=j*v+i*d+h*l;p[9]=t*v+s*d+q*l;p[10]=E*v+D*d+C*l;p[11]=0;p[12]=j*u+i*c+h*k+g;p[13]=t*u+s*c+q*k+o;p[14]=E*u+D*c+C*k+A;p[15]=1;return p};M4x4.mulAffine=function M4x4_mulAffine(D,B,q,v){if(q==undefined){q=new MJS_FLOAT_ARRAY_TYPE(16)}var j=D[0];var u=D[1];var G=D[2];var i=D[4];var t=D[5];var F=D[6];var h=D[8];var s=D[9];var E=D[10];var g=D[12];var p=D[13];var C=D[14];var A=B[0];var f=B[1];var n=B[2];var z=B[4];var e=B[5];var m=B[6];var y=B[8];var d=B[9];var l=B[10];var w=B[12];var c=B[13];var k=B[14];q[v+0]=j*A+i*f+h*n;q[v+1]=u*A+t*f+s*n;q[v+2]=G*A+F*f+E*n;q[v+3]=0;q[v+4]=j*z+i*e+h*m;q[v+5]=u*z+t*e+s*m;q[v+6]=G*z+F*e+E*m;q[v+7]=0;q[v+8]=j*y+i*d+h*l;q[v+9]=u*y+t*d+s*l;q[v+10]=G*y+F*d+E*l;q[v+11]=0;q[v+12]=j*w+i*c+h*k+g;q[v+13]=u*w+t*c+s*k+p;q[v+14]=G*w+F*c+E*k+C;q[v+15]=1;return q};M4x4.makeRotate=function M4x4_makeRotate(d,b,a){if(a==undefined){a=new MJS_FLOAT_ARRAY_TYPE(16)}b=V3.normalize(b,V3._temp1);var i=b[0],h=b[1],g=b[2];var f=Math.cos(d);var e=1-f;var j=Math.sin(d);a[0]=i*i*e+f;a[1]=h*i*e+g*j;a[2]=g*i*e-h*j;a[3]=0;a[4]=i*h*e-g*j;a[5]=h*h*e+f;a[6]=h*g*e+i*j;a[7]=0;a[8]=i*g*e+h*j;a[9]=h*g*e-i*j;a[10]=g*g*e+f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};M4x4.rotate=function M4x4_rotate(k,t,P,K){if(K==undefined){K=new MJS_FLOAT_ARRAY_TYPE(16)}var N=t[0],M=t[1],L=t[2];var R=Math.sqrt(N*N+M*M+L*L);var H=N,F=M,D=L;if(R!=1){var A=1/R;H*=A;F*=A;D*=A}var W=Math.cos(k);var e=1-W;var J=Math.sin(k);var B=H*J;var i=F*J;var X=D*J;var q=H*F*e;var j=H*D*e;var G=F*D*e;var S=P[0];var w=P[1];var h=P[2];var V=P[3];var Q=P[4];var v=P[5];var g=P[6];var U=P[7];var O=P[8];var u=P[9];var f=P[10];var T=P[11];var d=H*H*e+W;var I=q+X;var p=j-i;var b=q-X;var E=F*F*e+W;var o=G+B;var a=j+i;var C=G-B;var n=D*D*e+W;K[0]=S*d+Q*I+O*p;K[1]=w*d+v*I+u*p;K[2]=h*d+g*I+f*p;K[3]=V*d+U*I+T*p;K[4]=S*b+Q*E+O*o;K[5]=w*b+v*E+u*o;K[6]=h*b+g*E+f*o;K[7]=V*b+U*E+T*o;K[8]=S*a+Q*C+O*n;K[9]=w*a+v*C+u*n;K[10]=h*a+g*C+f*n;K[11]=V*a+U*C+T*n;if(K!=P){K[12]=P[12];K[13]=P[13];K[14]=P[14];K[15]=P[15]}return K};M4x4.makeScale3=function M4x4_makeScale3(a,d,c,b){if(b==undefined){b=new MJS_FLOAT_ARRAY_TYPE(16)}b[0]=a;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=d;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=c;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};M4x4.makeScale1=function M4x4_makeScale1(a,b){return M4x4.makeScale3(a,a,a,b)};M4x4.makeScale=function M4x4_makeScale(a,b){return M4x4.makeScale3(a[0],a[1],a[2],b)};M4x4.scale3=function M4x4_scale3(b,e,d,a,c){if(c==a){a[0]*=b;a[1]*=b;a[2]*=b;a[3]*=b;a[4]*=e;a[5]*=e;a[6]*=e;a[7]*=e;a[8]*=d;a[9]*=d;a[10]*=d;a[11]*=d;return a}if(c==undefined){c=new MJS_FLOAT_ARRAY_TYPE(16)}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*d;c[9]=a[9]*d;c[10]=a[10]*d;c[11]=a[11]*d;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};M4x4.scale1=function M4x4_scale1(b,a,c){if(c==a){a[0]*=b;a[1]*=b;a[2]*=b;a[3]*=b;a[4]*=b;a[5]*=b;a[6]*=b;a[7]*=b;a[8]*=b;a[9]*=b;a[10]*=b;a[11]*=b;return a}if(c==undefined){c=new MJS_FLOAT_ARRAY_TYPE(16)}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};M4x4.scale=function M4x4_scale(c,b,d){var a=c[0],f=c[1],e=c[2];if(d==b){b[0]*=a;b[1]*=a;b[2]*=a;b[3]*=a;b[4]*=f;b[5]*=f;b[6]*=f;b[7]*=f;b[8]*=e;b[9]*=e;b[10]*=e;b[11]*=e;return b}if(d==undefined){d=new MJS_FLOAT_ARRAY_TYPE(16)}d[0]=b[0]*a;d[1]=b[1]*a;d[2]=b[2]*a;d[3]=b[3]*a;d[4]=b[4]*f;d[5]=b[5]*f;d[6]=b[6]*f;d[7]=b[7]*f;d[8]=b[8]*e;d[9]=b[9]*e;d[10]=b[10]*e;d[11]=b[11]*e;d[12]=b[12];d[13]=b[13];d[14]=b[14];d[15]=b[15];return d};M4x4.makeTranslate3=function M4x4_makeTranslate3(a,d,c,b){if(b==undefined){b=new MJS_FLOAT_ARRAY_TYPE(16)}b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a;b[13]=d;b[14]=c;b[15]=1;return b};M4x4.makeTranslate1=function M4x4_makeTranslate1(a,b){return M4x4.makeTranslate3(a,a,a,b)};M4x4.makeTranslate=function M4x4_makeTranslate(a,b){return M4x4.makeTranslate3(a[0],a[1],a[2],b)};M4x4.translate3Self=function M4x4_translate3Self(b,d,c,a){a[12]+=a[0]*b+a[4]*d+a[8]*c;a[13]+=a[1]*b+a[5]*d+a[9]*c;a[14]+=a[2]*b+a[6]*d+a[10]*c;a[15]+=a[3]*b+a[7]*d+a[11]*c;return a};M4x4.translate3=function M4x4_translate3(q,o,l,e,a){if(a==e){e[12]+=e[0]*q+e[4]*o+e[8]*l;e[13]+=e[1]*q+e[5]*o+e[9]*l;e[14]+=e[2]*q+e[6]*o+e[10]*l;e[15]+=e[3]*q+e[7]*o+e[11]*l;return e}if(a==undefined){a=new MJS_FLOAT_ARRAY_TYPE(16)}var k=e[0];var d=e[1];var s=e[2];var j=e[3];var i=e[4];var c=e[5];var p=e[6];var h=e[7];var g=e[8];var b=e[9];var n=e[10];var f=e[11];a[0]=k;a[1]=d;a[2]=s;a[3]=j;a[4]=i;a[5]=c;a[6]=p;a[7]=h;a[8]=g;a[9]=b;a[10]=n;a[11]=f;a[12]=k*q+i*o+g*l+e[12];a[13]=d*q+c*o+b*l+e[13];a[14]=s*q+p*o+n*l+e[14];a[15]=j*q+h*o+f*l+e[15];return a};M4x4.translate1=function M4x4_translate1(b,a,c){return M4x4.translate3(b,b,b,a,c)};M4x4.translateSelf=function M4x4_translateSelf(c,b){var a=c[0],e=c[1],d=c[2];b[12]+=b[0]*a+b[4]*e+b[8]*d;b[13]+=b[1]*a+b[5]*e+b[9]*d;b[14]+=b[2]*a+b[6]*e+b[10]*d;b[15]+=b[3]*a+b[7]*e+b[11]*d;return b};M4x4.translate=function M4x4_translate(g,l,i){var f=g[0],e=g[1],d=g[2];if(i==l){l[12]+=l[0]*f+l[4]*e+l[8]*d;l[13]+=l[1]*f+l[5]*e+l[9]*d;l[14]+=l[2]*f+l[6]*e+l[10]*d;l[15]+=l[3]*f+l[7]*e+l[11]*d;return l}if(i==undefined){i=new MJS_FLOAT_ARRAY_TYPE(16)}var q=l[0];var c=l[1];var k=l[2];var t=l[3];var p=l[4];var b=l[5];var j=l[6];var s=l[7];var n=l[8];var a=l[9];var h=l[10];var o=l[11];i[0]=q;i[1]=c;i[2]=k;i[3]=t;i[4]=p;i[5]=b;i[6]=j;i[7]=s;i[8]=n;i[9]=a;i[10]=h;i[11]=o;i[12]=q*f+p*e+n*d+l[12];i[13]=c*f+b*e+a*d+l[13];i[14]=k*f+j*e+h*d+l[14];i[15]=t*f+s*e+o*d+l[15];return i};M4x4.makeLookAt=function M4x4_makeLookAt(f,b,e,a){var g=V3.direction(f,b,V3._temp1);var i=V3.normalize(V3.cross(e,g,V3._temp2),V3._temp2);var h=V3.normalize(V3.cross(g,i,V3._temp3),V3._temp3);var d=M4x4._temp1;var c=M4x4._temp2;d[0]=i[0];d[1]=h[0];d[2]=g[0];d[3]=0;d[4]=i[1];d[5]=h[1];d[6]=g[1];d[7]=0;d[8]=i[2];d[9]=h[2];d[10]=g[2];d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=-f[0];c[13]=-f[1];c[14]=-f[2];c[15]=1;if(a==undefined){a=new MJS_FLOAT_ARRAY_TYPE(16)}return M4x4.mul(d,c,a)};M4x4.transposeSelf=function M4x4_transposeSelf(a){var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return a};M4x4.transpose=function M4x4_transpose(a,c){if(a==c){var b=0;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return a}if(c==undefined){c=new MJS_FLOAT_ARRAY_TYPE(16)}c[0]=a[0];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=a[1];c[5]=a[5];c[6]=a[9];c[7]=a[13];c[8]=a[2];c[9]=a[6];c[10]=a[10];c[11]=a[14];c[12]=a[3];c[13]=a[7];c[14]=a[11];c[15]=a[15];return c};M4x4.transformPoint=function M4x4_transformPoint(b,d,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}var a=d[0],g=d[1],f=d[2];e[0]=b[0]*a+b[4]*g+b[8]*f+b[12];e[1]=b[1]*a+b[5]*g+b[9]*f+b[13];e[2]=b[2]*a+b[6]*g+b[10]*f+b[14];var c=b[3]*a+b[7]*g+b[11]*f+b[15];if(c!=1){e[0]/=c;e[1]/=c;e[2]/=c}return e};M4x4.transformLine=function M4x4_transformLine(b,d,e){if(e==undefined){e=new MJS_FLOAT_ARRAY_TYPE(3)}var a=d[0],g=d[1],f=d[2];e[0]=b[0]*a+b[4]*g+b[8]*f;e[1]=b[1]*a+b[5]*g+b[9]*f;e[2]=b[2]*a+b[6]*g+b[10]*f;var c=b[3]*a+b[7]*g+b[11]*f;if(c!=1){e[0]/=c;e[1]/=c;e[2]/=c}return e};M4x4.transformPointAffine=function M4x4_transformPointAffine(b,c,d){if(d==undefined){d=new MJS_FLOAT_ARRAY_TYPE(3)}var a=c[0],f=c[1],e=c[2];d[0]=b[0]*a+b[4]*f+b[8]*e+b[12];d[1]=b[1]*a+b[5]*f+b[9]*e+b[13];d[2]=b[2]*a+b[6]*f+b[10]*e+b[14];return d};M4x4.transformLineAffine=function M4x4_transformLineAffine(b,c,d){if(d==undefined){d=new MJS_FLOAT_ARRAY_TYPE(3)}var a=c[0],f=c[1],e=c[2];d[0]=b[0]*a+b[4]*f+b[8]*e;d[1]=b[1]*a+b[5]*f+b[9]*e;d[2]=b[2]*a+b[6]*f+b[10]*e;return d};var Mesh=function(){this.points=[];this.edges=[];this.triangles=[];this.quads=[];this.pointNormals=[]};Mesh.prototype.addPoint=function(a){this.points.push(a);return this.points.length-1};Mesh.prototype.addPoints=function(){var b=[];for(var a=0;a<arguments.length;a++){b.push(this.addPoint(arguments[a]))}return b};Mesh.prototype.addEdge=function(a){this.edges.push(a)};Mesh.prototype.addTriangle=function(a){this.triangles.push(a)};Mesh.prototype.addQuad=function(a){this.quads.push(a)};Level={};Level.levelInfos=[{filename:"level_1.json",name:"level1",type:"level",finalLevel:true,nextLevel:"level2"}];Level.levelsLoaded=false;Level.levels={};Level.levelStrings={};var player=null;Level.releaseStarCharge=function(f){var c=f.starCharge;var d=new ChargeParticle(f);var b=false;for(var a=0;a<chargeParticles.length;a++){var e=chargeParticles[a];if(e==null){chargeParticles[a]=d;b=true;break}}if(!b){chargeParticles.push(d)}};Level.getPickupAt=function(g){var d=Math.floor(g[0]/32);var c=Math.floor(g[1]/32);var k=Math.ceil((g[0]+g[2])/32);var j=Math.ceil((g[1]+g[3])/32);var a=currentLevel;if(!rectCollide(g,[0,0,a.width*32,a.height*32])){return NO_PICKUP}for(var h=d;h<=k;h++){for(var f=c;f<=j;f++){var e=h+f*a.width;var b=a.pickupLayer.data[e];if(b!=0&&rectCollide(g,[h*32,f*32,32,32])){var i=false;switch(b){case 135:if(player.starPower<player.maxStarPower){player.starPower=Math.min(player.maxStarPower,player.starPower+0.5);i=true;Sound.play(Sound.STAR_PICKUP_ID)}break;case 136:if(player.health<player.maxHealth){player.health=Math.min(player.maxHealth,player.health+0.5);i=true;Sound.play(Sound.HEALTH_PICKUP_ID)}break}if(i){a.pickupLayer.data[e]=0}}}}};Level.reloadLevel=function(){Level.readLevel(currentLevelName,null);currentLevel=Level.levels[currentLevelName]};Level.loadNextLevel=function(){currentLevelName=currentLevel.nextLevelName;Level.readLevel(currentLevel.nextLevelName,null);currentLevel=Level.levels[currentLevel.nextLevelName]};Level.loadInitialLevel=function(){currentLevelName=initialLevelName;Level.readLevel(initialLevelName,null);currentLevel=Level.levels[initialLevelName]};Level.hitImpulse=function(j,g){var k=currentLevel.objectLayers[0].objects;var f=g.x;var e=g.y;var b=[f-g.width/2,e-g.height/2,g.width,g.height];for(var d=0;d<k.length;d++){var c=k[d];if(!c.dead&&c!=j){var h=[c.x-c.physicalWidth/2,c.y-c.physicalHeight/2,c.physicalWidth,c.physicalHeight];var a=rectCollide(h,b);if(a){Sound.play(Sound.HIT_1_ID);c.velocityModifiers.push({vx:g.impulseX,vy:g.impulseY,duration:g.duration});c.health-=g.damage;if(c.health<=0){c.die()}}}}};Level.intersectLevel=function(a,f){var d=Math.floor(f[0]/32);var c=Math.floor(f[1]/32);var i=Math.ceil((f[0]+f[2])/32);var h=Math.ceil((f[1]+f[3])/32);if(!rectCollide(f,[0,0,a.width*32,a.height*32])){return true}for(var g=d;g<i;g++){for(var e=c;e<h;e++){var b=a.solidLayer.data[g+e*a.width];if(b!=0&&rectCollide(f,[g*32,e*32,32,32])){return true}}}return false};Level.setupLevel=function(g){var a=Level.levels[g];var c=Math.random;a.randomSeed=Math.seedrandom(g);a.random=Math.random;a.objectLayers=[];a.tileLayers=[];a.aboveLayers=[];a.solidLayer=null;a.pickupLayer=null;for(var e=0;e<Level.levelInfos.length;e++){var h=Level.levelInfos[e];if(h.name==g){a.finalLevel=h.finalLevel;a.nextLevelName=h.nextLevel;break}}for(var e=0;e<a.layers.length;e++){var f=a.layers[e];if(f.type=="tilelayer"){if(f.name=="Solidness"){a.solidLayer=f}else{if(f.name=="Above Ground"){a.aboveLayers.push(f)}else{if(f.name=="Pickup"){a.pickupLayer=f;a.tileLayers.push(f)}else{a.tileLayers.push(f)}}}}else{if(f.type=="objectgroup"){a.objectLayers.push(f)}else{logitRnd("Unknown layer type "+f.type+"\n",0.1)}}}for(var e=0;e<a.layers.length;e++){var f=a.layers[e];if(f.type=="objectgroup"){var l=f.objects;for(var d=0;d<l.length;d++){var b=l[d];b.image=ImageHandler.images.tiles;b.maxHealth=1;b.maxStarPower=0;b.hitDamage=0.501;b.hitPeriod=30;b.hitPeriod2=20;b.hitImpulse=4;b.die=enemyDie;b.dead=false;b.aiMode=PATROLLING;b.oldBotBehaveInfo=null;b.counter=100;b.decisionPeriod=10;b.maxSpeed=2;b.charging=false;b.currentCharge=0;b.headType=0;b.starCharge=0;var k=true;switch(b.type){case"kid 1":b.paint=paintKid;b.step=stepKid;b.physicalWidth=20;b.physicalHeight=20;b.visualWidth=64;b.visualHeight=64;b.spriteGridX=0;b.spriteGridY=10;b.maxHealth=1.2;b.hitDamage=0.2;b.hitImpulse=3;break;case"kid 2":b.paint=paintKid;b.step=stepKid;b.physicalWidth=20;b.physicalHeight=20;b.visualWidth=64;b.visualHeight=64;b.spriteGridX=0;b.spriteGridY=12;b.maxHealth=1.2;b.hitPeriod=27;b.hitPeriod2=15;b.hitDamage=0.25;b.maxSpeed=2.2;b.hitImpulse=4;break;case"kid 3":b.paint=paintKid;b.step=stepKid;b.physicalWidth=20;b.physicalHeight=20;b.visualWidth=64;b.visualHeight=64;b.spriteGridX=0;b.spriteGridY=14;b.maxHealth=2;b.hitPeriod=24;b.hitPeriod2=15;b.hitDamage=0.27;b.maxSpeed=2.5;b.hitImpulse=5;break;case"player":b.paint=paintPlayer;b.step=stepPlayer;b.physicalWidth=20;b.physicalHeight=20;b.visualWidth=64;b.visualHeight=64;b.spriteGridX=0;b.spriteGridY=8;b.maxHealth=1.5;b.maxStarPower=1;b.die=playerDie;b.headType=0;b.hitPeriod=27;b.hitPeriod2=15;b.maxSpeed=3;b.hitImpulse=4;player=b;break;default:logit("discovered unknown object type: "+b.type+"\n");break}if(k){b.health=b.maxHealth;b.starPower=b.maxStarPower;b.vx=0;b.vy=0;b.animationState=0;b.turnedRight=true;b.animationCounter=0;b.hitImpulseSourceX=20;b.hitImpulseSourceY=0;b.hitCounter=100;b.velocityModifiers=[]}}}}};Level.getSpriteRect=function(c,b,a){return[(c.spriteGridX)*32+c.visualWidth*b,(c.spriteGridY)*32+c.visualHeight*a,c.visualWidth,c.visualHeight]};Level.readLevel=function(b,a){if(Level.levels[b]){Level.levels[b]=$.parseJSON(Level.levelStrings[b]);Level.setupLevel(b)}else{var c=$.ajax({type:"GET",url:a,dataType:"text",async:false,success:function(d){Level.levelStrings[b]=d;Level.levels[b]=$.parseJSON(d);Level.setupLevel(b)},error:function(d,f,e){logit("error "+d+" "+f+" "+e+"\n")},complete:function(d,e){}})}};Level.init=function(){for(var a=0;a<Level.levelInfos.length;a++){var b=Level.levelInfos[a];if(b.type="level"){Level.readLevel(b.name,b.filename)}}};function getObjectRect(a){return[a.x-a.physicalWidth/2,a.y-a.physicalHeight/2,a.physicalWidth,a.physicalHeight]}function mirror(g){for(var f=0;f<g.width/2;f++){for(var e=0;e<g.height;e++){var d=f*4+e*g.width*4;var a=(g.width-f-1)*4+e*g.width*4;for(var c=0;c<4;c++){var b=g.data[d+c];g.data[d+c]=g.data[a+c];g.data[a+c]=b}}}}function paintHumanoidSprite(g){if(g.dead){return}if(!g.spriteImages&&g.image.width!=0){g.spriteImages=[];var b=0;for(b=0;b<5;b++){var f=Level.getSpriteRect(g,b,0);g.spriteImages.push(createSubImage(g.image,f,null))}for(b=0;b<5;b++){var f=Level.getSpriteRect(g,b,0);g.spriteImages.push(createSubImage(g.image,f,mirror))}var a=Level.getSpriteRect(g,5,0);g.spriteImages.push(createSubImage(g.image,a,null));g.spriteImages.push(createSubImage(g.image,a,mirror))}ctx.drawImage(g.spriteImages[g.animationState],0,0,g.visualWidth,g.visualHeight,g.x-g.visualWidth/2-cameraX,g.y-g.visualHeight+16-cameraY,g.visualWidth,g.visualHeight);var d=g.health/g.maxHealth;var c=Math.min(g.visualWidth,Math.max(32,g.visualWidth*(g.maxHealth/5)));var h=[g.x-c/2-cameraX,g.y-g.visualHeight/2-cameraY-13,c,4];if(d<0.99){if(d>0.7){ctx.fillStyle="#00ff00"}else{if(d>0.3){ctx.fillStyle="#ffff00"}else{ctx.fillStyle="#ff0000"}}ctx.fillRect(h[0],h[1],h[2]*d,h[3]);ctx.strokeStyle="#111111";ctx.strokeRect(h[0],h[1],h[2],h[3])}if(g.maxStarPower>0){var e=g.starPower/g.maxStarPower;if(e<0.99){if(e>0.7){ctx.fillStyle="#ffff00"}else{if(e>0.3){ctx.fillStyle="#aaaa00"}else{ctx.fillStyle="#555500"}}ctx.fillRect(h[0],h[1]-5,h[2]*e,h[3]);ctx.strokeStyle="#111111";ctx.strokeRect(h[0],h[1]-5,h[2],h[3])}}}function paintSprite(a){ctx.drawImage(a.image,a.spriteGridX*32,a.spriteGridY*32,a.visualWidth,a.visualHeight,a.x-a.visualWidth/2-cameraX,a.y-a.visualHeight+16-cameraY,a.visualWidth,a.visualHeight);ctx.strokeStyle="#ffffff";ctx.strokeRect(a.x-a.physicalWidth/2-cameraX,a.y-a.physicalHeight/2-cameraY,a.physicalWidth,a.physicalHeight)}function paintPlayer(){paintHumanoidSprite(this)}function paintKid(){paintHumanoidSprite(this)}function paintBully(){paintSprite(this)}function paintBall(){paintSprite(this)}function moveObject(b){var e=getObjectRect(b);var j=b.vx;var g=b.vy;var a=-1;for(var c=0;c<b.velocityModifiers.length;c++){var h=b.velocityModifiers[c];h.duration--;if(h.duration<0){a=c}else{j+=h.vx;g+=h.vy}}if(a!=-1){b.velocityModifiers.length=0}var d=rectTranslateCopy(e,j,g);if(Level.intersectLevel(currentLevel,d)){d=rectTranslateCopy(e,j,0);if(Level.intersectLevel(currentLevel,d)){j=0}d=rectTranslateCopy(e,0,g);if(Level.intersectLevel(currentLevel,d)){g=0}}var f=currentLevel.objectLayers[0].objects;b.x+=j;b.y+=g;var a=-1}function stepHumanoidStar(c,a){if(c.charging){if(!a){Sound.play(Sound.RELEASE_ID);c.charging=false;c.health=Math.min(c.maxHealth,c.health+c.starCharge*0.5);c.starCharge=0}else{var b=0.01;c.starPower-=b;if(c.starPower<=0){c.starPower=0}else{c.starCharge+=b}}}else{if(a){c.charging=true;Sound.play(Sound.CHARGE_ID)}else{}}}function stepHumanoidHitting(d,e){if(e){if(d.hitCounter>d.hitPeriod){Sound.play(Sound.TRY_HIT_ID);d.hitCounter=0;d.hitting=true;d.animationState=d.turnedRight?10:11;var b=-d.hitImpulse;var c=-1;if(d.turnedRight){b*=-1;c=1}var a=0;Level.hitImpulse(d,{x:d.x+c*d.hitImpulseSourceX,y:d.y+c*d.hitImpulseSourceY,impulseX:b,impulseY:a,width:10,height:10,duration:10,damage:d.hitDamage})}}d.hitCounter++;if(d.hitting){d.vx=0;d.vy=0;if(d.hitCounter>d.hitPeriod2){d.animationState=d.turnedRight?0:5;d.hitting=false}}if(d.charging){d.vx=0;d.vy=0}}function stepHumanoidMovement(b,c,a){var d=1;if(c!=0&&a!=0){d=0.707}b.vx=d*c;b.vy=d*a;if(c!=0||a!=0){if(b.animationCounter>10){b.animationState++;if(c>0){b.turnedRight=true;if(b.animationState>4){b.animationState=1}}else{if(c<0){b.turnedRight=false;if(b.animationState>9||b.animationState<6){b.animationState=6}}else{if(b.turnedRight){if(b.animationState>4){b.animationState=1}}else{if(b.animationState>9||b.animationState<6){b.animationState=6}}}}b.animationCounter=0}else{b.animationCounter++}}else{if(!b.hitting&&b.hitCounter>15){b.animationState=b.turnedRight?0:5}}}function stepPlayer(){var e=0;var c=0;var b=2;if(Input.keyDown(Input.leftKey)||Input.keyDown(Input.aKey)){e=-b}if(Input.keyDown(Input.rightKey)||Input.keyDown(Input.dKey)){e=b}if(Input.keyDown(Input.upKey)||Input.keyDown(Input.wKey)){c=-b}if(Input.keyDown(Input.downKey)||Input.keyDown(Input.sKey)){c=b}stepHumanoidMovement(this,e,c);var d=false;if(Input.down[Input.ctrlKey]||Input.down[Input.xKey]){d=true}stepHumanoidHitting(this,d);var a=false;if(Input.down[Input.enterKey]||Input.down[Input.cKey]){a=true}stepHumanoidStar(this,a);moveObject(this);Level.getPickupAt([this.x-1,this.y-1,2,2])}function botBehave(l){var s=0;var q=0;var b=false;var j=vecMinusCopy([player.x-20,player.y],[l.x,l.y]);var h=vecMinusCopy([player.x+20,player.y],[l.x,l.y]);var n=vecLength(j);var g=vecLength(h);var e=n<g?j:h;var c=Math.min(n,g);if(c>0.01){var a=vecNormalizeCopy(e);switch(l.aiMode){case IDLE:logitRnd("should not happen that botBehave has mode IDLE\n",0.01);break;case PATROLLING:if(c<400){l.aiMode=ATTACKING}break;case ATTACKING:if(c<15&&e[1]<8){b=true}else{s=a[0]*l.maxSpeed;q=a[1]*l.maxSpeed}break}}var r=false;var p=currentLevel.objectLayers[0].objects;for(var k=0;k<p.length;k++){var d=p[k];if(d!=l&&d!=player){var e=[d.x-l.x,d.y-l.y];var m=vecLength(e);if(m<25){var a=vecNormalizeCopy(e);s-=a[0]*2;q-=a[1]*2;r=true}}}if(r){var f=[s,q];if(vecLength(f)>0.05){vecNormalize(f);vecMult(f,l.maxSpeed);s=f[0];q=f[1]}}return{wantedDx:s,wantedDy:q,hitWanted:b}}function stepKid(){if(this.dead){return}var c=vecDistanceBetween([this.x,this.y],[player.x,player.y]);if(this.aiMode==IDLE){if(c<1200){this.aiMode=PATROLLING}else{return}}else{if(this.aiMode==PATROLLING){if(c>1500){this.aiMode=IDLE;return}}}var a=null;if(this.oldBotBehaveInfo==null||this.counter>this.decisionPeriod){a=botBehave(this);this.counter=0;this.oldBotBehaveInfo=a}else{a=this.oldBotBehaveInfo}this.counter++;var e=a.wantedDx;var b=a.wantedDy;stepHumanoidMovement(this,e,b);var d=a.hitWanted;stepHumanoidHitting(this,d);moveObject(this)}function stepBully(){moveObject(this)}function stepBall(){moveObject(this)}function selectKidActivity(a){}function Button(a,c,b){this.rect=a;this.text=c;this.image=b;this.mouseOver=false;this.pressed=false;this.clicked=false;this.paintBackground=true;this.expandWhenMouseOver=false;this.centralizeH=false;this.centralizeV=true}Button.prototype.paint=function(){var l="#3b39ff";if(this.mouseOver||this.clicked){l="#b8b7ff"}var k="#01008c";if(this.mouseOver||this.clicked){k="#1e1cff"}var i=this.rect[0];var f=this.rect[1];var j=this.rect[2];var d=this.rect[3];ctx.strokeStyle=l;ctx.fillStyle=k;if(this.paintBackground){ctx.fillRect(i,f,j,d);ctx.strokeRect(i,f,j,d)}var e=10*this.text.length;var g=10;var a=1;if(this.expandWhenMouseOver&&(this.mouseOver||this.pressed)){a=1.5}var c=i;var b=f;if(this.centralizeH){c=i+(j-e*a)/2}if(this.centralizeV){b=f+(d-g*a)/2}Font.drawString(c,b,this.text,FontInfos.smallFont,a)};Button.prototype.step=function(){var a=this.mouseOver;this.mouseOver=rectContains(this.rect,[Input.mouseX,Input.mouseY]);if(this.mouseOver&&!a){Sound.play(Sound.BLIP_1_ID)}this.clicked=false;if(this.pressed&&!Input.mouseDown&&this.mouseOver){this.clicked=true;Sound.play(Sound.BUTTON_PRESS_1_ID)}this.pressed=Input.mouseDown&&this.mouseOver};function MenuStarParticle(h,f,g,e,b,i,c,d,a){this.x=h;this.y=f;this.scale=c;this.angle=b;this.w=i;this.vx=g;this.vy=e;this.alpha=d;this.alphaDelta=a;this.maxAlpha=1;this.minAlpha=0}MenuStarParticle.prototype.paint=function(){if(this.alpha>0){var a=ctx.globalAlpha;ctx.save();ctx.translate(this.x,this.y);ctx.rotate(this.angle);ctx.translate(-32,-32);ctx.globalAlpha=this.alpha;ctx.drawImage(ImageHandler.images.tiles,6*32,6*32,64,64,0,0,64,64);ctx.restore();ctx.globalAlpha=a}};MenuStarParticle.prototype.step=function(){this.angle+=this.w;this.x+=this.vx;this.y+=this.vy;this.alpha+=this.alphaDelta;if(this.alpha>this.maxAlpha||this.alpha<this.minAlpha){this.alphaDelta*=-1;if(this.alpha>this.maxAlpha){this.alpha=this.maxAlpha}else{this.alpha=this.minAlpha}}if(this.x>canvas.width+100){this.x=-90}if(this.x<-100){this.x=canvas.width+90}if(this.y>canvas.height+100){this.y=-90}if(this.y<-100){this.y=canvas.height+90}};var cameraX=0;var cameraY=0;var mainMenuButtons=null;var playButton=null;var howToPlayButton=null;var creditsButton=null;var menuStarParticles=null;var pauseMenuButtons=null;var restartButton=null;var resumeButton=null;var mainMenuButton=null;var chargeParticles=[];function ChargeParticle(a){this.charge=a.starCharge;this.vx=a.turnedRight?0.01:-0.01;this.vy=0;this.x=a.x;this.y=a.y;this.duration=this.charge*500}ChargeParticle.prototype.paint=function(){ctx.fillStyle="#ffff00";ctx.beginPath();ctx.arc(this.x,this.y,this.charge*4,0,Math.PI*2);ctx.closePath();ctx.fill();ctx.fillRect(this.x,this.y,50,50)};ChargeParticle.prototype.step=function(){this.x+=this.vx;this.y+=this.vy;this.duration--};function stepChargeParticles(){for(var a=0;a<chargeParticles.length;a++){var b=chargeParticles[a];if(b!=null){b.step();if(b.duration<=0){chargeParticles[a]=null}}}}function updateCamera(){var b=currentLevel.width*32;var a=currentLevel.height*32;cameraX=Math.max(0,Math.min(b-canvas.width,player.x-canvas.width/2));cameraY=Math.max(0,Math.min(a-canvas.height,player.y-canvas.height/2))}function createPauseMenuStuffIfNecessary(){if(pauseMenuButtons==null){pauseMenuButtons=[];resumeButton=new Button([50,50,100,20],"RESUME",null);resumeButton.paintBackground=false;resumeButton.expandWhenMouseOver=true;restartButton=new Button([50,80,100,20],"RESTART LEVEL",null);restartButton.paintBackground=false;restartButton.expandWhenMouseOver=true;mainMenuButton=new Button([50,110,100,20],"MAIN MENU",null);mainMenuButton.paintBackground=false;mainMenuButton.expandWhenMouseOver=true;pauseMenuButtons.push(resumeButton);pauseMenuButtons.push(restartButton);pauseMenuButtons.push(mainMenuButton)}}function createMainMenuStuffIfNecessary(){if(mainMenuButtons==null){mainMenuButtons=[];playButton=new Button([50,250,100,20],"PLAY",null);playButton.paintBackground=false;playButton.expandWhenMouseOver=true;howToPlayButton=new Button([50,280,100,20],"HOW TO PLAY",null);howToPlayButton.paintBackground=false;howToPlayButton.expandWhenMouseOver=true;creditsButton=new Button([50,310,100,20],"CREDITS",null);creditsButton.paintBackground=false;creditsButton.expandWhenMouseOver=true;mainMenuButtons.push(playButton);mainMenuButtons.push(howToPlayButton);mainMenuButtons.push(creditsButton)}if(menuStarParticles==null){menuStarParticles=[];var v=0.15;var l=0.02;var t=0.005;var u=0.001;var c=100;var m=0.001;var n=0.0002;var d=0.8;for(var o=0;o<10;o++){var f;if(Math.random()<0.5){f=-Math.random()*c-64}else{f=canvas.width+Math.random()*c+64}var e=Math.random()*(canvas.height+c*2)-c;var q=Math.random()*v+l;var b=Math.random()*2*3.14159;var a=Math.random();var s=Math.random()*m+n;var r=Math.random()*2*3.14159;var g=t*Math.random()*2-t;while(Math.abs(g)<u){g=t*Math.random()*2-t}var k=q*Math.cos(b);var h=q*Math.sin(b);var z=0.2+Math.random()*3;var j=new MenuStarParticle(f,e,k,h,r,g,z,a,s);j.maxAlpha=0.2+Math.random()*0.2;j.minAlpha=-0.5*Math.random()-0.2;menuStarParticles.push(j)}}}function stepStarParticles(){for(var a=0;a<menuStarParticles.length;a++){menuStarParticles[a].step()}}function stepMainMenu(){stateCounter++;if(stateCounter>60&&(stateCounter%41)==0&&!Sound.isPlaying(Sound.HAPPY_MUSIC_ID)){Sound.play(Sound.HAPPY_MUSIC_ID)}createMainMenuStuffIfNecessary();for(var a=0;a<mainMenuButtons.length;a++){mainMenuButtons[a].step()}if(howToPlayButton.clicked){state=HOW_TO_PLAY_MENU;stateCounter=0}if(playButton.clicked){state=PLAYING;stateCounter=0}if(creditsButton.clicked){state=CREDITS_MENU;stateCounter=0}stepStarParticles()}function stepHowToPlayMenu(){stateCounter++;if(stateCounter>50&&(Input.mouseDown||Input.anyKeyJustPressed())){state=MAIN_MENU;stateCounter=0}stepStarParticles()}function stepCreditsMenu(){stateCounter++;if(stateCounter>50&&(Input.mouseDown||Input.anyKeyJustPressed())){state=MAIN_MENU;stateCounter=0}stepStarParticles()}function stepPlaying(){if(winning){var g=false;var d=120;var b=50;if(currentLevel.finalLevel){g=true;d=2000;b=120}if(stateCounter>d||(stateCounter>b&&Input.anyKeyJustPressed())){stateCounter=0;winning=false;if(g){Level.loadInitialLevel();state=MAIN_MENU}else{Level.loadNextLevel();if(!Sound.isPlaying(Sound.HAPPY_MUSIC_ID)){Sound.play(Sound.HAPPY_MUSIC_ID)}}}else{stateCounter++}}else{if(dying){if(stateCounter>120||(stateCounter>50&&Input.anyKeyJustPressed())){stateCounter=0;dying=false;Level.reloadLevel()}else{stateCounter++}}else{if(paused){createPauseMenuStuffIfNecessary();for(var f=0;f<pauseMenuButtons.length;f++){pauseMenuButtons[f].step()}if(resumeButton.clicked||Input.keyJustPressed(Input.escapeKey)){paused=false}if(restartButton.clicked){stateCounter=0;paused=false;Level.reloadLevel()}if(mainMenuButton.clicked){stateCounter=0;Level.reloadLevel();state=MAIN_MENU;paused=false}}else{stateCounter++;updateCamera();for(var f=0;f<currentLevel.objectLayers.length;f++){var e=currentLevel.objectLayers[f];for(var c=0;c<e.objects.length;c++){var h=e.objects[c];h.step()}}if(Input.down[Input.escapeKey]){paused=true}var a=true;for(var f=0;f<currentLevel.objectLayers.length;f++){var e=currentLevel.objectLayers[f];for(var c=0;c<e.objects.length;c++){var h=e.objects[c];if(h!=player&&!h.dead){a=false}}}if(a){winning=true;stateCounter=0}}}}}function paintMouseCursor(){ctx.drawImage(ImageHandler.images.tiles,0,32*4,32,32,Input.mouseX,Input.mouseY,32,32)}function paintStarParticles(){for(var a=0;a<menuStarParticles.length;a++){menuStarParticles[a].paint()}}function paintMainMenu(){var a=50;var d=10;createMainMenuStuffIfNecessary();paintStarParticles();var b=ImageHandler.images.title;ctx.drawImage(b,a,d);for(var c=0;c<mainMenuButtons.length;c++){mainMenuButtons[c].paint()}}var howToPlayTexts=["*** STORY ***","YOU ARE ALONE AGAINST A HORDE OF ENEMIES!!!","","DONT BE FOOLED BY THE NICE LOOKS OF THE ENEMIES","THEY ARE FIERCE BEASTS!!!","","*** CONTROL ***","ARROWS, A,S,D,W:  WALK","CTRL, X, ENTER:   HIT","SPACE, C:         CHARGE/RELEASE STAR POWER","","*** PICKUPS ***","PICKUP RED BOTTLES FOR MORE HEALTH","PICKUP STARS FOR MORE STAR POWER",];function paintHowToPlayMenu(){createMainMenuStuffIfNecessary();for(var a=0;a<howToPlayTexts.length;a++){Font.drawString(20,20+a*15,howToPlayTexts[a],FontInfos.smallFont,1)}paintStarParticles()}var creditTexts=["THANKS LUDUM DARE FOR SPONSORING THIS CRAZY EVENT","","SOFTWARE OR OTHER STUFF USED:","* TILED","* GIMP","* BLENDER","* OPEN MPT","* COOLTEXT.COM","* BFXR","* SYNTH1 VST INSTRUMENT","* FONT 1","* FONT 2","* NOTEPAD++"];function paintCreditsMenu(){createMainMenuStuffIfNecessary();for(var a=0;a<creditTexts.length;a++){Font.drawString(20,20+a*15,creditTexts[a],FontInfos.smallFont,1)}paintStarParticles()}function paintLevel(){var k=currentLevel.layers;var c=[];var b=[];var w=0;var u=0;var n=0;var m=0;var q=currentLevel.tilesets[0];var a=q.tilewidth;var l=q.tileheight;var h=q.imagewidth/a;var g=q.imageheight/l;var v=Math.floor(cameraX/32);var t=Math.floor(cameraY/32);var f=Math.ceil((cameraX+canvas.width)/32);var e=Math.ceil((cameraY+canvas.height)/32)+1;for(m=t;m<=e;m++){b[m]=[]}for(w=0;w<currentLevel.objectLayers.length;w++){var z=currentLevel.objectLayers[w];for(u=0;u<z.objects.length;u++){var s=z.objects[u];var r=Math.round(s.y/l);if(r>=t&&r<e){b[r].push(s)}else{}}}for(m=t;m<=e;m++){for(n=v;n<=f;n++){for(w=0;w<currentLevel.tileLayers.length;w++){var z=currentLevel.tileLayers[w];paintLayerCell(z,n,m,h)}}var d=b[m];for(w=0;w<d.length;w++){var p=d[w];p.paint()}}for(m=t;m<=e;m++){for(n=v;n<=f;n++){for(w=0;w<currentLevel.aboveLayers.length;w++){paintLayerCell(currentLevel.aboveLayers[w],n,m,h)}}}}function paintPlaying(){if(dying){paintLevel();var j="OOOH NOOOO!!! ";var g=j.length*10;var e=(canvas.width-g)/2;var b=100;ctx.fillStyle="#ffffff";for(var c=0;c<3;c++){Font.drawString(e,b+15*c,j,FontInfos.smallFont,1)}}else{if(winning){paintLevel();var a=["LEVEL COMPLETE!"];var h=false;if(currentLevel.finalLevel){a=["FANTASTIC! YOU WON!!!","","WELL DONE!"];h=true}for(var c=0;c<a.length;c++){var d=a[c];var g=d.length*10;var e=(canvas.width-g)/2;var b=100+14*c;Font.drawString(e,b,d,FontInfos.smallFont,1)}}else{if(paused){paintLevel();createPauseMenuStuffIfNecessary();var f=ctx.globalAlpha;ctx.globalAlpha=0.5;ctx.fillStyle="#000000";ctx.fillRect(0,0,canvas.width,canvas.height);ctx.globalAlpha=1;for(var c=0;c<pauseMenuButtons.length;c++){pauseMenuButtons[c].paint()}ctx.globalAlpha=f}else{paintLevel()}}}}function paintLayerCell(b,a,g,d){if(a<0||a>=currentLevel.width||g<0||g>=currentLevel.height){return}var f=b.data[a+g*currentLevel.width];if(f>0){var e=(f-1)%d;var c=Math.floor((f-1)/d);ctx.drawImage(ImageHandler.images.tiles,e*32,c*32,32,32,a*32-Math.round(cameraX),g*32-Math.round(cameraY),32,32)}}function enemyDie(){this.dead=true}function playerDie(){dying=true;stateCounter=0}var canvas=null;var ctx=null;var output=null;var beforeClearColor="#000000";var state=MAIN_MENU;var targetState=-1;var switchingState=false;var stateCounter=0;var endStateCounter=0;var stateCounter2=0;var initialLevelName="level1";var currentLevelName="level1";var currentLevelFilename="level_1.json";var currentLevel=null;var paused=false;var dying=false;var winning=false;var TestClass=function(a){if(a){this.x=a.x}};TestClass.prototype.aMethod=function(){this.x+=0.1};var TestSubClass=function(a){TestClass.call(this,a)};TestSubClass.prototype=new TestClass();window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b,a){window.setTimeout(b,1000/60)}})();function init(){canvas=document.getElementById("mainCanvas");if(canvas==null){alert(canvas)}ctx=canvas.getContext("2d");output=document.getElementById("output");beforeClearColor="#000000";ImageHandler.init(ctx);Font.init();Input.init();Level.init();mainLoop()}function logit(a){if(output){output.innerHTML+=a}}function logitRnd(b,a){if(Math.random()<a){if(output){output.innerHTML+=b}}}function transitionToState(a){stateCounter++;if(stateCounter>endStateCounter){switchingState=false;state=a;stateCounter=0;return true}else{return false}return true}var stepMillis=-1;function mainLoop(){if(currentLevel==null){currentLevel=Level.levels[initialLevelName]}if(!ImageHandler.allLoaded){ctx.fillStyle="black";ctx.fillRect(0,0,canvas.width,canvas.height);ctx.strokeStyle="#ffffff";ctx.lineWidth=1;ctx.font="12px sans-serif";ctx.strokeText("Loading... Please Wait",10,20);ctx.strokeText("Sounds Loaded: "+Sound.percentDone+"%",10,35);ctx.strokeText("Images Loaded: "+ImageHandler.percentDone+"%",10,50)}var g=new Date();var b=g.getTime();var e=12;if(stepMillis==-1){stepMillis=b;preferredStepMillis=b+1}else{preferredStepMillis=b}var a=ImageHandler.allLoaded;var c=6;for(var f=0;f<c;f++){if(stepMillis>preferredStepMillis){if(f==0){a=false}break}else{if(f==c-1){g=new Date();b=g.getTime();stepMillis=b}else{stepMillis+=e}}switch(state){case PLAYING:stepPlaying();break;case MAIN_MENU:stepMainMenu();break;case HOW_TO_PLAY_MENU:stepHowToPlayMenu();break;case CREDITS_MENU:stepCreditsMenu();break}Input.step()}if(a){ctx.fillStyle="black";ctx.fillRect(0,0,canvas.width,canvas.height);switch(state){case PLAYING:paintPlaying();break;case MAIN_MENU:paintMainMenu();break;case HOW_TO_PLAY_MENU:paintHowToPlayMenu();break;case CREDITS_MENU:paintCreditsMenu();break}paintMouseCursor()}requestAnimFrame(mainLoop)}Sound.init();$(document).ready(function(){init()});